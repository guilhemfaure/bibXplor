{"metadata":{"usedHelpers":[],"marked":[],"modules":{"imports":[],"exports":{"exported":[],"specifiers":[]}}},"options":{"filename":"/packages/minimongo/minimongo_tests.js","filenameRelative":"/packages/minimongo/minimongo_tests.js","env":{"development":{"plugins":[]}},"retainLines":false,"highlightCode":true,"suppressDeprecationMessages":false,"presets":[],"plugins":[[[],{"generateLetDeclarations":true,"enforceStrictMode":false}],[[],null],[[],{"polyfill":false}],[[],null],[[],null],[[],{"allowTopLevelThis":true,"strict":false,"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],{"loose":true}],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],{"loose":true}],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null],[[],null]],"ignore":[],"code":true,"metadata":true,"ast":true,"comments":true,"compact":false,"minified":false,"sourceMap":true,"sourceMaps":true,"sourceMapTarget":"/packages/minimongo/minimongo_tests.js.map","sourceFileName":"/packages/minimongo/minimongo_tests.js","babelrc":false,"sourceType":"module","moduleIds":false,"passPerPreset":false,"parserOpts":false,"generatorOpts":false,"basename":"minimongo_tests"},"ignored":false,"code":"// Hack to make LocalCollection generate ObjectIDs by default.\nLocalCollection._useOID = true; // assert that f is a strcmp-style comparison function that puts\n// 'values' in the provided order\n\nvar assert_ordering = function (test, f, values) {\n  for (var i = 0; i < values.length; i++) {\n    var x = f(values[i], values[i]);\n\n    if (x !== 0) {\n      // XXX super janky\n      test.fail({\n        type: \"minimongo-ordering\",\n        message: \"value doesn't order as equal to itself\",\n        value: JSON.stringify(values[i]),\n        should_be_zero_but_got: JSON.stringify(x)\n      });\n    }\n\n    if (i + 1 < values.length) {\n      var less = values[i];\n      var more = values[i + 1];\n      var x = f(less, more);\n\n      if (!(x < 0)) {\n        // XXX super janky\n        test.fail({\n          type: \"minimongo-ordering\",\n          message: \"ordering test failed\",\n          first: JSON.stringify(less),\n          second: JSON.stringify(more),\n          should_be_negative_but_got: JSON.stringify(x)\n        });\n      }\n\n      x = f(more, less);\n\n      if (!(x > 0)) {\n        // XXX super janky\n        test.fail({\n          type: \"minimongo-ordering\",\n          message: \"ordering test failed\",\n          first: JSON.stringify(less),\n          second: JSON.stringify(more),\n          should_be_positive_but_got: JSON.stringify(x)\n        });\n      }\n    }\n  }\n};\n\nvar log_callbacks = function (operations) {\n  return {\n    addedAt: function (obj, idx, before) {\n      delete obj._id;\n      operations.push(EJSON.clone(['added', obj, idx, before]));\n    },\n    changedAt: function (obj, old_obj, at) {\n      delete obj._id;\n      delete old_obj._id;\n      operations.push(EJSON.clone(['changed', obj, at, old_obj]));\n    },\n    movedTo: function (obj, old_at, new_at, before) {\n      delete obj._id;\n      operations.push(EJSON.clone(['moved', obj, old_at, new_at, before]));\n    },\n    removedAt: function (old_obj, at) {\n      var id = old_obj._id;\n      delete old_obj._id;\n      operations.push(EJSON.clone(['removed', id, at, old_obj]));\n    }\n  };\n}; // XXX test shared structure in all MM entrypoints\n\n\nTinytest.add(\"minimongo - basics\", function (test) {\n  var c = new LocalCollection(),\n      fluffyKitten_id,\n      count;\n  fluffyKitten_id = c.insert({\n    type: \"kitten\",\n    name: \"fluffy\"\n  });\n  c.insert({\n    type: \"kitten\",\n    name: \"snookums\"\n  });\n  c.insert({\n    type: \"cryptographer\",\n    name: \"alice\"\n  });\n  c.insert({\n    type: \"cryptographer\",\n    name: \"bob\"\n  });\n  c.insert({\n    type: \"cryptographer\",\n    name: \"cara\"\n  });\n  test.equal(c.find().count(), 5);\n  test.equal(c.find({\n    type: \"kitten\"\n  }).count(), 2);\n  test.equal(c.find({\n    type: \"cryptographer\"\n  }).count(), 3);\n  test.length(c.find({\n    type: \"kitten\"\n  }).fetch(), 2);\n  test.length(c.find({\n    type: \"cryptographer\"\n  }).fetch(), 3);\n  test.equal(fluffyKitten_id, c.findOne({\n    type: \"kitten\",\n    name: \"fluffy\"\n  })._id);\n  c.remove({\n    name: \"cara\"\n  });\n  test.equal(c.find().count(), 4);\n  test.equal(c.find({\n    type: \"kitten\"\n  }).count(), 2);\n  test.equal(c.find({\n    type: \"cryptographer\"\n  }).count(), 2);\n  test.length(c.find({\n    type: \"kitten\"\n  }).fetch(), 2);\n  test.length(c.find({\n    type: \"cryptographer\"\n  }).fetch(), 2);\n  count = c.update({\n    name: \"snookums\"\n  }, {\n    $set: {\n      type: \"cryptographer\"\n    }\n  });\n  test.equal(count, 1);\n  test.equal(c.find().count(), 4);\n  test.equal(c.find({\n    type: \"kitten\"\n  }).count(), 1);\n  test.equal(c.find({\n    type: \"cryptographer\"\n  }).count(), 3);\n  test.length(c.find({\n    type: \"kitten\"\n  }).fetch(), 1);\n  test.length(c.find({\n    type: \"cryptographer\"\n  }).fetch(), 3);\n  c.remove(null);\n  c.remove(false);\n  c.remove(undefined);\n  test.equal(c.find().count(), 4);\n  c.remove({\n    _id: null\n  });\n  c.remove({\n    _id: false\n  });\n  c.remove({\n    _id: undefined\n  });\n  count = c.remove();\n  test.equal(count, 0);\n  test.equal(c.find().count(), 4);\n  count = c.remove({});\n  test.equal(count, 4);\n  test.equal(c.find().count(), 0);\n  c.insert({\n    _id: 1,\n    name: \"strawberry\",\n    tags: [\"fruit\", \"red\", \"squishy\"]\n  });\n  c.insert({\n    _id: 2,\n    name: \"apple\",\n    tags: [\"fruit\", \"red\", \"hard\"]\n  });\n  c.insert({\n    _id: 3,\n    name: \"rose\",\n    tags: [\"flower\", \"red\", \"squishy\"]\n  });\n  test.equal(c.find({\n    tags: \"flower\"\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }).count(), 2);\n  test.equal(c.find({\n    tags: \"red\"\n  }).count(), 3);\n  test.length(c.find({\n    tags: \"flower\"\n  }).fetch(), 1);\n  test.length(c.find({\n    tags: \"fruit\"\n  }).fetch(), 2);\n  test.length(c.find({\n    tags: \"red\"\n  }).fetch(), 3);\n  test.equal(c.findOne(1).name, \"strawberry\");\n  test.equal(c.findOne(2).name, \"apple\");\n  test.equal(c.findOne(3).name, \"rose\");\n  test.equal(c.findOne(4), undefined);\n  test.equal(c.findOne(\"abc\"), undefined);\n  test.equal(c.findOne(undefined), undefined);\n  test.equal(c.find(1).count(), 1);\n  test.equal(c.find(4).count(), 0);\n  test.equal(c.find(\"abc\").count(), 0);\n  test.equal(c.find(undefined).count(), 0);\n  test.equal(c.find().count(), 3);\n  test.equal(c.find(1, {\n    skip: 1\n  }).count(), 0);\n  test.equal(c.find({\n    _id: 1\n  }, {\n    skip: 1\n  }).count(), 0);\n  test.equal(c.find({}, {\n    skip: 1\n  }).count(), 2);\n  test.equal(c.find({}, {\n    skip: 2\n  }).count(), 1);\n  test.equal(c.find({}, {\n    limit: 2\n  }).count(), 2);\n  test.equal(c.find({}, {\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find({}, {\n    skip: 1,\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }, {\n    skip: 1\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }, {\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }, {\n    skip: 1,\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find(1, {\n    sort: ['_id', 'desc'],\n    skip: 1\n  }).count(), 0);\n  test.equal(c.find({\n    _id: 1\n  }, {\n    sort: ['_id', 'desc'],\n    skip: 1\n  }).count(), 0);\n  test.equal(c.find({}, {\n    sort: ['_id', 'desc'],\n    skip: 1\n  }).count(), 2);\n  test.equal(c.find({}, {\n    sort: ['_id', 'desc'],\n    skip: 2\n  }).count(), 1);\n  test.equal(c.find({}, {\n    sort: ['_id', 'desc'],\n    limit: 2\n  }).count(), 2);\n  test.equal(c.find({}, {\n    sort: ['_id', 'desc'],\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find({}, {\n    sort: ['_id', 'desc'],\n    skip: 1,\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }, {\n    sort: ['_id', 'desc'],\n    skip: 1\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }, {\n    sort: ['_id', 'desc'],\n    limit: 1\n  }).count(), 1);\n  test.equal(c.find({\n    tags: \"fruit\"\n  }, {\n    sort: ['_id', 'desc'],\n    skip: 1,\n    limit: 1\n  }).count(), 1); // Regression test for #455.\n\n  c.insert({\n    foo: {\n      bar: 'baz'\n    }\n  });\n  test.equal(c.find({\n    foo: {\n      bam: 'baz'\n    }\n  }).count(), 0);\n  test.equal(c.find({\n    foo: {\n      bar: 'baz'\n    }\n  }).count(), 1);\n});\nTinytest.add(\"minimongo - error - no options\", function (test) {\n  try {\n    throw MinimongoError(\"Not fun to have errors\");\n  } catch (e) {\n    test.equal(e.message, \"Not fun to have errors\");\n  }\n});\nTinytest.add(\"minimongo - error - with field\", function (test) {\n  try {\n    throw MinimongoError(\"Cats are no fun\", {\n      field: \"mice\"\n    });\n  } catch (e) {\n    test.equal(e.message, \"Cats are no fun for field 'mice'\");\n  }\n});\nTinytest.add(\"minimongo - cursors\", function (test) {\n  var c = new LocalCollection();\n  var res;\n\n  for (var i = 0; i < 20; i++) {\n    c.insert({\n      i: i\n    });\n  }\n\n  var q = c.find();\n  test.equal(q.count(), 20); // fetch\n\n  res = q.fetch();\n  test.length(res, 20);\n\n  for (var i = 0; i < 20; i++) {\n    test.equal(res[i].i, i);\n  } // call it again, it still works\n\n\n  test.length(q.fetch(), 20); // forEach\n\n  var count = 0;\n  var context = {};\n  q.forEach(function (obj, i, cursor) {\n    test.equal(obj.i, count++);\n    test.equal(obj.i, i);\n    test.isTrue(context === this);\n    test.isTrue(cursor === q);\n  }, context);\n  test.equal(count, 20); // call it again, it still works\n\n  test.length(q.fetch(), 20); // map\n\n  res = q.map(function (obj, i, cursor) {\n    test.equal(obj.i, i);\n    test.isTrue(context === this);\n    test.isTrue(cursor === q);\n    return obj.i * 2;\n  }, context);\n  test.length(res, 20);\n\n  for (var i = 0; i < 20; i++) {\n    test.equal(res[i], i * 2);\n  } // call it again, it still works\n\n\n  test.length(q.fetch(), 20); // findOne (and no rewind first)\n\n  test.equal(c.findOne({\n    i: 0\n  }).i, 0);\n  test.equal(c.findOne({\n    i: 1\n  }).i, 1);\n\n  var id = c.findOne({\n    i: 2\n  })._id;\n\n  test.equal(c.findOne(id).i, 2);\n});\nTinytest.add(\"minimongo - transform\", function (test) {\n  var c = new LocalCollection();\n  c.insert({}); // transform functions must return objects\n\n  var invalidTransform = function (doc) {\n    return doc._id;\n  };\n\n  test.throws(function () {\n    c.findOne({}, {\n      transform: invalidTransform\n    });\n  }); // transformed documents get _id field transplanted if not present\n\n  var transformWithoutId = function (doc) {\n    return _.omit(doc, '_id');\n  };\n\n  test.equal(c.findOne({}, {\n    transform: transformWithoutId\n  })._id, c.findOne()._id);\n});\nTinytest.add(\"minimongo - misc\", function (test) {\n  // deepcopy\n  var a = {\n    a: [1, 2, 3],\n    b: \"x\",\n    c: true,\n    d: {\n      x: 12,\n      y: [12]\n    },\n    f: null,\n    g: new Date()\n  };\n  var b = EJSON.clone(a);\n  test.equal(a, b);\n  test.isTrue(LocalCollection._f._equal(a, b));\n  a.a.push(4);\n  test.length(b.a, 3);\n  a.c = false;\n  test.isTrue(b.c);\n  b.d.z = 15;\n  a.d.z = 14;\n  test.equal(b.d.z, 15);\n  a.d.y.push(88);\n  test.length(b.d.y, 1);\n  test.equal(a.g, b.g);\n  b.g.setDate(b.g.getDate() + 1);\n  test.notEqual(a.g, b.g);\n  a = {\n    x: function () {}\n  };\n  b = EJSON.clone(a);\n  a.x.a = 14;\n  test.equal(b.x.a, 14); // just to document current behavior\n});\nTinytest.add(\"minimongo - lookup\", function (test) {\n  var lookupA = MinimongoTest.makeLookupFunction('a');\n  test.equal(lookupA({}), [{\n    value: undefined\n  }]);\n  test.equal(lookupA({\n    a: 1\n  }), [{\n    value: 1\n  }]);\n  test.equal(lookupA({\n    a: [1]\n  }), [{\n    value: [1]\n  }]);\n  var lookupAX = MinimongoTest.makeLookupFunction('a.x');\n  test.equal(lookupAX({\n    a: {\n      x: 1\n    }\n  }), [{\n    value: 1\n  }]);\n  test.equal(lookupAX({\n    a: {\n      x: [1]\n    }\n  }), [{\n    value: [1]\n  }]);\n  test.equal(lookupAX({\n    a: 5\n  }), [{\n    value: undefined\n  }]);\n  test.equal(lookupAX({\n    a: [{\n      x: 1\n    }, {\n      x: [2]\n    }, {\n      y: 3\n    }]\n  }), [{\n    value: 1,\n    arrayIndices: [0]\n  }, {\n    value: [2],\n    arrayIndices: [1]\n  }, {\n    value: undefined,\n    arrayIndices: [2]\n  }]);\n  var lookupA0X = MinimongoTest.makeLookupFunction('a.0.x');\n  test.equal(lookupA0X({\n    a: [{\n      x: 1\n    }]\n  }), [// From interpreting '0' as \"0th array element\".\n  {\n    value: 1,\n    arrayIndices: [0, 'x']\n  }, // From interpreting '0' as \"after branching in the array, look in the\n  // object {x:1} for a field named 0\".\n  {\n    value: undefined,\n    arrayIndices: [0]\n  }]);\n  test.equal(lookupA0X({\n    a: [{\n      x: [1]\n    }]\n  }), [{\n    value: [1],\n    arrayIndices: [0, 'x']\n  }, {\n    value: undefined,\n    arrayIndices: [0]\n  }]);\n  test.equal(lookupA0X({\n    a: 5\n  }), [{\n    value: undefined\n  }]);\n  test.equal(lookupA0X({\n    a: [{\n      x: 1\n    }, {\n      x: [2]\n    }, {\n      y: 3\n    }]\n  }), [// From interpreting '0' as \"0th array element\".\n  {\n    value: 1,\n    arrayIndices: [0, 'x']\n  }, // From interpreting '0' as \"after branching in the array, look in the\n  // object {x:1} for a field named 0\".\n  {\n    value: undefined,\n    arrayIndices: [0]\n  }, {\n    value: undefined,\n    arrayIndices: [1]\n  }, {\n    value: undefined,\n    arrayIndices: [2]\n  }]);\n  test.equal(MinimongoTest.makeLookupFunction('w.x.0.z')({\n    w: [{\n      x: [{\n        z: 5\n      }]\n    }]\n  }), [// From interpreting '0' as \"0th array element\".\n  {\n    value: 5,\n    arrayIndices: [0, 0, 'x']\n  }, // From interpreting '0' as \"after branching in the array, look in the\n  // object {z:5} for a field named \"0\".\n  {\n    value: undefined,\n    arrayIndices: [0, 0]\n  }]);\n});\nTinytest.add(\"minimongo - selector_compiler\", function (test) {\n  var matches = function (shouldMatch, selector, doc) {\n    var doesMatch = new Minimongo.Matcher(selector).documentMatches(doc).result;\n\n    if (doesMatch != shouldMatch) {\n      // XXX super janky\n      test.fail({\n        message: \"minimongo match failure: document \" + (shouldMatch ? \"should match, but doesn't\" : \"shouldn't match, but does\"),\n        selector: JSON.stringify(selector),\n        document: JSON.stringify(doc)\n      });\n    }\n  };\n\n  var match = _.bind(matches, null, true);\n\n  var nomatch = _.bind(matches, null, false); // XXX blog post about what I learned while writing these tests (weird\n  // mongo edge cases)\n  // empty selectors\n\n\n  match({}, {});\n  match({}, {\n    a: 12\n  }); // scalars\n\n  match(1, {\n    _id: 1,\n    a: 'foo'\n  });\n  nomatch(1, {\n    _id: 2,\n    a: 'foo'\n  });\n  match('a', {\n    _id: 'a',\n    a: 'foo'\n  });\n  nomatch('a', {\n    _id: 'b',\n    a: 'foo'\n  }); // safety\n\n  nomatch(undefined, {});\n  nomatch(undefined, {\n    _id: 'foo'\n  });\n  nomatch(false, {\n    _id: 'foo'\n  });\n  nomatch(null, {\n    _id: 'foo'\n  });\n  nomatch({\n    _id: undefined\n  }, {\n    _id: 'foo'\n  });\n  nomatch({\n    _id: false\n  }, {\n    _id: 'foo'\n  });\n  nomatch({\n    _id: null\n  }, {\n    _id: 'foo'\n  }); // matching one or more keys\n\n  nomatch({\n    a: 12\n  }, {});\n  match({\n    a: 12\n  }, {\n    a: 12\n  });\n  match({\n    a: 12\n  }, {\n    a: 12,\n    b: 13\n  });\n  match({\n    a: 12,\n    b: 13\n  }, {\n    a: 12,\n    b: 13\n  });\n  match({\n    a: 12,\n    b: 13\n  }, {\n    a: 12,\n    b: 13,\n    c: 14\n  });\n  nomatch({\n    a: 12,\n    b: 13,\n    c: 14\n  }, {\n    a: 12,\n    b: 13\n  });\n  nomatch({\n    a: 12,\n    b: 13\n  }, {\n    b: 13,\n    c: 14\n  });\n  match({\n    a: 12\n  }, {\n    a: [12]\n  });\n  match({\n    a: 12\n  }, {\n    a: [11, 12, 13]\n  });\n  nomatch({\n    a: 12\n  }, {\n    a: [11, 13]\n  });\n  match({\n    a: 12,\n    b: 13\n  }, {\n    a: [11, 12, 13],\n    b: [13, 14, 15]\n  });\n  nomatch({\n    a: 12,\n    b: 13\n  }, {\n    a: [11, 12, 13],\n    b: [14, 15]\n  }); // dates\n\n  var date1 = new Date();\n  var date2 = new Date(date1.getTime() + 1000);\n  match({\n    a: date1\n  }, {\n    a: date1\n  });\n  nomatch({\n    a: date1\n  }, {\n    a: date2\n  }); // arrays\n\n  match({\n    a: [1, 2]\n  }, {\n    a: [1, 2]\n  });\n  match({\n    a: [1, 2]\n  }, {\n    a: [[1, 2]]\n  });\n  match({\n    a: [1, 2]\n  }, {\n    a: [[3, 4], [1, 2]]\n  });\n  nomatch({\n    a: [1, 2]\n  }, {\n    a: [3, 4]\n  });\n  nomatch({\n    a: [1, 2]\n  }, {\n    a: [[[1, 2]]]\n  }); // literal documents\n\n  match({\n    a: {\n      b: 12\n    }\n  }, {\n    a: {\n      b: 12\n    }\n  });\n  nomatch({\n    a: {\n      b: 12,\n      c: 13\n    }\n  }, {\n    a: {\n      b: 12\n    }\n  });\n  nomatch({\n    a: {\n      b: 12\n    }\n  }, {\n    a: {\n      b: 12,\n      c: 13\n    }\n  });\n  match({\n    a: {\n      b: 12,\n      c: 13\n    }\n  }, {\n    a: {\n      b: 12,\n      c: 13\n    }\n  });\n  nomatch({\n    a: {\n      b: 12,\n      c: 13\n    }\n  }, {\n    a: {\n      c: 13,\n      b: 12\n    }\n  }); // tested on mongodb\n\n  nomatch({\n    a: {}\n  }, {\n    a: {\n      b: 12\n    }\n  });\n  nomatch({\n    a: {\n      b: 12\n    }\n  }, {\n    a: {}\n  });\n  match({\n    a: {\n      b: 12,\n      c: [13, true, false, 2.2, \"a\", null, {\n        d: 14\n      }]\n    }\n  }, {\n    a: {\n      b: 12,\n      c: [13, true, false, 2.2, \"a\", null, {\n        d: 14\n      }]\n    }\n  });\n  match({\n    a: {\n      b: 12\n    }\n  }, {\n    a: {\n      b: 12\n    },\n    k: 99\n  });\n  match({\n    a: {\n      b: 12\n    }\n  }, {\n    a: [{\n      b: 12\n    }]\n  });\n  nomatch({\n    a: {\n      b: 12\n    }\n  }, {\n    a: [[{\n      b: 12\n    }]]\n  });\n  match({\n    a: {\n      b: 12\n    }\n  }, {\n    a: [{\n      b: 11\n    }, {\n      b: 12\n    }, {\n      b: 13\n    }]\n  });\n  nomatch({\n    a: {\n      b: 12\n    }\n  }, {\n    a: [{\n      b: 11\n    }, {\n      b: 12,\n      c: 20\n    }, {\n      b: 13\n    }]\n  });\n  nomatch({\n    a: {\n      b: 12,\n      c: 20\n    }\n  }, {\n    a: [{\n      b: 11\n    }, {\n      b: 12\n    }, {\n      c: 20\n    }]\n  });\n  match({\n    a: {\n      b: 12,\n      c: 20\n    }\n  }, {\n    a: [{\n      b: 11\n    }, {\n      b: 12,\n      c: 20\n    }, {\n      b: 13\n    }]\n  }); // null\n\n  match({\n    a: null\n  }, {\n    a: null\n  });\n  match({\n    a: null\n  }, {\n    b: 12\n  });\n  nomatch({\n    a: null\n  }, {\n    a: 12\n  });\n  match({\n    a: null\n  }, {\n    a: [1, 2, null, 3]\n  }); // tested on mongodb\n\n  nomatch({\n    a: null\n  }, {\n    a: [1, 2, {}, 3]\n  }); // tested on mongodb\n  // order comparisons: $lt, $gt, $lte, $gte\n\n  match({\n    a: {\n      $lt: 10\n    }\n  }, {\n    a: 9\n  });\n  nomatch({\n    a: {\n      $lt: 10\n    }\n  }, {\n    a: 10\n  });\n  nomatch({\n    a: {\n      $lt: 10\n    }\n  }, {\n    a: 11\n  });\n  match({\n    a: {\n      $gt: 10\n    }\n  }, {\n    a: 11\n  });\n  nomatch({\n    a: {\n      $gt: 10\n    }\n  }, {\n    a: 10\n  });\n  nomatch({\n    a: {\n      $gt: 10\n    }\n  }, {\n    a: 9\n  });\n  match({\n    a: {\n      $lte: 10\n    }\n  }, {\n    a: 9\n  });\n  match({\n    a: {\n      $lte: 10\n    }\n  }, {\n    a: 10\n  });\n  nomatch({\n    a: {\n      $lte: 10\n    }\n  }, {\n    a: 11\n  });\n  match({\n    a: {\n      $gte: 10\n    }\n  }, {\n    a: 11\n  });\n  match({\n    a: {\n      $gte: 10\n    }\n  }, {\n    a: 10\n  });\n  nomatch({\n    a: {\n      $gte: 10\n    }\n  }, {\n    a: 9\n  });\n  match({\n    a: {\n      $lt: 10\n    }\n  }, {\n    a: [11, 9, 12]\n  });\n  nomatch({\n    a: {\n      $lt: 10\n    }\n  }, {\n    a: [11, 12]\n  }); // (there's a full suite of ordering test elsewhere)\n\n  nomatch({\n    a: {\n      $lt: \"null\"\n    }\n  }, {\n    a: null\n  });\n  match({\n    a: {\n      $lt: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [1, 3, 4]\n    }\n  });\n  match({\n    a: {\n      $gt: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [3, 3, 4]\n    }\n  });\n  nomatch({\n    a: {\n      $gt: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [1, 3, 4]\n    }\n  });\n  nomatch({\n    a: {\n      $gt: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [2, 3, 4]\n    }\n  });\n  nomatch({\n    a: {\n      $lt: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [2, 3, 4]\n    }\n  });\n  match({\n    a: {\n      $gte: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [2, 3, 4]\n    }\n  });\n  match({\n    a: {\n      $lte: {\n        x: [2, 3, 4]\n      }\n    }\n  }, {\n    a: {\n      x: [2, 3, 4]\n    }\n  });\n  nomatch({\n    a: {\n      $gt: [2, 3]\n    }\n  }, {\n    a: [1, 2]\n  }); // tested against mongodb\n  // composition of two qualifiers\n\n  nomatch({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: 8\n  });\n  nomatch({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: 9\n  });\n  match({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: 10\n  });\n  nomatch({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: 11\n  });\n  nomatch({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: 12\n  });\n  match({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: [8, 9, 10, 11, 12]\n  });\n  match({\n    a: {\n      $lt: 11,\n      $gt: 9\n    }\n  }, {\n    a: [8, 9, 11, 12]\n  }); // tested against mongodb\n  // $all\n\n  match({\n    a: {\n      $all: [1, 2]\n    }\n  }, {\n    a: [1, 2]\n  });\n  nomatch({\n    a: {\n      $all: [1, 2, 3]\n    }\n  }, {\n    a: [1, 2]\n  });\n  match({\n    a: {\n      $all: [1, 2]\n    }\n  }, {\n    a: [3, 2, 1]\n  });\n  match({\n    a: {\n      $all: [1, \"x\"]\n    }\n  }, {\n    a: [3, \"x\", 1]\n  });\n  nomatch({\n    a: {\n      $all: ['2']\n    }\n  }, {\n    a: 2\n  });\n  nomatch({\n    a: {\n      $all: [2]\n    }\n  }, {\n    a: '2'\n  });\n  match({\n    a: {\n      $all: [[1, 2], [1, 3]]\n    }\n  }, {\n    a: [[1, 3], [1, 2], [1, 4]]\n  });\n  nomatch({\n    a: {\n      $all: [[1, 2], [1, 3]]\n    }\n  }, {\n    a: [[1, 4], [1, 2], [1, 4]]\n  });\n  match({\n    a: {\n      $all: [2, 2]\n    }\n  }, {\n    a: [2]\n  }); // tested against mongodb\n\n  nomatch({\n    a: {\n      $all: [2, 3]\n    }\n  }, {\n    a: [2, 2]\n  });\n  nomatch({\n    a: {\n      $all: [1, 2]\n    }\n  }, {\n    a: [[1, 2]]\n  }); // tested against mongodb\n\n  nomatch({\n    a: {\n      $all: [1, 2]\n    }\n  }, {}); // tested against mongodb, field doesn't exist\n\n  nomatch({\n    a: {\n      $all: [1, 2]\n    }\n  }, {\n    a: {\n      foo: 'bar'\n    }\n  }); // tested against mongodb, field is not an object\n\n  nomatch({\n    a: {\n      $all: []\n    }\n  }, {\n    a: []\n  });\n  nomatch({\n    a: {\n      $all: []\n    }\n  }, {\n    a: [5]\n  });\n  match({\n    a: {\n      $all: [/i/, /e/i]\n    }\n  }, {\n    a: [\"foo\", \"bEr\", \"biz\"]\n  });\n  nomatch({\n    a: {\n      $all: [/i/, /e/i]\n    }\n  }, {\n    a: [\"foo\", \"bar\", \"biz\"]\n  });\n  match({\n    a: {\n      $all: [{\n        b: 3\n      }]\n    }\n  }, {\n    a: [{\n      b: 3\n    }]\n  }); // Members of $all other than regexps are *equality matches*, not document\n  // matches.\n\n  nomatch({\n    a: {\n      $all: [{\n        b: 3\n      }]\n    }\n  }, {\n    a: [{\n      b: 3,\n      k: 4\n    }]\n  });\n  test.throws(function () {\n    match({\n      a: {\n        $all: [{\n          $gt: 4\n        }]\n      }\n    }, {});\n  }); // $exists\n\n  match({\n    a: {\n      $exists: true\n    }\n  }, {\n    a: 12\n  });\n  nomatch({\n    a: {\n      $exists: true\n    }\n  }, {\n    b: 12\n  });\n  nomatch({\n    a: {\n      $exists: false\n    }\n  }, {\n    a: 12\n  });\n  match({\n    a: {\n      $exists: false\n    }\n  }, {\n    b: 12\n  });\n  match({\n    a: {\n      $exists: true\n    }\n  }, {\n    a: []\n  });\n  nomatch({\n    a: {\n      $exists: true\n    }\n  }, {\n    b: []\n  });\n  nomatch({\n    a: {\n      $exists: false\n    }\n  }, {\n    a: []\n  });\n  match({\n    a: {\n      $exists: false\n    }\n  }, {\n    b: []\n  });\n  match({\n    a: {\n      $exists: true\n    }\n  }, {\n    a: [1]\n  });\n  nomatch({\n    a: {\n      $exists: true\n    }\n  }, {\n    b: [1]\n  });\n  nomatch({\n    a: {\n      $exists: false\n    }\n  }, {\n    a: [1]\n  });\n  match({\n    a: {\n      $exists: false\n    }\n  }, {\n    b: [1]\n  });\n  match({\n    a: {\n      $exists: 1\n    }\n  }, {\n    a: 5\n  });\n  match({\n    a: {\n      $exists: 0\n    }\n  }, {\n    b: 5\n  });\n  nomatch({\n    'a.x': {\n      $exists: false\n    }\n  }, {\n    a: [{}, {\n      x: 5\n    }]\n  });\n  match({\n    'a.x': {\n      $exists: true\n    }\n  }, {\n    a: [{}, {\n      x: 5\n    }]\n  });\n  match({\n    'a.x': {\n      $exists: true\n    }\n  }, {\n    a: [{}, {\n      x: 5\n    }]\n  });\n  match({\n    'a.x': {\n      $exists: true\n    }\n  }, {\n    a: {\n      x: []\n    }\n  });\n  match({\n    'a.x': {\n      $exists: true\n    }\n  }, {\n    a: {\n      x: null\n    }\n  }); // $mod\n\n  match({\n    a: {\n      $mod: [10, 1]\n    }\n  }, {\n    a: 11\n  });\n  nomatch({\n    a: {\n      $mod: [10, 1]\n    }\n  }, {\n    a: 12\n  });\n  match({\n    a: {\n      $mod: [10, 1]\n    }\n  }, {\n    a: [10, 11, 12]\n  });\n  nomatch({\n    a: {\n      $mod: [10, 1]\n    }\n  }, {\n    a: [10, 12]\n  });\n\n  _.each([5, [10], [10, 1, 2], \"foo\", {\n    bar: 1\n  }, []], function (badMod) {\n    test.throws(function () {\n      match({\n        a: {\n          $mod: badMod\n        }\n      }, {\n        a: 11\n      });\n    });\n  }); // $eq\n\n\n  nomatch({\n    a: {\n      $eq: 1\n    }\n  }, {\n    a: 2\n  });\n  match({\n    a: {\n      $eq: 2\n    }\n  }, {\n    a: 2\n  });\n  nomatch({\n    a: {\n      $eq: [1]\n    }\n  }, {\n    a: [2]\n  });\n  match({\n    a: {\n      $eq: [1, 2]\n    }\n  }, {\n    a: [1, 2]\n  });\n  match({\n    a: {\n      $eq: 1\n    }\n  }, {\n    a: [1, 2]\n  });\n  match({\n    a: {\n      $eq: 2\n    }\n  }, {\n    a: [1, 2]\n  });\n  nomatch({\n    a: {\n      $eq: 3\n    }\n  }, {\n    a: [1, 2]\n  });\n  match({\n    'a.b': {\n      $eq: 1\n    }\n  }, {\n    a: [{\n      b: 1\n    }, {\n      b: 2\n    }]\n  });\n  match({\n    'a.b': {\n      $eq: 2\n    }\n  }, {\n    a: [{\n      b: 1\n    }, {\n      b: 2\n    }]\n  });\n  nomatch({\n    'a.b': {\n      $eq: 3\n    }\n  }, {\n    a: [{\n      b: 1\n    }, {\n      b: 2\n    }]\n  });\n  match({\n    a: {\n      $eq: {\n        x: 1\n      }\n    }\n  }, {\n    a: {\n      x: 1\n    }\n  });\n  nomatch({\n    a: {\n      $eq: {\n        x: 1\n      }\n    }\n  }, {\n    a: {\n      x: 2\n    }\n  });\n  nomatch({\n    a: {\n      $eq: {\n        x: 1\n      }\n    }\n  }, {\n    a: {\n      x: 1,\n      y: 2\n    }\n  }); // $ne\n\n  match({\n    a: {\n      $ne: 1\n    }\n  }, {\n    a: 2\n  });\n  nomatch({\n    a: {\n      $ne: 2\n    }\n  }, {\n    a: 2\n  });\n  match({\n    a: {\n      $ne: [1]\n    }\n  }, {\n    a: [2]\n  });\n  nomatch({\n    a: {\n      $ne: [1, 2]\n    }\n  }, {\n    a: [1, 2]\n  }); // all tested against mongodb\n\n  nomatch({\n    a: {\n      $ne: 1\n    }\n  }, {\n    a: [1, 2]\n  });\n  nomatch({\n    a: {\n      $ne: 2\n    }\n  }, {\n    a: [1, 2]\n  });\n  match({\n    a: {\n      $ne: 3\n    }\n  }, {\n    a: [1, 2]\n  });\n  nomatch({\n    'a.b': {\n      $ne: 1\n    }\n  }, {\n    a: [{\n      b: 1\n    }, {\n      b: 2\n    }]\n  });\n  nomatch({\n    'a.b': {\n      $ne: 2\n    }\n  }, {\n    a: [{\n      b: 1\n    }, {\n      b: 2\n    }]\n  });\n  match({\n    'a.b': {\n      $ne: 3\n    }\n  }, {\n    a: [{\n      b: 1\n    }, {\n      b: 2\n    }]\n  });\n  nomatch({\n    a: {\n      $ne: {\n        x: 1\n      }\n    }\n  }, {\n    a: {\n      x: 1\n    }\n  });\n  match({\n    a: {\n      $ne: {\n        x: 1\n      }\n    }\n  }, {\n    a: {\n      x: 2\n    }\n  });\n  match({\n    a: {\n      $ne: {\n        x: 1\n      }\n    }\n  }, {\n    a: {\n      x: 1,\n      y: 2\n    }\n  }); // This query means: All 'a.b' must be non-5, and some 'a.b' must be >6.\n\n  match({\n    'a.b': {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [{\n      b: 2\n    }, {\n      b: 10\n    }]\n  });\n  nomatch({\n    'a.b': {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [{\n      b: 2\n    }, {\n      b: 4\n    }]\n  });\n  nomatch({\n    'a.b': {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [{\n      b: 2\n    }, {\n      b: 5\n    }]\n  });\n  nomatch({\n    'a.b': {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [{\n      b: 10\n    }, {\n      b: 5\n    }]\n  }); // Should work the same if the branch is at the bottom.\n\n  match({\n    a: {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [2, 10]\n  });\n  nomatch({\n    a: {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [2, 4]\n  });\n  nomatch({\n    a: {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [2, 5]\n  });\n  nomatch({\n    a: {\n      $ne: 5,\n      $gt: 6\n    }\n  }, {\n    a: [10, 5]\n  }); // $in\n\n  match({\n    a: {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: 2\n  });\n  nomatch({\n    a: {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: 4\n  });\n  match({\n    a: {\n      $in: [[1], [2], [3]]\n    }\n  }, {\n    a: [2]\n  });\n  nomatch({\n    a: {\n      $in: [[1], [2], [3]]\n    }\n  }, {\n    a: [4]\n  });\n  match({\n    a: {\n      $in: [{\n        b: 1\n      }, {\n        b: 2\n      }, {\n        b: 3\n      }]\n    }\n  }, {\n    a: {\n      b: 2\n    }\n  });\n  nomatch({\n    a: {\n      $in: [{\n        b: 1\n      }, {\n        b: 2\n      }, {\n        b: 3\n      }]\n    }\n  }, {\n    a: {\n      b: 4\n    }\n  });\n  match({\n    a: {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: [2]\n  }); // tested against mongodb\n\n  match({\n    a: {\n      $in: [{\n        x: 1\n      }, {\n        x: 2\n      }, {\n        x: 3\n      }]\n    }\n  }, {\n    a: [{\n      x: 2\n    }]\n  });\n  match({\n    a: {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: [4, 2]\n  });\n  nomatch({\n    a: {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: [4]\n  });\n  match({\n    a: {\n      $in: ['x', /foo/i]\n    }\n  }, {\n    a: 'x'\n  });\n  match({\n    a: {\n      $in: ['x', /foo/i]\n    }\n  }, {\n    a: 'fOo'\n  });\n  match({\n    a: {\n      $in: ['x', /foo/i]\n    }\n  }, {\n    a: ['f', 'fOo']\n  });\n  nomatch({\n    a: {\n      $in: ['x', /foo/i]\n    }\n  }, {\n    a: ['f', 'fOx']\n  });\n  match({\n    a: {\n      $in: [1, null]\n    }\n  }, {});\n  match({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {});\n  match({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: {}\n  });\n  match({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: {\n      b: null\n    }\n  });\n  nomatch({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: {\n      b: 5\n    }\n  });\n  nomatch({\n    'a.b': {\n      $in: [1]\n    }\n  }, {\n    a: {\n      b: null\n    }\n  });\n  nomatch({\n    'a.b': {\n      $in: [1]\n    }\n  }, {\n    a: {}\n  });\n  nomatch({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }]\n  });\n  match({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }, {}]\n  });\n  nomatch({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }, []]\n  });\n  nomatch({\n    'a.b': {\n      $in: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }, 5]\n  }); // $nin\n\n  nomatch({\n    a: {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: 2\n  });\n  match({\n    a: {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: 4\n  });\n  nomatch({\n    a: {\n      $nin: [[1], [2], [3]]\n    }\n  }, {\n    a: [2]\n  });\n  match({\n    a: {\n      $nin: [[1], [2], [3]]\n    }\n  }, {\n    a: [4]\n  });\n  nomatch({\n    a: {\n      $nin: [{\n        b: 1\n      }, {\n        b: 2\n      }, {\n        b: 3\n      }]\n    }\n  }, {\n    a: {\n      b: 2\n    }\n  });\n  match({\n    a: {\n      $nin: [{\n        b: 1\n      }, {\n        b: 2\n      }, {\n        b: 3\n      }]\n    }\n  }, {\n    a: {\n      b: 4\n    }\n  });\n  nomatch({\n    a: {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: [2]\n  }); // tested against mongodb\n\n  nomatch({\n    a: {\n      $nin: [{\n        x: 1\n      }, {\n        x: 2\n      }, {\n        x: 3\n      }]\n    }\n  }, {\n    a: [{\n      x: 2\n    }]\n  });\n  nomatch({\n    a: {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: [4, 2]\n  });\n  nomatch({\n    'a.b': {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: [{\n      b: 4\n    }, {\n      b: 2\n    }]\n  });\n  match({\n    a: {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: [4]\n  });\n  match({\n    'a.b': {\n      $nin: [1, 2, 3]\n    }\n  }, {\n    a: [{\n      b: 4\n    }]\n  });\n  nomatch({\n    a: {\n      $nin: ['x', /foo/i]\n    }\n  }, {\n    a: 'x'\n  });\n  nomatch({\n    a: {\n      $nin: ['x', /foo/i]\n    }\n  }, {\n    a: 'fOo'\n  });\n  nomatch({\n    a: {\n      $nin: ['x', /foo/i]\n    }\n  }, {\n    a: ['f', 'fOo']\n  });\n  match({\n    a: {\n      $nin: ['x', /foo/i]\n    }\n  }, {\n    a: ['f', 'fOx']\n  });\n  nomatch({\n    a: {\n      $nin: [1, null]\n    }\n  }, {});\n  nomatch({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {});\n  nomatch({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: {}\n  });\n  nomatch({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: {\n      b: null\n    }\n  });\n  match({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: {\n      b: 5\n    }\n  });\n  match({\n    'a.b': {\n      $nin: [1]\n    }\n  }, {\n    a: {\n      b: null\n    }\n  });\n  match({\n    'a.b': {\n      $nin: [1]\n    }\n  }, {\n    a: {}\n  });\n  match({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }]\n  });\n  nomatch({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }, {}]\n  });\n  match({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }, []]\n  });\n  match({\n    'a.b': {\n      $nin: [1, null]\n    }\n  }, {\n    a: [{\n      b: 5\n    }, 5]\n  }); // $size\n\n  match({\n    a: {\n      $size: 0\n    }\n  }, {\n    a: []\n  });\n  match({\n    a: {\n      $size: 1\n    }\n  }, {\n    a: [2]\n  });\n  match({\n    a: {\n      $size: 2\n    }\n  }, {\n    a: [2, 2]\n  });\n  nomatch({\n    a: {\n      $size: 0\n    }\n  }, {\n    a: [2]\n  });\n  nomatch({\n    a: {\n      $size: 1\n    }\n  }, {\n    a: []\n  });\n  nomatch({\n    a: {\n      $size: 1\n    }\n  }, {\n    a: [2, 2]\n  });\n  nomatch({\n    a: {\n      $size: 0\n    }\n  }, {\n    a: \"2\"\n  });\n  nomatch({\n    a: {\n      $size: 1\n    }\n  }, {\n    a: \"2\"\n  });\n  nomatch({\n    a: {\n      $size: 2\n    }\n  }, {\n    a: \"2\"\n  });\n  nomatch({\n    a: {\n      $size: 2\n    }\n  }, {\n    a: [[2, 2]]\n  }); // tested against mongodb\n  // $bitsAllClear - number\n\n  match({\n    a: {\n      $bitsAllClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 0\n  });\n  match({\n    a: {\n      $bitsAllClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 16\n  });\n  nomatch({\n    a: {\n      $bitsAllClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 1\n  });\n  nomatch({\n    a: {\n      $bitsAllClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 2\n  });\n  nomatch({\n    a: {\n      $bitsAllClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 4\n  });\n  nomatch({\n    a: {\n      $bitsAllClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 8\n  }); // $bitsAllClear - buffer\n\n  match({\n    a: {\n      $bitsAllClear: new Uint8Array([3])\n    }\n  }, {\n    a: new Uint8Array([4])\n  });\n  match({\n    a: {\n      $bitsAllClear: new Uint8Array([0, 1])\n    }\n  }, {\n    a: new Uint8Array([255])\n  }); // 256 should not be set for 255.\n\n  match({\n    a: {\n      $bitsAllClear: new Uint8Array([3])\n    }\n  }, {\n    a: 4\n  });\n  match({\n    a: {\n      $bitsAllClear: new Uint8Array([3])\n    }\n  }, {\n    a: 0\n  }); // $bitsAllSet - number\n\n  match({\n    a: {\n      $bitsAllSet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 15\n  });\n  nomatch({\n    a: {\n      $bitsAllSet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 7\n  });\n  nomatch({\n    a: {\n      $bitsAllSet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 256\n  });\n  nomatch({\n    a: {\n      $bitsAllSet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 50000\n  });\n  match({\n    a: {\n      $bitsAllSet: [0, 1, 2]\n    }\n  }, {\n    a: 15\n  });\n  match({\n    a: {\n      $bitsAllSet: [0, 12]\n    }\n  }, {\n    a: 4097\n  });\n  nomatch({\n    a: {\n      $bitsAllSet: [0, 12]\n    }\n  }, {\n    a: 4096\n  });\n  nomatch({\n    a: {\n      $bitsAllSet: [0, 12]\n    }\n  }, {\n    a: 1\n  }); // $bitsAllSet - buffer\n\n  match({\n    a: {\n      $bitsAllSet: new Uint8Array([3])\n    }\n  }, {\n    a: new Uint8Array([3])\n  });\n  match({\n    a: {\n      $bitsAllSet: new Uint8Array([7])\n    }\n  }, {\n    a: new Uint8Array([15])\n  });\n  match({\n    a: {\n      $bitsAllSet: new Uint8Array([3])\n    }\n  }, {\n    a: 3\n  }); // $bitsAnySet - number\n\n  match({\n    a: {\n      $bitsAnySet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 1\n  });\n  match({\n    a: {\n      $bitsAnySet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 2\n  });\n  match({\n    a: {\n      $bitsAnySet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 4\n  });\n  match({\n    a: {\n      $bitsAnySet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 8\n  });\n  match({\n    a: {\n      $bitsAnySet: [4]\n    }\n  }, {\n    a: 16\n  });\n  nomatch({\n    a: {\n      $bitsAnySet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 16\n  });\n  nomatch({\n    a: {\n      $bitsAnySet: [0, 1, 2, 3]\n    }\n  }, {\n    a: 0\n  }); // $bitsAnySet - buffer\n\n  match({\n    a: {\n      $bitsAnySet: new Uint8Array([3])\n    }\n  }, {\n    a: new Uint8Array([7])\n  });\n  match({\n    a: {\n      $bitsAnySet: new Uint8Array([15])\n    }\n  }, {\n    a: new Uint8Array([7])\n  });\n  match({\n    a: {\n      $bitsAnySet: new Uint8Array([3])\n    }\n  }, {\n    a: 1\n  }); // $bitsAnyClear - number\n\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 0\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 1\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 2\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 4\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 8\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 16\n  });\n  nomatch({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 15\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 7\n  });\n  nomatch({\n    a: {\n      $bitsAnyClear: [0, 1, 2]\n    }\n  }, {\n    a: 7\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 3\n  });\n  nomatch({\n    a: {\n      $bitsAnyClear: [0, 1]\n    }\n  }, {\n    a: 3\n  });\n  match({\n    a: {\n      $bitsAnyClear: [0, 1, 2, 3]\n    }\n  }, {\n    a: 1\n  });\n  nomatch({\n    a: {\n      $bitsAnyClear: [0]\n    }\n  }, {\n    a: 1\n  });\n  nomatch({\n    a: {\n      $bitsAnyClear: [4]\n    }\n  }, {\n    a: 16\n  }); // $bitsAnyClear - buffer\n\n  match({\n    a: {\n      $bitsAnyClear: new Uint8Array([8])\n    }\n  }, {\n    a: new Uint8Array([7])\n  });\n  match({\n    a: {\n      $bitsAnyClear: new Uint8Array([1])\n    }\n  }, {\n    a: new Uint8Array([0])\n  });\n  match({\n    a: {\n      $bitsAnyClear: new Uint8Array([1])\n    }\n  }, {\n    a: 4\n  }); // $type\n\n  match({\n    a: {\n      $type: 1\n    }\n  }, {\n    a: 1.1\n  });\n  match({\n    a: {\n      $type: 1\n    }\n  }, {\n    a: 1\n  });\n  nomatch({\n    a: {\n      $type: 1\n    }\n  }, {\n    a: \"1\"\n  });\n  match({\n    a: {\n      $type: 2\n    }\n  }, {\n    a: \"1\"\n  });\n  nomatch({\n    a: {\n      $type: 2\n    }\n  }, {\n    a: 1\n  });\n  match({\n    a: {\n      $type: 3\n    }\n  }, {\n    a: {}\n  });\n  match({\n    a: {\n      $type: 3\n    }\n  }, {\n    a: {\n      b: 2\n    }\n  });\n  nomatch({\n    a: {\n      $type: 3\n    }\n  }, {\n    a: []\n  });\n  nomatch({\n    a: {\n      $type: 3\n    }\n  }, {\n    a: [1]\n  });\n  nomatch({\n    a: {\n      $type: 3\n    }\n  }, {\n    a: null\n  });\n  match({\n    a: {\n      $type: 5\n    }\n  }, {\n    a: EJSON.newBinary(0)\n  });\n  match({\n    a: {\n      $type: 5\n    }\n  }, {\n    a: EJSON.newBinary(4)\n  });\n  nomatch({\n    a: {\n      $type: 5\n    }\n  }, {\n    a: []\n  });\n  nomatch({\n    a: {\n      $type: 5\n    }\n  }, {\n    a: [42]\n  });\n  match({\n    a: {\n      $type: 7\n    }\n  }, {\n    a: new MongoID.ObjectID()\n  });\n  nomatch({\n    a: {\n      $type: 7\n    }\n  }, {\n    a: \"1234567890abcd1234567890\"\n  });\n  match({\n    a: {\n      $type: 8\n    }\n  }, {\n    a: true\n  });\n  match({\n    a: {\n      $type: 8\n    }\n  }, {\n    a: false\n  });\n  nomatch({\n    a: {\n      $type: 8\n    }\n  }, {\n    a: \"true\"\n  });\n  nomatch({\n    a: {\n      $type: 8\n    }\n  }, {\n    a: 0\n  });\n  nomatch({\n    a: {\n      $type: 8\n    }\n  }, {\n    a: null\n  });\n  nomatch({\n    a: {\n      $type: 8\n    }\n  }, {\n    a: ''\n  });\n  nomatch({\n    a: {\n      $type: 8\n    }\n  }, {});\n  match({\n    a: {\n      $type: 9\n    }\n  }, {\n    a: new Date()\n  });\n  nomatch({\n    a: {\n      $type: 9\n    }\n  }, {\n    a: +new Date()\n  });\n  match({\n    a: {\n      $type: 10\n    }\n  }, {\n    a: null\n  });\n  nomatch({\n    a: {\n      $type: 10\n    }\n  }, {\n    a: false\n  });\n  nomatch({\n    a: {\n      $type: 10\n    }\n  }, {\n    a: ''\n  });\n  nomatch({\n    a: {\n      $type: 10\n    }\n  }, {\n    a: 0\n  });\n  nomatch({\n    a: {\n      $type: 10\n    }\n  }, {});\n  match({\n    a: {\n      $type: 11\n    }\n  }, {\n    a: /x/\n  });\n  nomatch({\n    a: {\n      $type: 11\n    }\n  }, {\n    a: 'x'\n  });\n  nomatch({\n    a: {\n      $type: 11\n    }\n  }, {}); // The normal rule for {$type:4} (4 means array) is that it NOT good enough to\n  // just have an array that's the leaf that matches the path.  (An array inside\n  // that array is good, though.)\n\n  nomatch({\n    a: {\n      $type: 4\n    }\n  }, {\n    a: []\n  });\n  nomatch({\n    a: {\n      $type: 4\n    }\n  }, {\n    a: [1]\n  }); // tested against mongodb\n\n  match({\n    a: {\n      $type: 1\n    }\n  }, {\n    a: [1]\n  });\n  nomatch({\n    a: {\n      $type: 2\n    }\n  }, {\n    a: [1]\n  });\n  match({\n    a: {\n      $type: 1\n    }\n  }, {\n    a: [\"1\", 1]\n  });\n  match({\n    a: {\n      $type: 2\n    }\n  }, {\n    a: [\"1\", 1]\n  });\n  nomatch({\n    a: {\n      $type: 3\n    }\n  }, {\n    a: [\"1\", 1]\n  });\n  nomatch({\n    a: {\n      $type: 4\n    }\n  }, {\n    a: [\"1\", 1]\n  });\n  nomatch({\n    a: {\n      $type: 1\n    }\n  }, {\n    a: [\"1\", []]\n  });\n  match({\n    a: {\n      $type: 2\n    }\n  }, {\n    a: [\"1\", []]\n  });\n  match({\n    a: {\n      $type: 4\n    }\n  }, {\n    a: [\"1\", []]\n  }); // tested against mongodb\n  // An exception to the normal rule is that an array found via numeric index is\n  // examined itself, and its elements are not.\n\n  match({\n    'a.0': {\n      $type: 4\n    }\n  }, {\n    a: [[0]]\n  });\n  nomatch({\n    'a.0': {\n      $type: 1\n    }\n  }, {\n    a: [[0]]\n  }); // regular expressions\n\n  match({\n    a: /a/\n  }, {\n    a: 'cat'\n  });\n  nomatch({\n    a: /a/\n  }, {\n    a: 'cut'\n  });\n  nomatch({\n    a: /a/\n  }, {\n    a: 'CAT'\n  });\n  match({\n    a: /a/i\n  }, {\n    a: 'CAT'\n  });\n  match({\n    a: /a/\n  }, {\n    a: ['foo', 'bar']\n  }); // search within array...\n\n  nomatch({\n    a: /,/\n  }, {\n    a: ['foo', 'bar']\n  }); // but not by stringifying\n\n  match({\n    a: {\n      $regex: 'a'\n    }\n  }, {\n    a: ['foo', 'bar']\n  });\n  nomatch({\n    a: {\n      $regex: ','\n    }\n  }, {\n    a: ['foo', 'bar']\n  });\n  match({\n    a: {\n      $regex: /a/\n    }\n  }, {\n    a: 'cat'\n  });\n  nomatch({\n    a: {\n      $regex: /a/\n    }\n  }, {\n    a: 'cut'\n  });\n  nomatch({\n    a: {\n      $regex: /a/\n    }\n  }, {\n    a: 'CAT'\n  });\n  match({\n    a: {\n      $regex: /a/i\n    }\n  }, {\n    a: 'CAT'\n  });\n  match({\n    a: {\n      $regex: /a/,\n      $options: 'i'\n    }\n  }, {\n    a: 'CAT'\n  }); // tested\n\n  match({\n    a: {\n      $regex: /a/i,\n      $options: 'i'\n    }\n  }, {\n    a: 'CAT'\n  }); // tested\n\n  nomatch({\n    a: {\n      $regex: /a/i,\n      $options: ''\n    }\n  }, {\n    a: 'CAT'\n  }); // tested\n\n  match({\n    a: {\n      $regex: 'a'\n    }\n  }, {\n    a: 'cat'\n  });\n  nomatch({\n    a: {\n      $regex: 'a'\n    }\n  }, {\n    a: 'cut'\n  });\n  nomatch({\n    a: {\n      $regex: 'a'\n    }\n  }, {\n    a: 'CAT'\n  });\n  match({\n    a: {\n      $regex: 'a',\n      $options: 'i'\n    }\n  }, {\n    a: 'CAT'\n  });\n  match({\n    a: {\n      $regex: '',\n      $options: 'i'\n    }\n  }, {\n    a: 'foo'\n  });\n  nomatch({\n    a: {\n      $regex: '',\n      $options: 'i'\n    }\n  }, {});\n  nomatch({\n    a: {\n      $regex: '',\n      $options: 'i'\n    }\n  }, {\n    a: 5\n  });\n  nomatch({\n    a: /undefined/\n  }, {});\n  nomatch({\n    a: {\n      $regex: 'undefined'\n    }\n  }, {});\n  nomatch({\n    a: /xxx/\n  }, {});\n  nomatch({\n    a: {\n      $regex: 'xxx'\n    }\n  }, {}); // GitHub issue #2817:\n  // Regexps with a global flag ('g') keep a state when tested against the same\n  // string. Selector shouldn't return different result for similar documents\n  // because of this state.\n\n  var reusedRegexp = /sh/ig;\n  match({\n    a: reusedRegexp\n  }, {\n    a: 'Shorts'\n  });\n  match({\n    a: reusedRegexp\n  }, {\n    a: 'Shorts'\n  });\n  match({\n    a: reusedRegexp\n  }, {\n    a: 'Shorts'\n  });\n  match({\n    a: {\n      $regex: reusedRegexp\n    }\n  }, {\n    a: 'Shorts'\n  });\n  match({\n    a: {\n      $regex: reusedRegexp\n    }\n  }, {\n    a: 'Shorts'\n  });\n  match({\n    a: {\n      $regex: reusedRegexp\n    }\n  }, {\n    a: 'Shorts'\n  });\n  test.throws(function () {\n    match({\n      a: {\n        $options: 'i'\n      }\n    }, {\n      a: 12\n    });\n  });\n  match({\n    a: /a/\n  }, {\n    a: ['dog', 'cat']\n  });\n  nomatch({\n    a: /a/\n  }, {\n    a: ['dog', 'puppy']\n  }); // we don't support regexps in minimongo very well (eg, there's no EJSON\n  // encoding so it won't go over the wire), but run these tests anyway\n\n  match({\n    a: /a/\n  }, {\n    a: /a/\n  });\n  match({\n    a: /a/\n  }, {\n    a: ['x', /a/]\n  });\n  nomatch({\n    a: /a/\n  }, {\n    a: /a/i\n  });\n  nomatch({\n    a: /a/m\n  }, {\n    a: /a/\n  });\n  nomatch({\n    a: /a/\n  }, {\n    a: /b/\n  });\n  nomatch({\n    a: /5/\n  }, {\n    a: 5\n  });\n  nomatch({\n    a: /t/\n  }, {\n    a: true\n  });\n  match({\n    a: /m/i\n  }, {\n    a: ['x', 'xM']\n  });\n  test.throws(function () {\n    match({\n      a: {\n        $regex: /a/,\n        $options: 'x'\n      }\n    }, {\n      a: 'cat'\n    });\n  });\n  test.throws(function () {\n    match({\n      a: {\n        $regex: /a/,\n        $options: 's'\n      }\n    }, {\n      a: 'cat'\n    });\n  }); // $not\n\n  match({\n    x: {\n      $not: {\n        $gt: 7\n      }\n    }\n  }, {\n    x: 6\n  });\n  nomatch({\n    x: {\n      $not: {\n        $gt: 7\n      }\n    }\n  }, {\n    x: 8\n  });\n  match({\n    x: {\n      $not: {\n        $lt: 10,\n        $gt: 7\n      }\n    }\n  }, {\n    x: 11\n  });\n  nomatch({\n    x: {\n      $not: {\n        $lt: 10,\n        $gt: 7\n      }\n    }\n  }, {\n    x: 9\n  });\n  match({\n    x: {\n      $not: {\n        $lt: 10,\n        $gt: 7\n      }\n    }\n  }, {\n    x: 6\n  });\n  match({\n    x: {\n      $not: {\n        $gt: 7\n      }\n    }\n  }, {\n    x: [2, 3, 4]\n  });\n  match({\n    'x.y': {\n      $not: {\n        $gt: 7\n      }\n    }\n  }, {\n    x: [{\n      y: 2\n    }, {\n      y: 3\n    }, {\n      y: 4\n    }]\n  });\n  nomatch({\n    x: {\n      $not: {\n        $gt: 7\n      }\n    }\n  }, {\n    x: [2, 3, 4, 10]\n  });\n  nomatch({\n    'x.y': {\n      $not: {\n        $gt: 7\n      }\n    }\n  }, {\n    x: [{\n      y: 2\n    }, {\n      y: 3\n    }, {\n      y: 4\n    }, {\n      y: 10\n    }]\n  });\n  match({\n    x: {\n      $not: /a/\n    }\n  }, {\n    x: \"dog\"\n  });\n  nomatch({\n    x: {\n      $not: /a/\n    }\n  }, {\n    x: \"cat\"\n  });\n  match({\n    x: {\n      $not: /a/\n    }\n  }, {\n    x: [\"dog\", \"puppy\"]\n  });\n  nomatch({\n    x: {\n      $not: /a/\n    }\n  }, {\n    x: [\"kitten\", \"cat\"]\n  }); // dotted keypaths: bare values\n\n  match({\n    \"a.b\": 1\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    \"a.b\": 1\n  }, {\n    a: {\n      b: 2\n    }\n  });\n  match({\n    \"a.b\": [1, 2, 3]\n  }, {\n    a: {\n      b: [1, 2, 3]\n    }\n  });\n  nomatch({\n    \"a.b\": [1, 2, 3]\n  }, {\n    a: {\n      b: [4]\n    }\n  });\n  match({\n    \"a.b\": /a/\n  }, {\n    a: {\n      b: \"cat\"\n    }\n  });\n  nomatch({\n    \"a.b\": /a/\n  }, {\n    a: {\n      b: \"dog\"\n    }\n  });\n  match({\n    \"a.b.c\": null\n  }, {});\n  match({\n    \"a.b.c\": null\n  }, {\n    a: 1\n  });\n  match({\n    \"a.b\": null\n  }, {\n    a: 1\n  });\n  match({\n    \"a.b.c\": null\n  }, {\n    a: {\n      b: 4\n    }\n  }); // dotted keypaths, nulls, numeric indices, arrays\n\n  nomatch({\n    \"a.b\": null\n  }, {\n    a: [1]\n  });\n  match({\n    \"a.b\": []\n  }, {\n    a: {\n      b: []\n    }\n  });\n  var big = {\n    a: [{\n      b: 1\n    }, 2, {}, {\n      b: [3, 4]\n    }]\n  };\n  match({\n    \"a.b\": 1\n  }, big);\n  match({\n    \"a.b\": [3, 4]\n  }, big);\n  match({\n    \"a.b\": 3\n  }, big);\n  match({\n    \"a.b\": 4\n  }, big);\n  match({\n    \"a.b\": null\n  }, big); // matches on slot 2\n\n  match({\n    'a.1': 8\n  }, {\n    a: [7, 8, 9]\n  });\n  nomatch({\n    'a.1': 7\n  }, {\n    a: [7, 8, 9]\n  });\n  nomatch({\n    'a.1': null\n  }, {\n    a: [7, 8, 9]\n  });\n  match({\n    'a.1': [8, 9]\n  }, {\n    a: [7, [8, 9]]\n  });\n  nomatch({\n    'a.1': 6\n  }, {\n    a: [[6, 7], [8, 9]]\n  });\n  nomatch({\n    'a.1': 7\n  }, {\n    a: [[6, 7], [8, 9]]\n  });\n  nomatch({\n    'a.1': 8\n  }, {\n    a: [[6, 7], [8, 9]]\n  });\n  nomatch({\n    'a.1': 9\n  }, {\n    a: [[6, 7], [8, 9]]\n  });\n  match({\n    \"a.1\": 2\n  }, {\n    a: [0, {\n      1: 2\n    }, 3]\n  });\n  match({\n    \"a.1\": {\n      1: 2\n    }\n  }, {\n    a: [0, {\n      1: 2\n    }, 3]\n  });\n  match({\n    \"x.1.y\": 8\n  }, {\n    x: [7, {\n      y: 8\n    }, 9]\n  }); // comes from trying '1' as key in the plain object\n\n  match({\n    \"x.1.y\": null\n  }, {\n    x: [7, {\n      y: 8\n    }, 9]\n  });\n  match({\n    \"a.1.b\": 9\n  }, {\n    a: [7, {\n      b: 9\n    }, {\n      1: {\n        b: 'foo'\n      }\n    }]\n  });\n  match({\n    \"a.1.b\": 'foo'\n  }, {\n    a: [7, {\n      b: 9\n    }, {\n      1: {\n        b: 'foo'\n      }\n    }]\n  });\n  match({\n    \"a.1.b\": null\n  }, {\n    a: [7, {\n      b: 9\n    }, {\n      1: {\n        b: 'foo'\n      }\n    }]\n  });\n  match({\n    \"a.1.b\": 2\n  }, {\n    a: [1, [{\n      b: 2\n    }], 3]\n  });\n  nomatch({\n    \"a.1.b\": null\n  }, {\n    a: [1, [{\n      b: 2\n    }], 3]\n  }); // this is new behavior in mongo 2.5\n\n  nomatch({\n    \"a.0.b\": null\n  }, {\n    a: [5]\n  });\n  match({\n    \"a.1\": 4\n  }, {\n    a: [{\n      1: 4\n    }, 5]\n  });\n  match({\n    \"a.1\": 5\n  }, {\n    a: [{\n      1: 4\n    }, 5]\n  });\n  nomatch({\n    \"a.1\": null\n  }, {\n    a: [{\n      1: 4\n    }, 5]\n  });\n  match({\n    \"a.1.foo\": 4\n  }, {\n    a: [{\n      1: {\n        foo: 4\n      }\n    }, {\n      foo: 5\n    }]\n  });\n  match({\n    \"a.1.foo\": 5\n  }, {\n    a: [{\n      1: {\n        foo: 4\n      }\n    }, {\n      foo: 5\n    }]\n  });\n  match({\n    \"a.1.foo\": null\n  }, {\n    a: [{\n      1: {\n        foo: 4\n      }\n    }, {\n      foo: 5\n    }]\n  }); // trying to access a dotted field that is undefined at some point\n  // down the chain\n\n  nomatch({\n    \"a.b\": 1\n  }, {\n    x: 2\n  });\n  nomatch({\n    \"a.b.c\": 1\n  }, {\n    a: {\n      x: 2\n    }\n  });\n  nomatch({\n    \"a.b.c\": 1\n  }, {\n    a: {\n      b: {\n        x: 2\n      }\n    }\n  });\n  nomatch({\n    \"a.b.c\": 1\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    \"a.b.c\": 1\n  }, {\n    a: {\n      b: 0\n    }\n  }); // dotted keypaths: literal objects\n\n  match({\n    \"a.b\": {\n      c: 1\n    }\n  }, {\n    a: {\n      b: {\n        c: 1\n      }\n    }\n  });\n  nomatch({\n    \"a.b\": {\n      c: 1\n    }\n  }, {\n    a: {\n      b: {\n        c: 2\n      }\n    }\n  });\n  nomatch({\n    \"a.b\": {\n      c: 1\n    }\n  }, {\n    a: {\n      b: 2\n    }\n  });\n  match({\n    \"a.b\": {\n      c: 1,\n      d: 2\n    }\n  }, {\n    a: {\n      b: {\n        c: 1,\n        d: 2\n      }\n    }\n  });\n  nomatch({\n    \"a.b\": {\n      c: 1,\n      d: 2\n    }\n  }, {\n    a: {\n      b: {\n        c: 1,\n        d: 1\n      }\n    }\n  });\n  nomatch({\n    \"a.b\": {\n      c: 1,\n      d: 2\n    }\n  }, {\n    a: {\n      b: {\n        d: 2\n      }\n    }\n  }); // dotted keypaths: $ operators\n\n  match({\n    \"a.b\": {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: {\n      b: [2]\n    }\n  }); // tested against mongodb\n\n  match({\n    \"a.b\": {\n      $in: [{\n        x: 1\n      }, {\n        x: 2\n      }, {\n        x: 3\n      }]\n    }\n  }, {\n    a: {\n      b: [{\n        x: 2\n      }]\n    }\n  });\n  match({\n    \"a.b\": {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: {\n      b: [4, 2]\n    }\n  });\n  nomatch({\n    \"a.b\": {\n      $in: [1, 2, 3]\n    }\n  }, {\n    a: {\n      b: [4]\n    }\n  }); // $or\n\n  test.throws(function () {\n    match({\n      $or: []\n    }, {});\n  });\n  test.throws(function () {\n    match({\n      $or: [5]\n    }, {});\n  });\n  test.throws(function () {\n    match({\n      $or: []\n    }, {\n      a: 1\n    });\n  });\n  match({\n    $or: [{\n      a: 1\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      c: 3\n    }, {\n      d: 4\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: [1, 2, 3]\n  });\n  nomatch({\n    $or: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    c: [1, 2, 3]\n  });\n  nomatch({\n    $or: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: [2, 3, 4]\n  });\n  match({\n    $or: [{\n      a: 1\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: 1\n    }, {\n      a: 2\n    }],\n    b: 2\n  }, {\n    a: 1,\n    b: 2\n  });\n  nomatch({\n    $or: [{\n      a: 2\n    }, {\n      a: 3\n    }],\n    b: 2\n  }, {\n    a: 1,\n    b: 2\n  });\n  nomatch({\n    $or: [{\n      a: 1\n    }, {\n      a: 2\n    }],\n    b: 3\n  }, {\n    a: 1,\n    b: 2\n  }); // Combining $or with equality\n\n  match({\n    x: 1,\n    $or: [{\n      a: 1\n    }, {\n      b: 1\n    }]\n  }, {\n    x: 1,\n    b: 1\n  });\n  match({\n    $or: [{\n      a: 1\n    }, {\n      b: 1\n    }],\n    x: 1\n  }, {\n    x: 1,\n    b: 1\n  });\n  nomatch({\n    x: 1,\n    $or: [{\n      a: 1\n    }, {\n      b: 1\n    }]\n  }, {\n    b: 1\n  });\n  nomatch({\n    x: 1,\n    $or: [{\n      a: 1\n    }, {\n      b: 1\n    }]\n  }, {\n    x: 1\n  }); // $or and $lt, $lte, $gt, $gte\n\n  match({\n    $or: [{\n      a: {\n        $lte: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $lt: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $gte: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $gt: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      b: {\n        $gt: 1\n      }\n    }, {\n      b: {\n        $lt: 3\n      }\n    }]\n  }, {\n    b: 2\n  });\n  nomatch({\n    $or: [{\n      b: {\n        $lt: 1\n      }\n    }, {\n      b: {\n        $gt: 3\n      }\n    }]\n  }, {\n    b: 2\n  }); // $or and $in\n\n  match({\n    $or: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    b: 2\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    c: 3\n  });\n  match({\n    $or: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $in: [1, 2, 3]\n      }\n    }]\n  }, {\n    b: 2\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    b: 2\n  }); // $or and $nin\n\n  nomatch({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    b: 2\n  });\n  match({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    c: 3\n  });\n  match({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    b: 2\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1,\n    b: 2\n  });\n  match({\n    $or: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    b: 2\n  }); // $or and dot-notation\n\n  match({\n    $or: [{\n      \"a.b\": 1\n    }, {\n      \"a.b\": 2\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  match({\n    $or: [{\n      \"a.b\": 1\n    }, {\n      \"a.c\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    $or: [{\n      \"a.b\": 2\n    }, {\n      \"a.c\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  }); // $or and nested objects\n\n  match({\n    $or: [{\n      a: {\n        b: 1,\n        c: 2\n      }\n    }, {\n      a: {\n        b: 2,\n        c: 1\n      }\n    }]\n  }, {\n    a: {\n      b: 1,\n      c: 2\n    }\n  });\n  nomatch({\n    $or: [{\n      a: {\n        b: 1,\n        c: 3\n      }\n    }, {\n      a: {\n        b: 2,\n        c: 1\n      }\n    }]\n  }, {\n    a: {\n      b: 1,\n      c: 2\n    }\n  }); // $or and regexes\n\n  match({\n    $or: [{\n      a: /a/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  nomatch({\n    $or: [{\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  match({\n    $or: [{\n      a: /a/\n    }, {\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  nomatch({\n    $or: [{\n      a: /i/\n    }, {\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  match({\n    $or: [{\n      a: /i/\n    }, {\n      b: /o/\n    }]\n  }, {\n    a: \"cat\",\n    b: \"dog\"\n  }); // $or and $ne\n\n  match({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {});\n  nomatch({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 2\n  });\n  match({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    b: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      a: {\n        $ne: 2\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      b: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      b: {\n        $ne: 2\n      }\n    }]\n  }, {\n    a: 1,\n    b: 2\n  }); // $or and $not\n\n  match({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }]\n  }, {});\n  nomatch({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }]\n  }, {\n    a: 2\n  });\n  match({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $not: {\n          $mod: [10, 2]\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $mod: [10, 2]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $mod: [10, 2]\n      }\n    }]\n  }, {\n    a: 2\n  });\n  match({\n    $or: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $mod: [10, 2]\n      }\n    }]\n  }, {\n    a: 3\n  }); // this is possibly an open-ended task, so we stop here ...\n  // $nor\n\n  test.throws(function () {\n    match({\n      $nor: []\n    }, {});\n  });\n  test.throws(function () {\n    match({\n      $nor: [5]\n    }, {});\n  });\n  test.throws(function () {\n    match({\n      $nor: []\n    }, {\n      a: 1\n    });\n  });\n  nomatch({\n    $nor: [{\n      a: 1\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      c: 3\n    }, {\n      d: 4\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: [1, 2, 3]\n  });\n  match({\n    $nor: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    c: [1, 2, 3]\n  });\n  match({\n    $nor: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: [2, 3, 4]\n  });\n  nomatch({\n    $nor: [{\n      a: 1\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  }); // $nor and $lt, $lte, $gt, $gte\n\n  nomatch({\n    $nor: [{\n      a: {\n        $lte: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      a: {\n        $lt: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $gte: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      a: {\n        $gt: 1\n      }\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      b: {\n        $gt: 1\n      }\n    }, {\n      b: {\n        $lt: 3\n      }\n    }]\n  }, {\n    b: 2\n  });\n  match({\n    $nor: [{\n      b: {\n        $lt: 1\n      }\n    }, {\n      b: {\n        $gt: 3\n      }\n    }]\n  }, {\n    b: 2\n  }); // $nor and $in\n\n  nomatch({\n    $nor: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      a: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    b: 2\n  });\n  match({\n    $nor: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    c: 3\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $in: [1, 2, 3]\n      }\n    }]\n  }, {\n    b: 2\n  });\n  match({\n    $nor: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    b: 2\n  }); // $nor and $nin\n\n  match({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    b: 2\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: 2\n    }]\n  }, {\n    c: 3\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    b: 2\n  });\n  match({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1,\n    b: 2\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    b: 2\n  }); // $nor and dot-notation\n\n  nomatch({\n    $nor: [{\n      \"a.b\": 1\n    }, {\n      \"a.b\": 2\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    $nor: [{\n      \"a.b\": 1\n    }, {\n      \"a.c\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  match({\n    $nor: [{\n      \"a.b\": 2\n    }, {\n      \"a.c\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  }); // $nor and nested objects\n\n  nomatch({\n    $nor: [{\n      a: {\n        b: 1,\n        c: 2\n      }\n    }, {\n      a: {\n        b: 2,\n        c: 1\n      }\n    }]\n  }, {\n    a: {\n      b: 1,\n      c: 2\n    }\n  });\n  match({\n    $nor: [{\n      a: {\n        b: 1,\n        c: 3\n      }\n    }, {\n      a: {\n        b: 2,\n        c: 1\n      }\n    }]\n  }, {\n    a: {\n      b: 1,\n      c: 2\n    }\n  }); // $nor and regexes\n\n  nomatch({\n    $nor: [{\n      a: /a/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  match({\n    $nor: [{\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  nomatch({\n    $nor: [{\n      a: /a/\n    }, {\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  match({\n    $nor: [{\n      a: /i/\n    }, {\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  nomatch({\n    $nor: [{\n      a: /i/\n    }, {\n      b: /o/\n    }]\n  }, {\n    a: \"cat\",\n    b: \"dog\"\n  }); // $nor and $ne\n\n  nomatch({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {});\n  match({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 2\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    b: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      a: {\n        $ne: 2\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      b: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      b: {\n        $ne: 2\n      }\n    }]\n  }, {\n    a: 1,\n    b: 2\n  }); // $nor and $not\n\n  nomatch({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }]\n  }, {});\n  match({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }]\n  }, {\n    a: 2\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $not: {\n          $mod: [10, 2]\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $mod: [10, 2]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $mod: [10, 2]\n      }\n    }]\n  }, {\n    a: 2\n  });\n  nomatch({\n    $nor: [{\n      a: {\n        $not: {\n          $mod: [10, 1]\n        }\n      }\n    }, {\n      a: {\n        $mod: [10, 2]\n      }\n    }]\n  }, {\n    a: 3\n  }); // $and\n\n  test.throws(function () {\n    match({\n      $and: []\n    }, {});\n  });\n  test.throws(function () {\n    match({\n      $and: [5]\n    }, {});\n  });\n  test.throws(function () {\n    match({\n      $and: []\n    }, {\n      a: 1\n    });\n  });\n  match({\n    $and: [{\n      a: 1\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: 1\n    }, {\n      a: 2\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: 1\n    }, {\n      b: 1\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: 1\n    }, {\n      b: 2\n    }]\n  }, {\n    a: 1,\n    b: 2\n  });\n  nomatch({\n    $and: [{\n      a: 1\n    }, {\n      b: 1\n    }]\n  }, {\n    a: 1,\n    b: 2\n  });\n  match({\n    $and: [{\n      a: 1\n    }, {\n      b: 2\n    }],\n    c: 3\n  }, {\n    a: 1,\n    b: 2,\n    c: 3\n  });\n  nomatch({\n    $and: [{\n      a: 1\n    }, {\n      b: 2\n    }],\n    c: 4\n  }, {\n    a: 1,\n    b: 2,\n    c: 3\n  }); // $and and regexes\n\n  match({\n    $and: [{\n      a: /a/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  match({\n    $and: [{\n      a: /a/i\n    }]\n  }, {\n    a: \"CAT\"\n  });\n  nomatch({\n    $and: [{\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  nomatch({\n    $and: [{\n      a: /a/\n    }, {\n      a: /o/\n    }]\n  }, {\n    a: \"cat\"\n  });\n  match({\n    $and: [{\n      a: /a/\n    }, {\n      b: /o/\n    }]\n  }, {\n    a: \"cat\",\n    b: \"dog\"\n  });\n  nomatch({\n    $and: [{\n      a: /a/\n    }, {\n      b: /a/\n    }]\n  }, {\n    a: \"cat\",\n    b: \"dog\"\n  }); // $and, dot-notation, and nested objects\n\n  match({\n    $and: [{\n      \"a.b\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  match({\n    $and: [{\n      a: {\n        b: 1\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.b\": 2\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.c\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.b\": 1\n    }, {\n      \"a.b\": 2\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.b\": 1\n    }, {\n      a: {\n        b: 2\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  match({\n    $and: [{\n      \"a.b\": 1\n    }, {\n      \"c.d\": 2\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.b\": 1\n    }, {\n      \"c.d\": 1\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  });\n  match({\n    $and: [{\n      \"a.b\": 1\n    }, {\n      c: {\n        d: 2\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.b\": 1\n    }, {\n      c: {\n        d: 1\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  });\n  nomatch({\n    $and: [{\n      \"a.b\": 2\n    }, {\n      c: {\n        d: 2\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  });\n  match({\n    $and: [{\n      a: {\n        b: 1\n      }\n    }, {\n      c: {\n        d: 2\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  });\n  nomatch({\n    $and: [{\n      a: {\n        b: 2\n      }\n    }, {\n      c: {\n        d: 2\n      }\n    }]\n  }, {\n    a: {\n      b: 1\n    },\n    c: {\n      d: 2\n    }\n  }); // $and and $in\n\n  nomatch({\n    $and: [{\n      a: {\n        $in: []\n      }\n    }]\n  }, {});\n  match({\n    $and: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      a: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $in: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1,\n    b: 4\n  });\n  match({\n    $and: [{\n      a: {\n        $in: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $in: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1,\n    b: 4\n  }); // $and and $nin\n\n  match({\n    $and: [{\n      a: {\n        $nin: []\n      }\n    }]\n  }, {});\n  nomatch({\n    $and: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      a: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [1, 2, 3]\n      }\n    }]\n  }, {\n    a: 1,\n    b: 4\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $nin: [1, 2, 3]\n      }\n    }, {\n      b: {\n        $nin: [4, 5, 6]\n      }\n    }]\n  }, {\n    a: 1,\n    b: 4\n  }); // $and and $lt, $lte, $gt, $gte\n\n  match({\n    $and: [{\n      a: {\n        $lt: 2\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $lt: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $lte: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $gt: 0\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $gt: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $gte: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $gt: 0\n      }\n    }, {\n      a: {\n        $lt: 2\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $gt: 1\n      }\n    }, {\n      a: {\n        $lt: 2\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $gt: 0\n      }\n    }, {\n      a: {\n        $lt: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $gte: 1\n      }\n    }, {\n      a: {\n        $lte: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $gte: 2\n      }\n    }, {\n      a: {\n        $lte: 0\n      }\n    }]\n  }, {\n    a: 1\n  }); // $and and $ne\n\n  match({\n    $and: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {});\n  nomatch({\n    $and: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $ne: 1\n      }\n    }]\n  }, {\n    a: 2\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      a: {\n        $ne: 2\n      }\n    }]\n  }, {\n    a: 2\n  });\n  match({\n    $and: [{\n      a: {\n        $ne: 1\n      }\n    }, {\n      a: {\n        $ne: 3\n      }\n    }]\n  }, {\n    a: 2\n  }); // $and and $not\n\n  match({\n    $and: [{\n      a: {\n        $not: {\n          $gt: 2\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $not: {\n          $lt: 2\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  match({\n    $and: [{\n      a: {\n        $not: {\n          $lt: 0\n        }\n      }\n    }, {\n      a: {\n        $not: {\n          $gt: 2\n        }\n      }\n    }]\n  }, {\n    a: 1\n  });\n  nomatch({\n    $and: [{\n      a: {\n        $not: {\n          $lt: 2\n        }\n      }\n    }, {\n      a: {\n        $not: {\n          $gt: 0\n        }\n      }\n    }]\n  }, {\n    a: 1\n  }); // $where\n\n  match({\n    $where: \"this.a === 1\"\n  }, {\n    a: 1\n  });\n  match({\n    $where: \"obj.a === 1\"\n  }, {\n    a: 1\n  });\n  nomatch({\n    $where: \"this.a !== 1\"\n  }, {\n    a: 1\n  });\n  nomatch({\n    $where: \"obj.a !== 1\"\n  }, {\n    a: 1\n  });\n  nomatch({\n    $where: \"this.a === 1\",\n    a: 2\n  }, {\n    a: 1\n  });\n  match({\n    $where: \"this.a === 1\",\n    b: 2\n  }, {\n    a: 1,\n    b: 2\n  });\n  match({\n    $where: \"this.a === 1 && this.b === 2\"\n  }, {\n    a: 1,\n    b: 2\n  });\n  match({\n    $where: \"this.a instanceof Array\"\n  }, {\n    a: []\n  });\n  nomatch({\n    $where: \"this.a instanceof Array\"\n  }, {\n    a: 1\n  }); // reaching into array\n\n  match({\n    \"dogs.0.name\": \"Fido\"\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  match({\n    \"dogs.1.name\": \"Rex\"\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  nomatch({\n    \"dogs.1.name\": \"Fido\"\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  match({\n    \"room.1b\": \"bla\"\n  }, {\n    room: {\n      \"1b\": \"bla\"\n    }\n  });\n  match({\n    \"dogs.name\": \"Fido\"\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  match({\n    \"dogs.name\": \"Rex\"\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  match({\n    \"animals.dogs.name\": \"Fido\"\n  }, {\n    animals: [{\n      dogs: [{\n        name: \"Rover\"\n      }]\n    }, {}, {\n      dogs: [{\n        name: \"Fido\"\n      }, {\n        name: \"Rex\"\n      }]\n    }]\n  });\n  match({\n    \"animals.dogs.name\": \"Fido\"\n  }, {\n    animals: [{\n      dogs: {\n        name: \"Rex\"\n      }\n    }, {\n      dogs: {\n        name: \"Fido\"\n      }\n    }]\n  });\n  match({\n    \"animals.dogs.name\": \"Fido\"\n  }, {\n    animals: [{\n      dogs: [{\n        name: \"Rover\"\n      }]\n    }, {}, {\n      dogs: [{\n        name: [\"Fido\"]\n      }, {\n        name: \"Rex\"\n      }]\n    }]\n  });\n  nomatch({\n    \"dogs.name\": \"Fido\"\n  }, {\n    dogs: []\n  }); // $elemMatch\n\n  match({\n    dogs: {\n      $elemMatch: {\n        name: /e/\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  nomatch({\n    dogs: {\n      $elemMatch: {\n        name: /a/\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\"\n    }, {\n      name: \"Rex\"\n    }]\n  });\n  match({\n    dogs: {\n      $elemMatch: {\n        age: {\n          $gt: 4\n        }\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\",\n      age: 5\n    }, {\n      name: \"Rex\",\n      age: 3\n    }]\n  });\n  match({\n    dogs: {\n      $elemMatch: {\n        name: \"Fido\",\n        age: {\n          $gt: 4\n        }\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\",\n      age: 5\n    }, {\n      name: \"Rex\",\n      age: 3\n    }]\n  });\n  nomatch({\n    dogs: {\n      $elemMatch: {\n        name: \"Fido\",\n        age: {\n          $gt: 5\n        }\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\",\n      age: 5\n    }, {\n      name: \"Rex\",\n      age: 3\n    }]\n  });\n  match({\n    dogs: {\n      $elemMatch: {\n        name: /i/,\n        age: {\n          $gt: 4\n        }\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\",\n      age: 5\n    }, {\n      name: \"Rex\",\n      age: 3\n    }]\n  });\n  nomatch({\n    dogs: {\n      $elemMatch: {\n        name: /e/,\n        age: 5\n      }\n    }\n  }, {\n    dogs: [{\n      name: \"Fido\",\n      age: 5\n    }, {\n      name: \"Rex\",\n      age: 3\n    }]\n  });\n  match({\n    x: {\n      $elemMatch: {\n        y: 9\n      }\n    }\n  }, {\n    x: [{\n      y: 9\n    }]\n  });\n  nomatch({\n    x: {\n      $elemMatch: {\n        y: 9\n      }\n    }\n  }, {\n    x: [[{\n      y: 9\n    }]]\n  });\n  match({\n    x: {\n      $elemMatch: {\n        $gt: 5,\n        $lt: 9\n      }\n    }\n  }, {\n    x: [8]\n  });\n  nomatch({\n    x: {\n      $elemMatch: {\n        $gt: 5,\n        $lt: 9\n      }\n    }\n  }, {\n    x: [[8]]\n  });\n  match({\n    'a.x': {\n      $elemMatch: {\n        y: 9\n      }\n    }\n  }, {\n    a: [{\n      x: []\n    }, {\n      x: [{\n        y: 9\n      }]\n    }]\n  });\n  nomatch({\n    a: {\n      $elemMatch: {\n        x: 5\n      }\n    }\n  }, {\n    a: {\n      x: 5\n    }\n  });\n  match({\n    a: {\n      $elemMatch: {\n        0: {\n          $gt: 5,\n          $lt: 9\n        }\n      }\n    }\n  }, {\n    a: [[6]]\n  });\n  match({\n    a: {\n      $elemMatch: {\n        '0.b': {\n          $gt: 5,\n          $lt: 9\n        }\n      }\n    }\n  }, {\n    a: [[{\n      b: 6\n    }]]\n  });\n  match({\n    a: {\n      $elemMatch: {\n        x: 1,\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      b: 1\n    }]\n  });\n  match({\n    a: {\n      $elemMatch: {\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }],\n        x: 1\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      b: 1\n    }]\n  });\n  match({\n    a: {\n      $elemMatch: {\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      b: 1\n    }]\n  });\n  match({\n    a: {\n      $elemMatch: {\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      b: 1\n    }]\n  });\n  match({\n    a: {\n      $elemMatch: {\n        $and: [{\n          b: 1\n        }, {\n          x: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      b: 1\n    }]\n  });\n  nomatch({\n    a: {\n      $elemMatch: {\n        x: 1,\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      b: 1\n    }]\n  });\n  nomatch({\n    a: {\n      $elemMatch: {\n        x: 1,\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      x: 1\n    }]\n  });\n  nomatch({\n    a: {\n      $elemMatch: {\n        x: 1,\n        $or: [{\n          a: 1\n        }, {\n          b: 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      x: 1\n    }, {\n      b: 1\n    }]\n  });\n  test.throws(function () {\n    match({\n      a: {\n        $elemMatch: {\n          $gte: 1,\n          $or: [{\n            a: 1\n          }, {\n            b: 1\n          }]\n        }\n      }\n    }, {\n      a: [{\n        x: 1,\n        b: 1\n      }]\n    });\n  });\n  test.throws(function () {\n    match({\n      x: {\n        $elemMatch: {\n          $and: [{\n            $gt: 5,\n            $lt: 9\n          }]\n        }\n      }\n    }, {\n      x: [8]\n    });\n  }); // $comment\n\n  match({\n    a: 5,\n    $comment: \"asdf\"\n  }, {\n    a: 5\n  });\n  nomatch({\n    a: 6,\n    $comment: \"asdf\"\n  }, {\n    a: 5\n  }); // XXX still needs tests:\n  // - non-scalar arguments to $gt, $lt, etc\n});\nTinytest.add(\"minimongo - projection_compiler\", function (test) {\n  var testProjection = function (projection, tests) {\n    var projection_f = LocalCollection._compileProjection(projection);\n\n    var equalNonStrict = function (a, b, desc) {\n      test.isTrue(_.isEqual(a, b), desc);\n    };\n\n    _.each(tests, function (testCase) {\n      equalNonStrict(projection_f(testCase[0]), testCase[1], testCase[2]);\n    });\n  };\n\n  var testCompileProjectionThrows = function (projection, expectedError) {\n    test.throws(function () {\n      LocalCollection._compileProjection(projection);\n    }, expectedError);\n  };\n\n  testProjection({\n    'foo': 1,\n    'bar': 1\n  }, [[{\n    foo: 42,\n    bar: \"something\",\n    baz: \"else\"\n  }, {\n    foo: 42,\n    bar: \"something\"\n  }, \"simplest - whitelist\"], [{\n    foo: {\n      nested: 17\n    },\n    baz: {}\n  }, {\n    foo: {\n      nested: 17\n    }\n  }, \"nested whitelisted field\"], [{\n    _id: \"uid\",\n    bazbaz: 42\n  }, {\n    _id: \"uid\"\n  }, \"simplest whitelist - preserve _id\"]]);\n  testProjection({\n    'foo': 0,\n    'bar': 0\n  }, [[{\n    foo: 42,\n    bar: \"something\",\n    baz: \"else\"\n  }, {\n    baz: \"else\"\n  }, \"simplest - blacklist\"], [{\n    foo: {\n      nested: 17\n    },\n    baz: {\n      foo: \"something\"\n    }\n  }, {\n    baz: {\n      foo: \"something\"\n    }\n  }, \"nested blacklisted field\"], [{\n    _id: \"uid\",\n    bazbaz: 42\n  }, {\n    _id: \"uid\",\n    bazbaz: 42\n  }, \"simplest blacklist - preserve _id\"]]);\n  testProjection({\n    _id: 0,\n    foo: 1\n  }, [[{\n    foo: 42,\n    bar: 33,\n    _id: \"uid\"\n  }, {\n    foo: 42\n  }, \"whitelist - _id blacklisted\"]]);\n  testProjection({\n    _id: 0,\n    foo: 0\n  }, [[{\n    foo: 42,\n    bar: 33,\n    _id: \"uid\"\n  }, {\n    bar: 33\n  }, \"blacklist - _id blacklisted\"]]);\n  testProjection({\n    'foo.bar.baz': 1\n  }, [[{\n    foo: {\n      meh: \"fur\",\n      bar: {\n        baz: 42\n      },\n      tr: 1\n    },\n    bar: 33,\n    baz: 'trolololo'\n  }, {\n    foo: {\n      bar: {\n        baz: 42\n      }\n    }\n  }, \"whitelist nested\"], // Behavior of this test is looked up in actual mongo\n  [{\n    foo: {\n      meh: \"fur\",\n      bar: \"nope\",\n      tr: 1\n    },\n    bar: 33,\n    baz: 'trolololo'\n  }, {\n    foo: {}\n  }, \"whitelist nested - path not found in doc, different type\"], // Behavior of this test is looked up in actual mongo\n  [{\n    foo: {\n      meh: \"fur\",\n      bar: [],\n      tr: 1\n    },\n    bar: 33,\n    baz: 'trolololo'\n  }, {\n    foo: {\n      bar: []\n    }\n  }, \"whitelist nested - path not found in doc\"]]);\n  testProjection({\n    'hope.humanity': 0,\n    'hope.people': 0\n  }, [[{\n    hope: {\n      humanity: \"lost\",\n      people: 'broken',\n      candies: 'long live!'\n    }\n  }, {\n    hope: {\n      candies: 'long live!'\n    }\n  }, \"blacklist nested\"], [{\n    hope: \"new\"\n  }, {\n    hope: \"new\"\n  }, \"blacklist nested - path not found in doc\"]]);\n  testProjection({\n    _id: 1\n  }, [[{\n    _id: 42,\n    x: 1,\n    y: {\n      z: \"2\"\n    }\n  }, {\n    _id: 42\n  }, \"_id whitelisted\"], [{\n    _id: 33\n  }, {\n    _id: 33\n  }, \"_id whitelisted, _id only\"], [{\n    x: 1\n  }, {}, \"_id whitelisted, no _id\"]]);\n  testProjection({\n    _id: 0\n  }, [[{\n    _id: 42,\n    x: 1,\n    y: {\n      z: \"2\"\n    }\n  }, {\n    x: 1,\n    y: {\n      z: \"2\"\n    }\n  }, \"_id blacklisted\"], [{\n    _id: 33\n  }, {}, \"_id blacklisted, _id only\"], [{\n    x: 1\n  }, {\n    x: 1\n  }, \"_id blacklisted, no _id\"]]);\n  testProjection({}, [[{\n    a: 1,\n    b: 2,\n    c: \"3\"\n  }, {\n    a: 1,\n    b: 2,\n    c: \"3\"\n  }, \"empty projection\"]]);\n  testCompileProjectionThrows({\n    'inc': 1,\n    'excl': 0\n  }, \"You cannot currently mix including and excluding fields\");\n  testCompileProjectionThrows({\n    _id: 1,\n    a: 0\n  }, \"You cannot currently mix including and excluding fields\");\n  testCompileProjectionThrows({\n    'a': 1,\n    'a.b': 1\n  }, \"using both of them may trigger unexpected behavior\");\n  testCompileProjectionThrows({\n    'a.b.c': 1,\n    'a.b': 1,\n    'a': 1\n  }, \"using both of them may trigger unexpected behavior\");\n  testCompileProjectionThrows(\"some string\", \"fields option must be an object\");\n});\nTinytest.add(\"minimongo - fetch with fields\", function (test) {\n  var c = new LocalCollection();\n\n  _.times(30, function (i) {\n    c.insert({\n      something: Random.id(),\n      anything: {\n        foo: \"bar\",\n        cool: \"hot\"\n      },\n      nothing: i,\n      i: i\n    });\n  }); // Test just a regular fetch with some projection\n\n\n  var fetchResults = c.find({}, {\n    fields: {\n      'something': 1,\n      'anything.foo': 1\n    }\n  }).fetch();\n  test.isTrue(_.all(fetchResults, function (x) {\n    return x && x.something && x.anything && x.anything.foo && x.anything.foo === \"bar\" && !_.has(x, 'nothing') && !_.has(x.anything, 'cool');\n  })); // Test with a selector, even field used in the selector is excluded in the\n  // projection\n\n  fetchResults = c.find({\n    nothing: {\n      $gte: 5\n    }\n  }, {\n    fields: {\n      nothing: 0\n    }\n  }).fetch();\n  test.isTrue(_.all(fetchResults, function (x) {\n    return x && x.something && x.anything && x.anything.foo === \"bar\" && x.anything.cool === \"hot\" && !_.has(x, 'nothing') && x.i && x.i >= 5;\n  }));\n  test.isTrue(fetchResults.length === 25); // Test that we can sort, based on field excluded from the projection, use\n  // skip and limit as well!\n  // following find will get indexes [10..20) sorted by nothing\n\n  fetchResults = c.find({}, {\n    sort: {\n      nothing: 1\n    },\n    limit: 10,\n    skip: 10,\n    fields: {\n      i: 1,\n      something: 1\n    }\n  }).fetch();\n  test.isTrue(_.all(fetchResults, function (x) {\n    return x && x.something && x.i >= 10 && x.i < 20;\n  }));\n\n  _.each(fetchResults, function (x, i, arr) {\n    if (!i) return;\n    test.isTrue(x.i === arr[i - 1].i + 1);\n  }); // Temporary unsupported operators\n  // queries are taken from MongoDB docs examples\n\n\n  test.throws(function () {\n    c.find({}, {\n      fields: {\n        'grades.$': 1\n      }\n    });\n  });\n  test.throws(function () {\n    c.find({}, {\n      fields: {\n        grades: {\n          $elemMatch: {\n            mean: 70\n          }\n        }\n      }\n    });\n  });\n  test.throws(function () {\n    c.find({}, {\n      fields: {\n        grades: {\n          $slice: [20, 10]\n        }\n      }\n    });\n  });\n});\nTinytest.add(\"minimongo - fetch with projection, subarrays\", function (test) {\n  // Apparently projection of type 'foo.bar.x' for\n  // { foo: [ { bar: { x: 42 } }, { bar: { x: 3 } } ] }\n  // should return exactly this object. More precisely, arrays are considered as\n  // sets and are queried separately and then merged back to result set\n  var c = new LocalCollection(); // Insert a test object with two set fields\n\n  c.insert({\n    setA: [{\n      fieldA: 42,\n      fieldB: 33\n    }, {\n      fieldA: \"the good\",\n      fieldB: \"the bad\",\n      fieldC: \"the ugly\"\n    }],\n    setB: [{\n      anotherA: {},\n      anotherB: \"meh\"\n    }, {\n      anotherA: 1234,\n      anotherB: 431\n    }]\n  });\n\n  var equalNonStrict = function (a, b, desc) {\n    test.isTrue(_.isEqual(a, b), desc);\n  };\n\n  var testForProjection = function (projection, expected) {\n    var fetched = c.find({}, {\n      fields: projection\n    }).fetch()[0];\n    equalNonStrict(fetched, expected, \"failed sub-set projection: \" + JSON.stringify(projection));\n  };\n\n  testForProjection({\n    'setA.fieldA': 1,\n    'setB.anotherB': 1,\n    _id: 0\n  }, {\n    setA: [{\n      fieldA: 42\n    }, {\n      fieldA: \"the good\"\n    }],\n    setB: [{\n      anotherB: \"meh\"\n    }, {\n      anotherB: 431\n    }]\n  });\n  testForProjection({\n    'setA.fieldA': 0,\n    'setB.anotherA': 0,\n    _id: 0\n  }, {\n    setA: [{\n      fieldB: 33\n    }, {\n      fieldB: \"the bad\",\n      fieldC: \"the ugly\"\n    }],\n    setB: [{\n      anotherB: \"meh\"\n    }, {\n      anotherB: 431\n    }]\n  });\n  c.remove({});\n  c.insert({\n    a: [[{\n      b: 1,\n      c: 2\n    }, {\n      b: 2,\n      c: 4\n    }], {\n      b: 3,\n      c: 5\n    }, [{\n      b: 4,\n      c: 9\n    }]]\n  });\n  testForProjection({\n    'a.b': 1,\n    _id: 0\n  }, {\n    a: [[{\n      b: 1\n    }, {\n      b: 2\n    }], {\n      b: 3\n    }, [{\n      b: 4\n    }]]\n  });\n  testForProjection({\n    'a.b': 0,\n    _id: 0\n  }, {\n    a: [[{\n      c: 2\n    }, {\n      c: 4\n    }], {\n      c: 5\n    }, [{\n      c: 9\n    }]]\n  });\n});\nTinytest.add(\"minimongo - fetch with projection, deep copy\", function (test) {\n  // Compiled fields projection defines the contract: returned document doesn't\n  // retain anything from the passed argument.\n  var doc = {\n    a: {\n      x: 42\n    },\n    b: {\n      y: {\n        z: 33\n      }\n    },\n    c: \"asdf\"\n  };\n  var fields = {\n    'a': 1,\n    'b.y': 1\n  };\n\n  var projectionFn = LocalCollection._compileProjection(fields);\n\n  var filteredDoc = projectionFn(doc);\n  doc.a.x++;\n  doc.b.y.z--;\n  test.equal(filteredDoc.a.x, 42, \"projection returning deep copy - including\");\n  test.equal(filteredDoc.b.y.z, 33, \"projection returning deep copy - including\");\n  fields = {\n    c: 0\n  };\n  projectionFn = LocalCollection._compileProjection(fields);\n  filteredDoc = projectionFn(doc);\n  doc.a.x = 5;\n  test.equal(filteredDoc.a.x, 43, \"projection returning deep copy - excluding\");\n});\nTinytest.add(\"minimongo - observe ordered with projection\", function (test) {\n  // These tests are copy-paste from \"minimongo -observe ordered\",\n  // slightly modified to test projection\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var handle;\n  var c = new LocalCollection();\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    },\n    fields: {\n      a: 1\n    }\n  }).observe(cbs);\n  test.isTrue(handle.collection === c);\n  c.insert({\n    _id: 'foo',\n    a: 1,\n    b: 2\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, 0, null]);\n  c.update({\n    a: 1\n  }, {\n    $set: {\n      a: 2,\n      b: 1\n    }\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 2\n  }, 0, {\n    a: 1\n  }]);\n  c.insert({\n    _id: 'bar',\n    a: 10,\n    c: 33\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 10\n  }, 1, null]);\n  c.update({}, {\n    $inc: {\n      a: 1\n    }\n  }, {\n    multi: true\n  });\n  c.update({}, {\n    $inc: {\n      c: 1\n    }\n  }, {\n    multi: true\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 3\n  }, 0, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['changed', {\n    a: 11\n  }, 1, {\n    a: 10\n  }]);\n  c.update({\n    a: 11\n  }, {\n    a: 1,\n    b: 44\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 1\n  }, 1, {\n    a: 11\n  }]);\n  test.equal(operations.shift(), ['moved', {\n    a: 1\n  }, 1, 0, 'foo']);\n  c.remove({\n    a: 2\n  });\n  test.equal(operations.shift(), undefined);\n  c.remove({\n    a: 3\n  });\n  test.equal(operations.shift(), ['removed', 'foo', 1, {\n    a: 3\n  }]); // test stop\n\n  handle.stop();\n  var idA2 = Random.id();\n  c.insert({\n    _id: idA2,\n    a: 2\n  });\n  test.equal(operations.shift(), undefined);\n  var cursor = c.find({}, {\n    fields: {\n      a: 1,\n      _id: 0\n    }\n  });\n  test.throws(function () {\n    cursor.observeChanges({\n      added: function () {}\n    });\n  });\n  test.throws(function () {\n    cursor.observe({\n      added: function () {}\n    });\n  }); // test initial inserts (and backwards sort)\n\n  handle = c.find({}, {\n    sort: {\n      a: -1\n    },\n    fields: {\n      a: 1\n    }\n  }).observe(cbs);\n  test.equal(operations.shift(), ['added', {\n    a: 2\n  }, 0, null]);\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, 1, null]);\n  handle.stop(); // test _suppress_initial\n\n  handle = c.find({}, {\n    sort: {\n      a: -1\n    },\n    fields: {\n      a: 1\n    }\n  }).observe(_.extend(cbs, {\n    _suppress_initial: true\n  }));\n  test.equal(operations.shift(), undefined);\n  c.insert({\n    a: 100,\n    b: {\n      foo: \"bar\"\n    }\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 100\n  }, 0, idA2]);\n  handle.stop(); // test skip and limit.\n\n  c.remove({});\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    },\n    skip: 1,\n    limit: 2,\n    fields: {\n      'blacklisted': 0\n    }\n  }).observe(cbs);\n  test.equal(operations.shift(), undefined);\n  c.insert({\n    a: 1,\n    blacklisted: 1324\n  });\n  test.equal(operations.shift(), undefined);\n  c.insert({\n    _id: 'foo',\n    a: 2,\n    blacklisted: [\"something\"]\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 2\n  }, 0, null]);\n  c.insert({\n    a: 3,\n    blacklisted: {\n      2: 3\n    }\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 3\n  }, 1, null]);\n  c.insert({\n    a: 4,\n    blacklisted: 6\n  });\n  test.equal(operations.shift(), undefined);\n  c.update({\n    a: 1\n  }, {\n    a: 0,\n    blacklisted: 4444\n  });\n  test.equal(operations.shift(), undefined);\n  c.update({\n    a: 0\n  }, {\n    a: 5,\n    blacklisted: 11111\n  });\n  test.equal(operations.shift(), ['removed', 'foo', 0, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['added', {\n    a: 4\n  }, 1, null]);\n  c.update({\n    a: 3\n  }, {\n    a: 3.5,\n    blacklisted: 333.4444\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 3.5\n  }, 0, {\n    a: 3\n  }]);\n  handle.stop(); // test _no_indices\n\n  c.remove({});\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    },\n    fields: {\n      a: 1\n    }\n  }).observe(_.extend(cbs, {\n    _no_indices: true\n  }));\n  c.insert({\n    _id: 'foo',\n    a: 1,\n    zoo: \"crazy\"\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, -1, null]);\n  c.update({\n    a: 1\n  }, {\n    $set: {\n      a: 2,\n      foobar: \"player\"\n    }\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 2\n  }, -1, {\n    a: 1\n  }]);\n  c.insert({\n    a: 10,\n    b: 123.45\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 10\n  }, -1, null]);\n  c.update({}, {\n    $inc: {\n      a: 1,\n      b: 2\n    }\n  }, {\n    multi: true\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 3\n  }, -1, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['changed', {\n    a: 11\n  }, -1, {\n    a: 10\n  }]);\n  c.update({\n    a: 11,\n    b: 125.45\n  }, {\n    a: 1,\n    b: 444\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 1\n  }, -1, {\n    a: 11\n  }]);\n  test.equal(operations.shift(), ['moved', {\n    a: 1\n  }, -1, -1, 'foo']);\n  c.remove({\n    a: 2\n  });\n  test.equal(operations.shift(), undefined);\n  c.remove({\n    a: 3\n  });\n  test.equal(operations.shift(), ['removed', 'foo', -1, {\n    a: 3\n  }]);\n  handle.stop();\n});\nTinytest.add(\"minimongo - ordering\", function (test) {\n  var shortBinary = EJSON.newBinary(1);\n  shortBinary[0] = 128;\n  var longBinary1 = EJSON.newBinary(2);\n  longBinary1[1] = 42;\n  var longBinary2 = EJSON.newBinary(2);\n  longBinary2[1] = 50;\n  var date1 = new Date();\n  var date2 = new Date(date1.getTime() + 1000); // value ordering\n\n  assert_ordering(test, LocalCollection._f._cmp, [null, 1, 2.2, 3, \"03\", \"1\", \"11\", \"2\", \"a\", \"aaa\", {}, {\n    a: 2\n  }, {\n    a: 3\n  }, {\n    a: 3,\n    b: 4\n  }, {\n    b: 4\n  }, {\n    b: 4,\n    a: 3\n  }, {\n    b: {}\n  }, {\n    b: [1, 2, 3]\n  }, {\n    b: [1, 2, 4]\n  }, [], [1, 2], [1, 2, 3], [1, 2, 4], [1, 2, \"4\"], [1, 2, [4]], shortBinary, longBinary1, longBinary2, new MongoID.ObjectID(\"1234567890abcd1234567890\"), new MongoID.ObjectID(\"abcd1234567890abcd123456\"), false, true, date1, date2]); // document ordering under a sort specification\n\n  var verify = function (sorts, docs) {\n    _.each(_.isArray(sorts) ? sorts : [sorts], function (sort) {\n      var sorter = new Minimongo.Sorter(sort);\n      assert_ordering(test, sorter.getComparator(), docs);\n    });\n  }; // note: [] doesn't sort with \"arrays\", it sorts as \"undefined\". the position\n  // of arrays in _typeorder only matters for things like $lt. (This behavior\n  // verified with MongoDB 2.2.1.) We don't define the relative order of {a: []}\n  // and {c: 1} is undefined (MongoDB does seem to care but it's not clear how\n  // or why).\n\n\n  verify([{\n    \"a\": 1\n  }, [\"a\"], [[\"a\", \"asc\"]]], [{\n    a: []\n  }, {\n    a: 1\n  }, {\n    a: {}\n  }, {\n    a: true\n  }]);\n  verify([{\n    \"a\": 1\n  }, [\"a\"], [[\"a\", \"asc\"]]], [{\n    c: 1\n  }, {\n    a: 1\n  }, {\n    a: {}\n  }, {\n    a: true\n  }]);\n  verify([{\n    \"a\": -1\n  }, [[\"a\", \"desc\"]]], [{\n    a: true\n  }, {\n    a: {}\n  }, {\n    a: 1\n  }, {\n    c: 1\n  }]);\n  verify([{\n    \"a\": -1\n  }, [[\"a\", \"desc\"]]], [{\n    a: true\n  }, {\n    a: {}\n  }, {\n    a: 1\n  }, {\n    a: []\n  }]);\n  verify([{\n    \"a\": 1,\n    \"b\": -1\n  }, [\"a\", [\"b\", \"desc\"]], [[\"a\", \"asc\"], [\"b\", \"desc\"]]], [{\n    c: 1\n  }, {\n    a: 1,\n    b: 3\n  }, {\n    a: 1,\n    b: 2\n  }, {\n    a: 2,\n    b: 0\n  }]);\n  verify([{\n    \"a\": 1,\n    \"b\": 1\n  }, [\"a\", \"b\"], [[\"a\", \"asc\"], [\"b\", \"asc\"]]], [{\n    c: 1\n  }, {\n    a: 1,\n    b: 2\n  }, {\n    a: 1,\n    b: 3\n  }, {\n    a: 2,\n    b: 0\n  }]);\n  test.throws(function () {\n    new Minimongo.Sorter(\"a\");\n  });\n  test.throws(function () {\n    new Minimongo.Sorter(123);\n  }); // We don't support $natural:1 (since we don't actually have Mongo's on-disk\n  // ordering available!)\n\n  test.throws(function () {\n    new Minimongo.Sorter({\n      $natural: 1\n    });\n  }); // No sort spec implies everything equal.\n\n  test.equal(new Minimongo.Sorter({}).getComparator()({\n    a: 1\n  }, {\n    a: 2\n  }), 0); // All sorts of array edge cases!\n  // Increasing sort sorts by the smallest element it finds; 1 < 2.\n\n  verify({\n    a: 1\n  }, [{\n    a: [1, 10, 20]\n  }, {\n    a: [5, 2, 99]\n  }]); // Decreasing sorts by largest it finds; 99 > 20.\n\n  verify({\n    a: -1\n  }, [{\n    a: [5, 2, 99]\n  }, {\n    a: [1, 10, 20]\n  }]); // Can also sort by specific array indices.\n\n  verify({\n    'a.1': 1\n  }, [{\n    a: [5, 2, 99]\n  }, {\n    a: [1, 10, 20]\n  }]); // We do NOT expand sub-arrays, so the minimum in the second doc is 5, not\n  // -20. (Numbers always sort before arrays.)\n\n  verify({\n    a: 1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [-5, -20], 18]\n  }]); // The maximum in each of these is the array, since arrays are \"greater\" than\n  // numbers. And [10, 15] is greater than [-5, -20].\n\n  verify({\n    a: -1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [-5, -20], 18]\n  }]); // 'a.0' here ONLY means \"first element of a\", not \"first element of something\n  // found in a\", so it CANNOT find the 10 or -5.\n\n  verify({\n    'a.0': 1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [-5, -20], 18]\n  }]);\n  verify({\n    'a.0': -1\n  }, [{\n    a: [5, [-5, -20], 18]\n  }, {\n    a: [1, [10, 15], 20]\n  }]); // Similarly, this is just comparing [-5,-20] to [10, 15].\n\n  verify({\n    'a.1': 1\n  }, [{\n    a: [5, [-5, -20], 18]\n  }, {\n    a: [1, [10, 15], 20]\n  }]);\n  verify({\n    'a.1': -1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [-5, -20], 18]\n  }]); // Here we are just comparing [10,15] directly to [19,3] (and NOT also\n  // iterating over the numbers; this is implemented by setting dontIterate in\n  // makeLookupFunction).  So [10,15]<[19,3] even though 3 is the smallest\n  // number you can find there.\n\n  verify({\n    'a.1': 1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [19, 3], 18]\n  }]);\n  verify({\n    'a.1': -1\n  }, [{\n    a: [5, [19, 3], 18]\n  }, {\n    a: [1, [10, 15], 20]\n  }]); // Minimal elements are 1 and 5.\n\n  verify({\n    a: 1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [19, 3], 18]\n  }]); // Maximal elements are [19,3] and [10,15] (because arrays sort higher than\n  // numbers), even though there's a 20 floating around.\n\n  verify({\n    a: -1\n  }, [{\n    a: [5, [19, 3], 18]\n  }, {\n    a: [1, [10, 15], 20]\n  }]); // Maximal elements are [10,15] and [3,19].  [10,15] is bigger even though 19\n  // is the biggest number in them, because array comparison is lexicographic.\n\n  verify({\n    a: -1\n  }, [{\n    a: [1, [10, 15], 20]\n  }, {\n    a: [5, [3, 19], 18]\n  }]); // (0,4) < (0,5), so they go in this order.  It's not correct to consider\n  // (0,3) as a sort key for the second document because they come from\n  // different a-branches.\n\n  verify({\n    'a.x': 1,\n    'a.y': 1\n  }, [{\n    a: [{\n      x: 0,\n      y: 4\n    }]\n  }, {\n    a: [{\n      x: 0,\n      y: 5\n    }, {\n      x: 1,\n      y: 3\n    }]\n  }]);\n  verify({\n    'a.0.s': 1\n  }, [{\n    a: [{\n      s: 1\n    }]\n  }, {\n    a: [{\n      s: 2\n    }]\n  }]);\n});\nTinytest.add(\"minimongo - sort\", function (test) {\n  var c = new LocalCollection();\n\n  for (var i = 0; i < 50; i++) {\n    for (var j = 0; j < 2; j++) {\n      c.insert({\n        a: i,\n        b: j,\n        _id: i + \"_\" + j\n      });\n    }\n  }\n\n  test.equal(c.find({\n    a: {\n      $gt: 10\n    }\n  }, {\n    sort: {\n      b: -1,\n      a: 1\n    },\n    limit: 5\n  }).fetch(), [{\n    a: 11,\n    b: 1,\n    _id: \"11_1\"\n  }, {\n    a: 12,\n    b: 1,\n    _id: \"12_1\"\n  }, {\n    a: 13,\n    b: 1,\n    _id: \"13_1\"\n  }, {\n    a: 14,\n    b: 1,\n    _id: \"14_1\"\n  }, {\n    a: 15,\n    b: 1,\n    _id: \"15_1\"\n  }]);\n  test.equal(c.find({\n    a: {\n      $gt: 10\n    }\n  }, {\n    sort: {\n      b: -1,\n      a: 1\n    },\n    skip: 3,\n    limit: 5\n  }).fetch(), [{\n    a: 14,\n    b: 1,\n    _id: \"14_1\"\n  }, {\n    a: 15,\n    b: 1,\n    _id: \"15_1\"\n  }, {\n    a: 16,\n    b: 1,\n    _id: \"16_1\"\n  }, {\n    a: 17,\n    b: 1,\n    _id: \"17_1\"\n  }, {\n    a: 18,\n    b: 1,\n    _id: \"18_1\"\n  }]);\n  test.equal(c.find({\n    a: {\n      $gte: 20\n    }\n  }, {\n    sort: {\n      a: 1,\n      b: -1\n    },\n    skip: 50,\n    limit: 5\n  }).fetch(), [{\n    a: 45,\n    b: 1,\n    _id: \"45_1\"\n  }, {\n    a: 45,\n    b: 0,\n    _id: \"45_0\"\n  }, {\n    a: 46,\n    b: 1,\n    _id: \"46_1\"\n  }, {\n    a: 46,\n    b: 0,\n    _id: \"46_0\"\n  }, {\n    a: 47,\n    b: 1,\n    _id: \"47_1\"\n  }]);\n});\nTinytest.add(\"minimongo - subkey sort\", function (test) {\n  var c = new LocalCollection(); // normal case\n\n  c.insert({\n    a: {\n      b: 2\n    }\n  });\n  c.insert({\n    a: {\n      b: 1\n    }\n  });\n  c.insert({\n    a: {\n      b: 3\n    }\n  });\n  test.equal(_.pluck(c.find({}, {\n    sort: {\n      'a.b': -1\n    }\n  }).fetch(), 'a'), [{\n    b: 3\n  }, {\n    b: 2\n  }, {\n    b: 1\n  }]); // isn't an object\n\n  c.insert({\n    a: 1\n  });\n  test.equal(_.pluck(c.find({}, {\n    sort: {\n      'a.b': 1\n    }\n  }).fetch(), 'a'), [1, {\n    b: 1\n  }, {\n    b: 2\n  }, {\n    b: 3\n  }]); // complex object\n\n  c.insert({\n    a: {\n      b: {\n        c: 1\n      }\n    }\n  });\n  test.equal(_.pluck(c.find({}, {\n    sort: {\n      'a.b': -1\n    }\n  }).fetch(), 'a'), [{\n    b: {\n      c: 1\n    }\n  }, {\n    b: 3\n  }, {\n    b: 2\n  }, {\n    b: 1\n  }, 1]); // no such top level prop\n\n  c.insert({\n    c: 1\n  });\n  test.equal(_.pluck(c.find({}, {\n    sort: {\n      'a.b': -1\n    }\n  }).fetch(), 'a'), [{\n    b: {\n      c: 1\n    }\n  }, {\n    b: 3\n  }, {\n    b: 2\n  }, {\n    b: 1\n  }, 1, undefined]); // no such mid level prop. just test that it doesn't throw.\n\n  test.equal(c.find({}, {\n    sort: {\n      'a.nope.c': -1\n    }\n  }).count(), 6);\n});\nTinytest.add(\"minimongo - array sort\", function (test) {\n  var c = new LocalCollection(); // \"up\" and \"down\" are the indices that the docs should have when sorted\n  // ascending and descending by \"a.x\" respectively. They are not reverses of\n  // each other: when sorting ascending, you use the minimum value you can find\n  // in the document, and when sorting descending, you use the maximum value you\n  // can find. So [1, 4] shows up in the 1 slot when sorting ascending and the 4\n  // slot when sorting descending.\n  //\n  // Similarly, \"selected\" is the index that the doc should have in the query\n  // that sorts ascending on \"a.x\" and selects {'a.x': {$gt: 1}}. In this case,\n  // the 1 in [1, 4] may not be used as a sort key.\n\n  c.insert({\n    up: 1,\n    down: 1,\n    selected: 2,\n    a: {\n      x: [1, 4]\n    }\n  });\n  c.insert({\n    up: 2,\n    down: 2,\n    selected: 0,\n    a: [{\n      x: [2]\n    }, {\n      x: 3\n    }]\n  });\n  c.insert({\n    up: 0,\n    down: 4,\n    a: {\n      x: 0\n    }\n  });\n  c.insert({\n    up: 3,\n    down: 3,\n    selected: 1,\n    a: {\n      x: 2.5\n    }\n  });\n  c.insert({\n    up: 4,\n    down: 0,\n    selected: 3,\n    a: {\n      x: 5\n    }\n  }); // Test that the the documents in \"cursor\" contain values with the name\n  // \"field\" running from 0 to the max value of that name in the collection.\n\n  var testCursorMatchesField = function (cursor, field) {\n    var fieldValues = [];\n    c.find().forEach(function (doc) {\n      if (_.has(doc, field)) fieldValues.push(doc[field]);\n    });\n    test.equal(_.pluck(cursor.fetch(), field), _.range(_.max(fieldValues) + 1));\n  };\n\n  testCursorMatchesField(c.find({}, {\n    sort: {\n      'a.x': 1\n    }\n  }), 'up');\n  testCursorMatchesField(c.find({}, {\n    sort: {\n      'a.x': -1\n    }\n  }), 'down');\n  testCursorMatchesField(c.find({\n    'a.x': {\n      $gt: 1\n    }\n  }, {\n    sort: {\n      'a.x': 1\n    }\n  }), 'selected');\n});\nTinytest.add(\"minimongo - sort keys\", function (test) {\n  var keyListToObject = function (keyList) {\n    var obj = {};\n\n    _.each(keyList, function (key) {\n      obj[EJSON.stringify(key)] = true;\n    });\n\n    return obj;\n  };\n\n  var testKeys = function (sortSpec, doc, expectedKeyList) {\n    var expectedKeys = keyListToObject(expectedKeyList);\n    var sorter = new Minimongo.Sorter(sortSpec);\n    var actualKeyList = [];\n\n    sorter._generateKeysFromDoc(doc, function (key) {\n      actualKeyList.push(key);\n    });\n\n    var actualKeys = keyListToObject(actualKeyList);\n    test.equal(actualKeys, expectedKeys);\n  };\n\n  var testParallelError = function (sortSpec, doc) {\n    var sorter = new Minimongo.Sorter(sortSpec);\n    test.throws(function () {\n      sorter._generateKeysFromDoc(doc, function () {});\n    }, /parallel arrays/);\n  }; // Just non-array fields.\n\n\n  testKeys({\n    'a.x': 1,\n    'a.y': 1\n  }, {\n    a: {\n      x: 0,\n      y: 5\n    }\n  }, [[0, 5]]); // Ensure that we don't get [0,3] and [1,5].\n\n  testKeys({\n    'a.x': 1,\n    'a.y': 1\n  }, {\n    a: [{\n      x: 0,\n      y: 5\n    }, {\n      x: 1,\n      y: 3\n    }]\n  }, [[0, 5], [1, 3]]); // Ensure we can combine \"array fields\" with \"non-array fields\".\n\n  testKeys({\n    'a.x': 1,\n    'a.y': 1,\n    b: -1\n  }, {\n    a: [{\n      x: 0,\n      y: 5\n    }, {\n      x: 1,\n      y: 3\n    }],\n    b: 42\n  }, [[0, 5, 42], [1, 3, 42]]);\n  testKeys({\n    b: -1,\n    'a.x': 1,\n    'a.y': 1\n  }, {\n    a: [{\n      x: 0,\n      y: 5\n    }, {\n      x: 1,\n      y: 3\n    }],\n    b: 42\n  }, [[42, 0, 5], [42, 1, 3]]);\n  testKeys({\n    'a.x': 1,\n    b: -1,\n    'a.y': 1\n  }, {\n    a: [{\n      x: 0,\n      y: 5\n    }, {\n      x: 1,\n      y: 3\n    }],\n    b: 42\n  }, [[0, 42, 5], [1, 42, 3]]);\n  testKeys({\n    a: 1,\n    b: 1\n  }, {\n    a: [1, 2, 3],\n    b: 42\n  }, [[1, 42], [2, 42], [3, 42]]); // Don't support multiple arrays at the same level.\n\n  testParallelError({\n    a: 1,\n    b: 1\n  }, {\n    a: [1, 2, 3],\n    b: [42]\n  }); // We are MORE STRICT than Mongo here; Mongo supports this!\n  // XXX support this too  #NestedArraySort\n\n  testParallelError({\n    'a.x': 1,\n    'a.y': 1\n  }, {\n    a: [{\n      x: 1,\n      y: [2, 3]\n    }, {\n      x: 2,\n      y: [4, 5]\n    }]\n  });\n});\nTinytest.add(\"minimongo - sort key filter\", function (test) {\n  var testOrder = function (sortSpec, selector, doc1, doc2) {\n    var matcher = new Minimongo.Matcher(selector);\n    var sorter = new Minimongo.Sorter(sortSpec, {\n      matcher: matcher\n    });\n    var comparator = sorter.getComparator();\n    var comparison = comparator(doc1, doc2);\n    test.isTrue(comparison < 0);\n  };\n\n  testOrder({\n    'a.x': 1\n  }, {\n    'a.x': {\n      $gt: 1\n    }\n  }, {\n    a: {\n      x: 3\n    }\n  }, {\n    a: {\n      x: [1, 4]\n    }\n  });\n  testOrder({\n    'a.x': 1\n  }, {\n    'a.x': {\n      $gt: 0\n    }\n  }, {\n    a: {\n      x: [1, 4]\n    }\n  }, {\n    a: {\n      x: 3\n    }\n  });\n\n  var keyCompatible = function (sortSpec, selector, key, compatible) {\n    var matcher = new Minimongo.Matcher(selector);\n    var sorter = new Minimongo.Sorter(sortSpec, {\n      matcher: matcher\n    });\n\n    var actual = sorter._keyCompatibleWithSelector(key);\n\n    test.equal(actual, compatible);\n  };\n\n  keyCompatible({\n    a: 1\n  }, {\n    a: 5\n  }, [5], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: 5\n  }, [8], false);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      x: 5\n    }\n  }, [{\n    x: 5\n  }], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      x: 5\n    }\n  }, [{\n    x: 5,\n    y: 9\n  }], false);\n  keyCompatible({\n    'a.x': 1\n  }, {\n    a: {\n      x: 5\n    }\n  }, [5], true); // To confirm this:\n  //   > db.x.insert({_id: \"q\", a: [{x:1}, {x:5}], b: 2})\n  //   > db.x.insert({_id: \"w\", a: [{x:5}, {x:10}], b: 1})\n  //   > db.x.find({}).sort({'a.x': 1, b: 1})\n  //   { \"_id\" : \"q\", \"a\" : [  {  \"x\" : 1 },  {  \"x\" : 5 } ], \"b\" : 2 }\n  //   { \"_id\" : \"w\", \"a\" : [  {  \"x\" : 5 },  {  \"x\" : 10 } ], \"b\" : 1 }\n  //   > db.x.find({a: {x:5}}).sort({'a.x': 1, b: 1})\n  //   { \"_id\" : \"q\", \"a\" : [  {  \"x\" : 1 },  {  \"x\" : 5 } ], \"b\" : 2 }\n  //   { \"_id\" : \"w\", \"a\" : [  {  \"x\" : 5 },  {  \"x\" : 10 } ], \"b\" : 1 }\n  //   > db.x.find({'a.x': 5}).sort({'a.x': 1, b: 1})\n  //   { \"_id\" : \"w\", \"a\" : [  {  \"x\" : 5 },  {  \"x\" : 10 } ], \"b\" : 1 }\n  //   { \"_id\" : \"q\", \"a\" : [  {  \"x\" : 1 },  {  \"x\" : 5 } ], \"b\" : 2 }\n  // ie, only the last one manages to trigger the key compatibility code,\n  // not the previous one.  (The \"b\" sort is necessary because when the key\n  // compatibility code *does* kick in, both documents only end up with \"5\"\n  // for the first field as their only sort key, and we need to differentiate\n  // somehow...)\n\n  keyCompatible({\n    'a.x': 1\n  }, {\n    a: {\n      x: 5\n    }\n  }, [1], true);\n  keyCompatible({\n    'a.x': 1\n  }, {\n    'a.x': 5\n  }, [5], true);\n  keyCompatible({\n    'a.x': 1\n  }, {\n    'a.x': 5\n  }, [1], false); // Regex key check.\n\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/\n  }, ['foo'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/\n  }, ['foooo'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/\n  }, ['foooobar'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/\n  }, ['afoooo'], false);\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/\n  }, [''], false);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\"\n    }\n  }, ['foo'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\"\n    }\n  }, ['foooo'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\"\n    }\n  }, ['foooobar'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\"\n    }\n  }, ['afoooo'], false);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\"\n    }\n  }, [''], false);\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/i\n  }, ['foo'], true); // Key compatibility check appears to be turned off for regexps with flags.\n\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/i\n  }, ['bar'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: /^foo+/m\n  }, ['bar'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\",\n      $options: \"i\"\n    }\n  }, ['bar'], true);\n  keyCompatible({\n    a: 1\n  }, {\n    a: {\n      $regex: \"^foo+\",\n      $options: \"m\"\n    }\n  }, ['bar'], true); // Multiple keys!\n\n  keyCompatible({\n    a: 1,\n    b: 1,\n    c: 1\n  }, {\n    a: {\n      $gt: 5\n    },\n    c: {\n      $lt: 3\n    }\n  }, [6, \"bla\", 2], true);\n  keyCompatible({\n    a: 1,\n    b: 1,\n    c: 1\n  }, {\n    a: {\n      $gt: 5\n    },\n    c: {\n      $lt: 3\n    }\n  }, [6, \"bla\", 4], false);\n  keyCompatible({\n    a: 1,\n    b: 1,\n    c: 1\n  }, {\n    a: {\n      $gt: 5\n    },\n    c: {\n      $lt: 3\n    }\n  }, [3, \"bla\", 1], false); // No filtering is done (ie, all keys are compatible) if the first key isn't\n  // constrained.\n\n  keyCompatible({\n    a: 1,\n    b: 1,\n    c: 1\n  }, {\n    c: {\n      $lt: 3\n    }\n  }, [3, \"bla\", 4], true);\n});\nTinytest.add(\"minimongo - sort function\", function (test) {\n  var c = new LocalCollection();\n  c.insert({\n    a: 1\n  });\n  c.insert({\n    a: 10\n  });\n  c.insert({\n    a: 5\n  });\n  c.insert({\n    a: 7\n  });\n  c.insert({\n    a: 2\n  });\n  c.insert({\n    a: 4\n  });\n  c.insert({\n    a: 3\n  });\n\n  var sortFunction = function (doc1, doc2) {\n    return doc2.a - doc1.a;\n  };\n\n  test.equal(c.find({}, {\n    sort: sortFunction\n  }).fetch(), c.find({}).fetch().sort(sortFunction));\n  test.notEqual(c.find({}).fetch(), c.find({}).fetch().sort(sortFunction));\n  test.equal(c.find({}, {\n    sort: {\n      a: -1\n    }\n  }).fetch(), c.find({}).fetch().sort(sortFunction));\n});\nTinytest.add(\"minimongo - binary search\", function (test) {\n  var forwardCmp = function (a, b) {\n    return a - b;\n  };\n\n  var backwardCmp = function (a, b) {\n    return -1 * forwardCmp(a, b);\n  };\n\n  var checkSearch = function (cmp, array, value, expected, message) {\n    var actual = LocalCollection._binarySearch(cmp, array, value);\n\n    if (expected != actual) {\n      test.fail({\n        type: \"minimongo-binary-search\",\n        message: message + \" : Expected index \" + expected + \" but had \" + actual\n      });\n    }\n  };\n\n  var checkSearchForward = function (array, value, expected, message) {\n    checkSearch(forwardCmp, array, value, expected, message);\n  };\n\n  var checkSearchBackward = function (array, value, expected, message) {\n    checkSearch(backwardCmp, array, value, expected, message);\n  };\n\n  checkSearchForward([1, 2, 5, 7], 4, 2, \"Inner insert\");\n  checkSearchForward([1, 2, 3, 4], 3, 3, \"Inner insert, equal value\");\n  checkSearchForward([1, 2, 5], 4, 2, \"Inner insert, odd length\");\n  checkSearchForward([1, 3, 5, 6], 9, 4, \"End insert\");\n  checkSearchForward([1, 3, 5, 6], 0, 0, \"Beginning insert\");\n  checkSearchForward([1], 0, 0, \"Single array, less than.\");\n  checkSearchForward([1], 1, 1, \"Single array, equal.\");\n  checkSearchForward([1], 2, 1, \"Single array, greater than.\");\n  checkSearchForward([], 1, 0, \"Empty array\");\n  checkSearchForward([1, 1, 1, 2, 2, 2, 2], 1, 3, \"Highly degenerate array, lower\");\n  checkSearchForward([1, 1, 1, 2, 2, 2, 2], 2, 7, \"Highly degenerate array, upper\");\n  checkSearchForward([2, 2, 2, 2, 2, 2, 2], 1, 0, \"Highly degenerate array, lower\");\n  checkSearchForward([2, 2, 2, 2, 2, 2, 2], 2, 7, \"Highly degenerate array, equal\");\n  checkSearchForward([2, 2, 2, 2, 2, 2, 2], 3, 7, \"Highly degenerate array, upper\");\n  checkSearchBackward([7, 5, 2, 1], 4, 2, \"Backward: Inner insert\");\n  checkSearchBackward([4, 3, 2, 1], 3, 2, \"Backward: Inner insert, equal value\");\n  checkSearchBackward([5, 2, 1], 4, 1, \"Backward: Inner insert, odd length\");\n  checkSearchBackward([6, 5, 3, 1], 9, 0, \"Backward: Beginning insert\");\n  checkSearchBackward([6, 5, 3, 1], 0, 4, \"Backward: End insert\");\n  checkSearchBackward([1], 0, 1, \"Backward: Single array, less than.\");\n  checkSearchBackward([1], 1, 1, \"Backward: Single array, equal.\");\n  checkSearchBackward([1], 2, 0, \"Backward: Single array, greater than.\");\n  checkSearchBackward([], 1, 0, \"Backward: Empty array\");\n  checkSearchBackward([2, 2, 2, 2, 1, 1, 1], 1, 7, \"Backward: Degenerate array, lower\");\n  checkSearchBackward([2, 2, 2, 2, 1, 1, 1], 2, 4, \"Backward: Degenerate array, upper\");\n  checkSearchBackward([2, 2, 2, 2, 2, 2, 2], 1, 7, \"Backward: Highly degenerate array, upper\");\n  checkSearchBackward([2, 2, 2, 2, 2, 2, 2], 2, 7, \"Backward: Highly degenerate array, upper\");\n  checkSearchBackward([2, 2, 2, 2, 2, 2, 2], 3, 0, \"Backward: Highly degenerate array, upper\");\n});\nTinytest.add(\"minimongo - modify\", function (test) {\n  var modifyWithQuery = function (doc, query, mod, expected) {\n    var coll = new LocalCollection();\n    coll.insert(doc); // The query is relevant for 'a.$.b'.\n\n    coll.update(query, mod);\n    var actual = coll.findOne();\n    delete actual._id; // added by insert\n\n    if (typeof expected === \"function\") {\n      expected(actual, EJSON.stringify({\n        input: doc,\n        mod: mod\n      }));\n    } else {\n      test.equal(actual, expected, EJSON.stringify({\n        input: doc,\n        mod: mod\n      }));\n    }\n  };\n\n  var modify = function (doc, mod, expected) {\n    modifyWithQuery(doc, {}, mod, expected);\n  };\n\n  var exceptionWithQuery = function (doc, query, mod) {\n    var coll = new LocalCollection();\n    coll.insert(doc);\n    test.throws(function () {\n      coll.update(query, mod);\n    });\n  };\n\n  var exception = function (doc, mod) {\n    exceptionWithQuery(doc, {}, mod);\n  };\n\n  var upsert = function (query, mod, expected) {\n    var coll = new LocalCollection();\n    var result = coll.upsert(query, mod);\n    var actual = coll.findOne();\n\n    if (expected._id) {\n      test.equal(result.insertedId, expected._id);\n    } else {\n      delete actual._id;\n    }\n\n    test.equal(actual, expected);\n  };\n\n  var upsertException = function (query, mod) {\n    var coll = new LocalCollection();\n    test.throws(function () {\n      coll.upsert(query, mod);\n    });\n  }; // document replacement\n\n\n  modify({}, {}, {});\n  modify({\n    a: 12\n  }, {}, {}); // tested against mongodb\n\n  modify({\n    a: 12\n  }, {\n    a: 13\n  }, {\n    a: 13\n  });\n  modify({\n    a: 12,\n    b: 99\n  }, {\n    a: 13\n  }, {\n    a: 13\n  });\n  exception({\n    a: 12\n  }, {\n    a: 13,\n    $set: {\n      b: 13\n    }\n  });\n  exception({\n    a: 12\n  }, {\n    $set: {\n      b: 13\n    },\n    a: 13\n  });\n  exception({\n    a: 12\n  }, {\n    $a: 13\n  }); //invalid operator\n\n  exception({\n    a: 12\n  }, {\n    b: {\n      $a: 13\n    }\n  });\n  exception({\n    a: 12\n  }, {\n    b: {\n      'a.b': 13\n    }\n  });\n  exception({\n    a: 12\n  }, {\n    b: {\n      '\\0a': 13\n    }\n  }); // keys\n\n  modify({}, {\n    $set: {\n      'a': 12\n    }\n  }, {\n    a: 12\n  });\n  modify({}, {\n    $set: {\n      'a.b': 12\n    }\n  }, {\n    a: {\n      b: 12\n    }\n  });\n  modify({}, {\n    $set: {\n      'a.b.c': 12\n    }\n  }, {\n    a: {\n      b: {\n        c: 12\n      }\n    }\n  });\n  modify({\n    a: {\n      d: 99\n    }\n  }, {\n    $set: {\n      'a.b.c': 12\n    }\n  }, {\n    a: {\n      d: 99,\n      b: {\n        c: 12\n      }\n    }\n  });\n  modify({}, {\n    $set: {\n      'a.b.3.c': 12\n    }\n  }, {\n    a: {\n      b: {\n        3: {\n          c: 12\n        }\n      }\n    }\n  });\n  modify({\n    a: {\n      b: []\n    }\n  }, {\n    $set: {\n      'a.b.3.c': 12\n    }\n  }, {\n    a: {\n      b: [null, null, null, {\n        c: 12\n      }]\n    }\n  });\n  exception({\n    a: [null, null, null]\n  }, {\n    $set: {\n      'a.1.b': 12\n    }\n  });\n  exception({\n    a: [null, 1, null]\n  }, {\n    $set: {\n      'a.1.b': 12\n    }\n  });\n  exception({\n    a: [null, \"x\", null]\n  }, {\n    $set: {\n      'a.1.b': 12\n    }\n  });\n  exception({\n    a: [null, [], null]\n  }, {\n    $set: {\n      'a.1.b': 12\n    }\n  });\n  modify({\n    a: [null, null, null]\n  }, {\n    $set: {\n      'a.3.b': 12\n    }\n  }, {\n    a: [null, null, null, {\n      b: 12\n    }]\n  });\n  exception({\n    a: []\n  }, {\n    $set: {\n      'a.b': 12\n    }\n  });\n  exception({\n    a: 12\n  }, {\n    $set: {\n      'a.b': 99\n    }\n  }); // tested on mongo\n\n  exception({\n    a: 'x'\n  }, {\n    $set: {\n      'a.b': 99\n    }\n  });\n  exception({\n    a: true\n  }, {\n    $set: {\n      'a.b': 99\n    }\n  });\n  exception({\n    a: null\n  }, {\n    $set: {\n      'a.b': 99\n    }\n  });\n  modify({\n    a: {}\n  }, {\n    $set: {\n      'a.3': 12\n    }\n  }, {\n    a: {\n      '3': 12\n    }\n  });\n  modify({\n    a: []\n  }, {\n    $set: {\n      'a.3': 12\n    }\n  }, {\n    a: [null, null, null, 12]\n  });\n  exception({}, {\n    $set: {\n      '': 12\n    }\n  }); // tested on mongo\n\n  exception({}, {\n    $set: {\n      '.': 12\n    }\n  }); // tested on mongo\n\n  exception({}, {\n    $set: {\n      'a.': 12\n    }\n  }); // tested on mongo\n\n  exception({}, {\n    $set: {\n      '. ': 12\n    }\n  }); // tested on mongo\n\n  exception({}, {\n    $inc: {\n      '... ': 12\n    }\n  }); // tested on mongo\n\n  exception({}, {\n    $set: {\n      'a..b': 12\n    }\n  }); // tested on mongo\n\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $set: {\n      'a.01': 99\n    }\n  }, {\n    a: [1, 99, 3]\n  });\n  modify({\n    a: [1, {\n      a: 98\n    }, 3]\n  }, {\n    $set: {\n      'a.01.b': 99\n    }\n  }, {\n    a: [1, {\n      a: 98,\n      b: 99\n    }, 3]\n  });\n  modify({}, {\n    $set: {\n      '2.a.b': 12\n    }\n  }, {\n    '2': {\n      'a': {\n        'b': 12\n      }\n    }\n  }); // tested\n\n  exception({\n    x: []\n  }, {\n    $set: {\n      'x.2..a': 99\n    }\n  });\n  modify({\n    x: [null, null]\n  }, {\n    $set: {\n      'x.2.a': 1\n    }\n  }, {\n    x: [null, null, {\n      a: 1\n    }]\n  });\n  exception({\n    x: [null, null]\n  }, {\n    $set: {\n      'x.1.a': 1\n    }\n  }); // a.$.b\n\n  modifyWithQuery({\n    a: [{\n      x: 2\n    }, {\n      x: 4\n    }]\n  }, {\n    'a.x': 4\n  }, {\n    $set: {\n      'a.$.z': 9\n    }\n  }, {\n    a: [{\n      x: 2\n    }, {\n      x: 4,\n      z: 9\n    }]\n  });\n  exception({\n    a: [{\n      x: 2\n    }, {\n      x: 4\n    }]\n  }, {\n    $set: {\n      'a.$.z': 9\n    }\n  });\n  exceptionWithQuery({\n    a: [{\n      x: 2\n    }, {\n      x: 4\n    }],\n    b: 5\n  }, {\n    b: 5\n  }, {\n    $set: {\n      'a.$.z': 9\n    }\n  }); // can't have two $\n\n  exceptionWithQuery({\n    a: [{\n      x: [2]\n    }]\n  }, {\n    'a.x': 2\n  }, {\n    $set: {\n      'a.$.x.$': 9\n    }\n  });\n  modifyWithQuery({\n    a: [5, 6, 7]\n  }, {\n    a: 6\n  }, {\n    $set: {\n      'a.$': 9\n    }\n  }, {\n    a: [5, 9, 7]\n  });\n  modifyWithQuery({\n    a: [{\n      b: [{\n        c: 9\n      }, {\n        c: 10\n      }]\n    }, {\n      b: {\n        c: 11\n      }\n    }]\n  }, {\n    'a.b.c': 10\n  }, {\n    $unset: {\n      'a.$.b': 1\n    }\n  }, {\n    a: [{}, {\n      b: {\n        c: 11\n      }\n    }]\n  });\n  modifyWithQuery({\n    a: [{\n      b: [{\n        c: 9\n      }, {\n        c: 10\n      }]\n    }, {\n      b: {\n        c: 11\n      }\n    }]\n  }, {\n    'a.b.c': 11\n  }, {\n    $unset: {\n      'a.$.b': 1\n    }\n  }, {\n    a: [{\n      b: [{\n        c: 9\n      }, {\n        c: 10\n      }]\n    }, {}]\n  });\n  modifyWithQuery({\n    a: [1]\n  }, {\n    'a.0': 1\n  }, {\n    $set: {\n      'a.$': 5\n    }\n  }, {\n    a: [5]\n  });\n  modifyWithQuery({\n    a: [9]\n  }, {\n    a: {\n      $mod: [2, 1]\n    }\n  }, {\n    $set: {\n      'a.$': 5\n    }\n  }, {\n    a: [5]\n  }); // Negatives don't set '$'.\n\n  exceptionWithQuery({\n    a: [1]\n  }, {\n    $not: {\n      a: 2\n    }\n  }, {\n    $set: {\n      'a.$': 5\n    }\n  });\n  exceptionWithQuery({\n    a: [1]\n  }, {\n    'a.0': {\n      $ne: 2\n    }\n  }, {\n    $set: {\n      'a.$': 5\n    }\n  }); // One $or clause works.\n\n  modifyWithQuery({\n    a: [{\n      x: 2\n    }, {\n      x: 4\n    }]\n  }, {\n    $or: [{\n      'a.x': 4\n    }]\n  }, {\n    $set: {\n      'a.$.z': 9\n    }\n  }, {\n    a: [{\n      x: 2\n    }, {\n      x: 4,\n      z: 9\n    }]\n  }); // More $or clauses throw.\n\n  exceptionWithQuery({\n    a: [{\n      x: 2\n    }, {\n      x: 4\n    }]\n  }, {\n    $or: [{\n      'a.x': 4\n    }, {\n      'a.x': 4\n    }]\n  }, {\n    $set: {\n      'a.$.z': 9\n    }\n  }); // $and uses the last one.\n\n  modifyWithQuery({\n    a: [{\n      x: 1\n    }, {\n      x: 3\n    }]\n  }, {\n    $and: [{\n      'a.x': 1\n    }, {\n      'a.x': 3\n    }]\n  }, {\n    $set: {\n      'a.$.x': 5\n    }\n  }, {\n    a: [{\n      x: 1\n    }, {\n      x: 5\n    }]\n  });\n  modifyWithQuery({\n    a: [{\n      x: 1\n    }, {\n      x: 3\n    }]\n  }, {\n    $and: [{\n      'a.x': 3\n    }, {\n      'a.x': 1\n    }]\n  }, {\n    $set: {\n      'a.$.x': 5\n    }\n  }, {\n    a: [{\n      x: 5\n    }, {\n      x: 3\n    }]\n  }); // Same goes for the implicit AND of a document selector.\n\n  modifyWithQuery({\n    a: [{\n      x: 1\n    }, {\n      y: 3\n    }]\n  }, {\n    'a.x': 1,\n    'a.y': 3\n  }, {\n    $set: {\n      'a.$.z': 5\n    }\n  }, {\n    a: [{\n      x: 1\n    }, {\n      y: 3,\n      z: 5\n    }]\n  }); // with $near, make sure it finds the closest one\n\n  modifyWithQuery({\n    a: [{\n      b: [1, 1]\n    }, {\n      b: [[3, 3], [4, 4]]\n    }, {\n      b: [9, 9]\n    }]\n  }, {\n    'a.b': {\n      $near: [5, 5]\n    }\n  }, {\n    $set: {\n      'a.$.b': 'k'\n    }\n  }, {\n    a: [{\n      b: [1, 1]\n    }, {\n      b: 'k'\n    }, {\n      b: [9, 9]\n    }]\n  });\n  modifyWithQuery({\n    a: [{\n      x: 1\n    }, {\n      y: 1\n    }, {\n      x: 1,\n      y: 1\n    }]\n  }, {\n    a: {\n      $elemMatch: {\n        x: 1,\n        y: 1\n      }\n    }\n  }, {\n    $set: {\n      'a.$.x': 2\n    }\n  }, {\n    a: [{\n      x: 1\n    }, {\n      y: 1\n    }, {\n      x: 2,\n      y: 1\n    }]\n  });\n  modifyWithQuery({\n    a: [{\n      b: [{\n        x: 1\n      }, {\n        y: 1\n      }, {\n        x: 1,\n        y: 1\n      }]\n    }]\n  }, {\n    'a.b': {\n      $elemMatch: {\n        x: 1,\n        y: 1\n      }\n    }\n  }, {\n    $set: {\n      'a.$.b': 3\n    }\n  }, {\n    a: [{\n      b: 3\n    }]\n  }); // $inc\n\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $inc: {\n      a: 10\n    }\n  }, {\n    a: 11,\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $inc: {\n      c: 10\n    }\n  }, {\n    a: 1,\n    b: 2,\n    c: 10\n  });\n  exception({\n    a: 1\n  }, {\n    $inc: {\n      a: '10'\n    }\n  });\n  exception({\n    a: 1\n  }, {\n    $inc: {\n      a: true\n    }\n  });\n  exception({\n    a: 1\n  }, {\n    $inc: {\n      a: [10]\n    }\n  });\n  exception({\n    a: '1'\n  }, {\n    $inc: {\n      a: 10\n    }\n  });\n  exception({\n    a: [1]\n  }, {\n    $inc: {\n      a: 10\n    }\n  });\n  exception({\n    a: {}\n  }, {\n    $inc: {\n      a: 10\n    }\n  });\n  exception({\n    a: false\n  }, {\n    $inc: {\n      a: 10\n    }\n  });\n  exception({\n    a: null\n  }, {\n    $inc: {\n      a: 10\n    }\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $inc: {\n      'a.1': 10\n    }\n  }, {\n    a: [1, 12]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $inc: {\n      'a.2': 10\n    }\n  }, {\n    a: [1, 2, 10]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $inc: {\n      'a.3': 10\n    }\n  }, {\n    a: [1, 2, null, 10]\n  });\n  modify({\n    a: {\n      b: 2\n    }\n  }, {\n    $inc: {\n      'a.b': 10\n    }\n  }, {\n    a: {\n      b: 12\n    }\n  });\n  modify({\n    a: {\n      b: 2\n    }\n  }, {\n    $inc: {\n      'a.c': 10\n    }\n  }, {\n    a: {\n      b: 2,\n      c: 10\n    }\n  });\n  exception({}, {\n    $inc: {\n      _id: 1\n    }\n  }); // $currentDate\n\n  modify({}, {\n    $currentDate: {\n      a: true\n    }\n  }, function (result, msg) {\n    test.instanceOf(result.a, Date, msg);\n  });\n  modify({}, {\n    $currentDate: {\n      a: {\n        $type: \"date\"\n      }\n    }\n  }, function (result, msg) {\n    test.instanceOf(result.a, Date, msg);\n  });\n  exception({}, {\n    $currentDate: {\n      a: false\n    }\n  });\n  exception({}, {\n    $currentDate: {\n      a: {}\n    }\n  });\n  exception({}, {\n    $currentDate: {\n      a: {\n        $type: \"timestamp\"\n      }\n    }\n  }); // $min\n\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $min: {\n      b: 1\n    }\n  }, {\n    a: 1,\n    b: 1\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $min: {\n      b: 3\n    }\n  }, {\n    a: 1,\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $min: {\n      c: 10\n    }\n  }, {\n    a: 1,\n    b: 2,\n    c: 10\n  });\n  exception({\n    a: 1\n  }, {\n    $min: {\n      a: '10'\n    }\n  });\n  exception({\n    a: 1\n  }, {\n    $min: {\n      a: true\n    }\n  });\n  exception({\n    a: 1\n  }, {\n    $min: {\n      a: [10]\n    }\n  });\n  exception({\n    a: '1'\n  }, {\n    $min: {\n      a: 10\n    }\n  });\n  exception({\n    a: [1]\n  }, {\n    $min: {\n      a: 10\n    }\n  });\n  exception({\n    a: {}\n  }, {\n    $min: {\n      a: 10\n    }\n  });\n  exception({\n    a: false\n  }, {\n    $min: {\n      a: 10\n    }\n  });\n  exception({\n    a: null\n  }, {\n    $min: {\n      a: 10\n    }\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $min: {\n      'a.1': 1\n    }\n  }, {\n    a: [1, 1]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $min: {\n      'a.1': 3\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $min: {\n      'a.2': 10\n    }\n  }, {\n    a: [1, 2, 10]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $min: {\n      'a.3': 10\n    }\n  }, {\n    a: [1, 2, null, 10]\n  });\n  modify({\n    a: {\n      b: 2\n    }\n  }, {\n    $min: {\n      'a.b': 1\n    }\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  modify({\n    a: {\n      b: 2\n    }\n  }, {\n    $min: {\n      'a.c': 10\n    }\n  }, {\n    a: {\n      b: 2,\n      c: 10\n    }\n  });\n  exception({}, {\n    $min: {\n      _id: 1\n    }\n  }); // $max\n\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $max: {\n      b: 1\n    }\n  }, {\n    a: 1,\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $max: {\n      b: 3\n    }\n  }, {\n    a: 1,\n    b: 3\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $max: {\n      c: 10\n    }\n  }, {\n    a: 1,\n    b: 2,\n    c: 10\n  });\n  exception({\n    a: 1\n  }, {\n    $max: {\n      a: '10'\n    }\n  });\n  exception({\n    a: 1\n  }, {\n    $max: {\n      a: true\n    }\n  });\n  exception({\n    a: 1\n  }, {\n    $max: {\n      a: [10]\n    }\n  });\n  exception({\n    a: '1'\n  }, {\n    $max: {\n      a: 10\n    }\n  });\n  exception({\n    a: [1]\n  }, {\n    $max: {\n      a: 10\n    }\n  });\n  exception({\n    a: {}\n  }, {\n    $max: {\n      a: 10\n    }\n  });\n  exception({\n    a: false\n  }, {\n    $max: {\n      a: 10\n    }\n  });\n  exception({\n    a: null\n  }, {\n    $max: {\n      a: 10\n    }\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $max: {\n      'a.1': 3\n    }\n  }, {\n    a: [1, 3]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $max: {\n      'a.1': 1\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $max: {\n      'a.2': 10\n    }\n  }, {\n    a: [1, 2, 10]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $max: {\n      'a.3': 10\n    }\n  }, {\n    a: [1, 2, null, 10]\n  });\n  modify({\n    a: {\n      b: 2\n    }\n  }, {\n    $max: {\n      'a.b': 3\n    }\n  }, {\n    a: {\n      b: 3\n    }\n  });\n  modify({\n    a: {\n      b: 2\n    }\n  }, {\n    $max: {\n      'a.c': 10\n    }\n  }, {\n    a: {\n      b: 2,\n      c: 10\n    }\n  });\n  exception({}, {\n    $max: {\n      _id: 1\n    }\n  }); // $set\n\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $set: {\n      a: 10\n    }\n  }, {\n    a: 10,\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $set: {\n      c: 10\n    }\n  }, {\n    a: 1,\n    b: 2,\n    c: 10\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $set: {\n      a: {\n        c: 10\n      }\n    }\n  }, {\n    a: {\n      c: 10\n    },\n    b: 2\n  });\n  modify({\n    a: [1, 2],\n    b: 2\n  }, {\n    $set: {\n      a: [3, 4]\n    }\n  }, {\n    a: [3, 4],\n    b: 2\n  });\n  modify({\n    a: [1, 2, 3],\n    b: 2\n  }, {\n    $set: {\n      'a.1': [3, 4]\n    }\n  }, {\n    a: [1, [3, 4], 3],\n    b: 2\n  });\n  modify({\n    a: [1],\n    b: 2\n  }, {\n    $set: {\n      'a.1': 9\n    }\n  }, {\n    a: [1, 9],\n    b: 2\n  });\n  modify({\n    a: [1],\n    b: 2\n  }, {\n    $set: {\n      'a.2': 9\n    }\n  }, {\n    a: [1, null, 9],\n    b: 2\n  });\n  modify({\n    a: {\n      b: 1\n    }\n  }, {\n    $set: {\n      'a.c': 9\n    }\n  }, {\n    a: {\n      b: 1,\n      c: 9\n    }\n  });\n  modify({}, {\n    $set: {\n      'x._id': 4\n    }\n  }, {\n    x: {\n      _id: 4\n    }\n  });\n  exception({}, {\n    $set: {\n      _id: 4\n    }\n  });\n  exception({\n    _id: 4\n  }, {\n    $set: {\n      _id: 4\n    }\n  }); // even not-changing _id is bad\n  //restricted field names\n\n  exception({\n    a: {}\n  }, {\n    $set: {\n      a: {\n        $a: 1\n      }\n    }\n  });\n  exception({\n    a: {}\n  }, {\n    $set: {\n      a: {\n        c: [{\n          b: {\n            $a: 1\n          }\n        }]\n      }\n    }\n  });\n  exception({\n    a: {}\n  }, {\n    $set: {\n      a: {\n        '\\0a': 1\n      }\n    }\n  });\n  exception({\n    a: {}\n  }, {\n    $set: {\n      a: {\n        'a.b': 1\n      }\n    }\n  }); // $unset\n\n  modify({}, {\n    $unset: {\n      a: 1\n    }\n  }, {});\n  modify({\n    a: 1\n  }, {\n    $unset: {\n      a: 1\n    }\n  }, {});\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $unset: {\n      a: 1\n    }\n  }, {\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $unset: {\n      a: 0\n    }\n  }, {\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $unset: {\n      a: false\n    }\n  }, {\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $unset: {\n      a: null\n    }\n  }, {\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $unset: {\n      a: [1]\n    }\n  }, {\n    b: 2\n  });\n  modify({\n    a: 1,\n    b: 2\n  }, {\n    $unset: {\n      a: {}\n    }\n  }, {\n    b: 2\n  });\n  modify({\n    a: {\n      b: 2,\n      c: 3\n    }\n  }, {\n    $unset: {\n      'a.b': 1\n    }\n  }, {\n    a: {\n      c: 3\n    }\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $unset: {\n      'a.1': 1\n    }\n  }, {\n    a: [1, null, 3]\n  }); // tested\n\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $unset: {\n      'a.2': 1\n    }\n  }, {\n    a: [1, 2, null]\n  }); // tested\n\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $unset: {\n      'a.x': 1\n    }\n  }, {\n    a: [1, 2, 3]\n  }); // tested\n\n  modify({\n    a: {\n      b: 1\n    }\n  }, {\n    $unset: {\n      'a.b.c.d': 1\n    }\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  modify({\n    a: {\n      b: 1\n    }\n  }, {\n    $unset: {\n      'a.x.c.d': 1\n    }\n  }, {\n    a: {\n      b: 1\n    }\n  });\n  modify({\n    a: {\n      b: {\n        c: 1\n      }\n    }\n  }, {\n    $unset: {\n      'a.b.c': 1\n    }\n  }, {\n    a: {\n      b: {}\n    }\n  });\n  exception({}, {\n    $unset: {\n      _id: 1\n    }\n  }); // $push\n\n  modify({}, {\n    $push: {\n      a: 1\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: []\n  }, {\n    $push: {\n      a: 1\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: [1]\n  }, {\n    $push: {\n      a: 2\n    }\n  }, {\n    a: [1, 2]\n  });\n  exception({\n    a: true\n  }, {\n    $push: {\n      a: 1\n    }\n  });\n  modify({\n    a: [1]\n  }, {\n    $push: {\n      a: [2]\n    }\n  }, {\n    a: [1, [2]]\n  });\n  modify({\n    a: []\n  }, {\n    $push: {\n      'a.1': 99\n    }\n  }, {\n    a: [null, [99]]\n  }); // tested\n\n  modify({\n    a: {}\n  }, {\n    $push: {\n      'a.x': 99\n    }\n  }, {\n    a: {\n      x: [99]\n    }\n  });\n  modify({}, {\n    $push: {\n      a: {\n        $each: [1, 2, 3]\n      }\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({\n    a: []\n  }, {\n    $push: {\n      a: {\n        $each: [1, 2, 3]\n      }\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({\n    a: [true]\n  }, {\n    $push: {\n      a: {\n        $each: [1, 2, 3]\n      }\n    }\n  }, {\n    a: [true, 1, 2, 3]\n  }); // No positive numbers for $slice\n\n  exception({}, {\n    $push: {\n      a: {\n        $each: [],\n        $slice: 5\n      }\n    }\n  });\n  modify({\n    a: [true]\n  }, {\n    $push: {\n      a: {\n        $each: [1, 2, 3],\n        $slice: -2\n      }\n    }\n  }, {\n    a: [2, 3]\n  });\n  modify({\n    a: [false, true]\n  }, {\n    $push: {\n      a: {\n        $each: [1],\n        $slice: -2\n      }\n    }\n  }, {\n    a: [true, 1]\n  });\n  modify({\n    a: [{\n      x: 3\n    }, {\n      x: 1\n    }]\n  }, {\n    $push: {\n      a: {\n        $each: [{\n          x: 4\n        }, {\n          x: 2\n        }],\n        $slice: -2,\n        $sort: {\n          x: 1\n        }\n      }\n    }\n  }, {\n    a: [{\n      x: 3\n    }, {\n      x: 4\n    }]\n  });\n  modify({}, {\n    $push: {\n      a: {\n        $each: [1, 2, 3],\n        $slice: 0\n      }\n    }\n  }, {\n    a: []\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $push: {\n      a: {\n        $each: [1, 2, 3],\n        $slice: 0\n      }\n    }\n  }, {\n    a: []\n  }); // $push with $position modifier\n  // No negative number for $position\n\n  exception({\n    a: []\n  }, {\n    $push: {\n      a: {\n        $each: [0],\n        $position: -1\n      }\n    }\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $push: {\n      a: {\n        $each: [0],\n        $position: 0\n      }\n    }\n  }, {\n    a: [0, 1, 2]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $push: {\n      a: {\n        $each: [-1, 0],\n        $position: 0\n      }\n    }\n  }, {\n    a: [-1, 0, 1, 2]\n  });\n  modify({\n    a: [1, 3]\n  }, {\n    $push: {\n      a: {\n        $each: [2],\n        $position: 1\n      }\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({\n    a: [1, 4]\n  }, {\n    $push: {\n      a: {\n        $each: [2, 3],\n        $position: 1\n      }\n    }\n  }, {\n    a: [1, 2, 3, 4]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $push: {\n      a: {\n        $each: [3],\n        $position: 3\n      }\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $push: {\n      a: {\n        $each: [3],\n        $position: 99\n      }\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $push: {\n      a: {\n        $each: [3],\n        $position: 99,\n        $slice: -2\n      }\n    }\n  }, {\n    a: [2, 3]\n  });\n  modify({\n    a: [{\n      x: 1\n    }, {\n      x: 2\n    }]\n  }, {\n    $push: {\n      a: {\n        $each: [{\n          x: 3\n        }],\n        $position: 0,\n        $sort: {\n          x: 1\n        },\n        $slice: -3\n      }\n    }\n  }, {\n    a: [{\n      x: 1\n    }, {\n      x: 2\n    }, {\n      x: 3\n    }]\n  });\n  modify({\n    a: [{\n      x: 1\n    }, {\n      x: 2\n    }]\n  }, {\n    $push: {\n      a: {\n        $each: [{\n          x: 3\n        }],\n        $position: 0,\n        $sort: {\n          x: 1\n        },\n        $slice: 0\n      }\n    }\n  }, {\n    a: []\n  }); //restricted field names\n\n  exception({}, {\n    $push: {\n      $a: 1\n    }\n  });\n  exception({}, {\n    $push: {\n      '\\0a': 1\n    }\n  });\n  exception({}, {\n    $push: {\n      a: {\n        $a: 1\n      }\n    }\n  });\n  exception({}, {\n    $push: {\n      a: {\n        $each: [{\n          $a: 1\n        }]\n      }\n    }\n  });\n  exception({}, {\n    $push: {\n      a: {\n        $each: [{\n          \"a.b\": 1\n        }]\n      }\n    }\n  });\n  exception({}, {\n    $push: {\n      a: {\n        $each: [{\n          '\\0a': 1\n        }]\n      }\n    }\n  });\n  modify({}, {\n    $push: {\n      a: {\n        $each: [{\n          '': 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      '': 1\n    }]\n  });\n  modify({}, {\n    $push: {\n      a: {\n        $each: [{\n          ' ': 1\n        }]\n      }\n    }\n  }, {\n    a: [{\n      ' ': 1\n    }]\n  });\n  exception({}, {\n    $push: {\n      a: {\n        $each: [{\n          '.': 1\n        }]\n      }\n    }\n  }); // $pushAll\n\n  modify({}, {\n    $pushAll: {\n      a: [1]\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: []\n  }, {\n    $pushAll: {\n      a: [1]\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: [1]\n  }, {\n    $pushAll: {\n      a: [2]\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({}, {\n    $pushAll: {\n      a: [1, 2]\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: []\n  }, {\n    $pushAll: {\n      a: [1, 2]\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1]\n  }, {\n    $pushAll: {\n      a: [2, 3]\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({}, {\n    $pushAll: {\n      a: []\n    }\n  }, {\n    a: []\n  });\n  modify({\n    a: []\n  }, {\n    $pushAll: {\n      a: []\n    }\n  }, {\n    a: []\n  });\n  modify({\n    a: [1]\n  }, {\n    $pushAll: {\n      a: []\n    }\n  }, {\n    a: [1]\n  });\n  exception({\n    a: true\n  }, {\n    $pushAll: {\n      a: [1]\n    }\n  });\n  exception({\n    a: []\n  }, {\n    $pushAll: {\n      a: 1\n    }\n  });\n  modify({\n    a: []\n  }, {\n    $pushAll: {\n      'a.1': [99]\n    }\n  }, {\n    a: [null, [99]]\n  });\n  modify({\n    a: []\n  }, {\n    $pushAll: {\n      'a.1': []\n    }\n  }, {\n    a: [null, []]\n  });\n  modify({\n    a: {}\n  }, {\n    $pushAll: {\n      'a.x': [99]\n    }\n  }, {\n    a: {\n      x: [99]\n    }\n  });\n  modify({\n    a: {}\n  }, {\n    $pushAll: {\n      'a.x': []\n    }\n  }, {\n    a: {\n      x: []\n    }\n  });\n  exception({\n    a: [1]\n  }, {\n    $pushAll: {\n      a: [{\n        $a: 1\n      }]\n    }\n  });\n  exception({\n    a: [1]\n  }, {\n    $pushAll: {\n      a: [{\n        '\\0a': 1\n      }]\n    }\n  });\n  exception({\n    a: [1]\n  }, {\n    $pushAll: {\n      a: [{\n        \"a.b\": 1\n      }]\n    }\n  }); // $addToSet\n\n  modify({}, {\n    $addToSet: {\n      a: 1\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: []\n  }, {\n    $addToSet: {\n      a: 1\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: [1]\n  }, {\n    $addToSet: {\n      a: 2\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: 1\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: 2\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: 3\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  exception({\n    a: true\n  }, {\n    $addToSet: {\n      a: 1\n    }\n  });\n  modify({\n    a: [1]\n  }, {\n    $addToSet: {\n      a: [2]\n    }\n  }, {\n    a: [1, [2]]\n  });\n  modify({}, {\n    $addToSet: {\n      a: {\n        x: 1\n      }\n    }\n  }, {\n    a: [{\n      x: 1\n    }]\n  });\n  modify({\n    a: [{\n      x: 1\n    }]\n  }, {\n    $addToSet: {\n      a: {\n        x: 1\n      }\n    }\n  }, {\n    a: [{\n      x: 1\n    }]\n  });\n  modify({\n    a: [{\n      x: 1\n    }]\n  }, {\n    $addToSet: {\n      a: {\n        x: 2\n      }\n    }\n  }, {\n    a: [{\n      x: 1\n    }, {\n      x: 2\n    }]\n  });\n  modify({\n    a: [{\n      x: 1,\n      y: 2\n    }]\n  }, {\n    $addToSet: {\n      a: {\n        x: 1,\n        y: 2\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      y: 2\n    }]\n  });\n  modify({\n    a: [{\n      x: 1,\n      y: 2\n    }]\n  }, {\n    $addToSet: {\n      a: {\n        y: 2,\n        x: 1\n      }\n    }\n  }, {\n    a: [{\n      x: 1,\n      y: 2\n    }, {\n      y: 2,\n      x: 1\n    }]\n  });\n  modify({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        $each: [3, 1, 4]\n      }\n    }\n  }, {\n    a: [1, 2, 3, 4]\n  });\n  modify({}, {\n    $addToSet: {\n      a: {\n        $each: []\n      }\n    }\n  }, {\n    a: []\n  });\n  modify({}, {\n    $addToSet: {\n      a: {\n        $each: [1]\n      }\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: []\n  }, {\n    $addToSet: {\n      'a.1': 99\n    }\n  }, {\n    a: [null, [99]]\n  });\n  modify({\n    a: {}\n  }, {\n    $addToSet: {\n      'a.x': 99\n    }\n  }, {\n    a: {\n      x: [99]\n    }\n  }); // invalid field names\n\n  exception({}, {\n    $addToSet: {\n      a: {\n        $b: 1\n      }\n    }\n  });\n  exception({}, {\n    $addToSet: {\n      a: {\n        \"a.b\": 1\n      }\n    }\n  });\n  exception({}, {\n    $addToSet: {\n      a: {\n        \"a.\": 1\n      }\n    }\n  });\n  exception({}, {\n    $addToSet: {\n      a: {\n        \"\\0a\": 1\n      }\n    }\n  });\n  exception({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        $each: [3, 1, {\n          $a: 1\n        }]\n      }\n    }\n  });\n  exception({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        $each: [3, 1, {\n          '\\0a': 1\n        }]\n      }\n    }\n  });\n  exception({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        $each: [3, 1, [{\n          $a: 1\n        }]]\n      }\n    }\n  });\n  exception({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        $each: [3, 1, [{\n          b: {\n            c: [{\n              a: 1\n            }, {\n              \"d.s\": 2\n            }]\n          }\n        }]]\n      }\n    }\n  });\n  exception({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        b: [3, 1, [{\n          b: {\n            c: [{\n              a: 1\n            }, {\n              \"d.s\": 2\n            }]\n          }\n        }]]\n      }\n    }\n  }); //$each is first element and thus an operator\n\n  modify({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        $each: [3, 1, 4],\n        b: 12\n      }\n    }\n  }, {\n    a: [1, 2, 3, 4]\n  }); // this should fail because $each is now a field name (not first in object) and thus invalid field name with $\n\n  exception({\n    a: [1, 2]\n  }, {\n    $addToSet: {\n      a: {\n        b: 12,\n        $each: [3, 1, 4]\n      }\n    }\n  }); // $pop\n\n  modify({}, {\n    $pop: {\n      a: 1\n    }\n  }, {}); // tested\n\n  modify({}, {\n    $pop: {\n      a: -1\n    }\n  }, {}); // tested\n\n  modify({\n    a: []\n  }, {\n    $pop: {\n      a: 1\n    }\n  }, {\n    a: []\n  });\n  modify({\n    a: []\n  }, {\n    $pop: {\n      a: -1\n    }\n  }, {\n    a: []\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: 1\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: 10\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: .001\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: 0\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: \"stuff\"\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: -1\n    }\n  }, {\n    a: [2, 3]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: -10\n    }\n  }, {\n    a: [2, 3]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pop: {\n      a: -.001\n    }\n  }, {\n    a: [2, 3]\n  });\n  exception({\n    a: true\n  }, {\n    $pop: {\n      a: 1\n    }\n  });\n  exception({\n    a: true\n  }, {\n    $pop: {\n      a: -1\n    }\n  });\n  modify({\n    a: []\n  }, {\n    $pop: {\n      'a.1': 1\n    }\n  }, {\n    a: []\n  }); // tested\n\n  modify({\n    a: [1, [2, 3], 4]\n  }, {\n    $pop: {\n      'a.1': 1\n    }\n  }, {\n    a: [1, [2], 4]\n  });\n  modify({\n    a: {}\n  }, {\n    $pop: {\n      'a.x': 1\n    }\n  }, {\n    a: {}\n  }); // tested\n\n  modify({\n    a: {\n      x: [2, 3]\n    }\n  }, {\n    $pop: {\n      'a.x': 1\n    }\n  }, {\n    a: {\n      x: [2]\n    }\n  }); // $pull\n\n  modify({}, {\n    $pull: {\n      a: 1\n    }\n  }, {});\n  modify({}, {\n    $pull: {\n      'a.x': 1\n    }\n  }, {});\n  modify({\n    a: {}\n  }, {\n    $pull: {\n      'a.x': 1\n    }\n  }, {\n    a: {}\n  });\n  exception({\n    a: true\n  }, {\n    $pull: {\n      a: 1\n    }\n  });\n  modify({\n    a: [2, 1, 2]\n  }, {\n    $pull: {\n      a: 1\n    }\n  }, {\n    a: [2, 2]\n  });\n  modify({\n    a: [2, 1, 2]\n  }, {\n    $pull: {\n      a: 2\n    }\n  }, {\n    a: [1]\n  });\n  modify({\n    a: [2, 1, 2]\n  }, {\n    $pull: {\n      a: 3\n    }\n  }, {\n    a: [2, 1, 2]\n  });\n  modify({\n    a: [1, null, 2, null]\n  }, {\n    $pull: {\n      a: null\n    }\n  }, {\n    a: [1, 2]\n  });\n  modify({\n    a: []\n  }, {\n    $pull: {\n      a: 3\n    }\n  }, {\n    a: []\n  });\n  modify({\n    a: [[2], [2, 1], [3]]\n  }, {\n    $pull: {\n      a: [2, 1]\n    }\n  }, {\n    a: [[2], [3]]\n  }); // tested\n\n  modify({\n    a: [{\n      b: 1,\n      c: 2\n    }, {\n      b: 2,\n      c: 2\n    }]\n  }, {\n    $pull: {\n      a: {\n        b: 1\n      }\n    }\n  }, {\n    a: [{\n      b: 2,\n      c: 2\n    }]\n  });\n  modify({\n    a: [{\n      b: 1,\n      c: 2\n    }, {\n      b: 2,\n      c: 2\n    }]\n  }, {\n    $pull: {\n      a: {\n        c: 2\n      }\n    }\n  }, {\n    a: []\n  }); // XXX implement this functionality!\n  // probably same refactoring as $elemMatch?\n  // modify({a: [1, 2, 3, 4]}, {$pull: {$gt: 2}}, {a: [1,2]}); fails!\n  // $pullAll\n\n  modify({}, {\n    $pullAll: {\n      a: [1]\n    }\n  }, {});\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pullAll: {\n      a: []\n    }\n  }, {\n    a: [1, 2, 3]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pullAll: {\n      a: [2]\n    }\n  }, {\n    a: [1, 3]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pullAll: {\n      a: [2, 1]\n    }\n  }, {\n    a: [3]\n  });\n  modify({\n    a: [1, 2, 3]\n  }, {\n    $pullAll: {\n      a: [1, 2]\n    }\n  }, {\n    a: [3]\n  });\n  modify({}, {\n    $pullAll: {\n      'a.b.c': [2]\n    }\n  }, {});\n  exception({\n    a: true\n  }, {\n    $pullAll: {\n      a: [1]\n    }\n  });\n  exception({\n    a: [1, 2, 3]\n  }, {\n    $pullAll: {\n      a: 1\n    }\n  });\n  modify({\n    x: [{\n      a: 1\n    }, {\n      a: 1,\n      b: 2\n    }]\n  }, {\n    $pullAll: {\n      x: [{\n        a: 1\n      }]\n    }\n  }, {\n    x: [{\n      a: 1,\n      b: 2\n    }]\n  }); // $rename\n\n  modify({}, {\n    $rename: {\n      a: 'b'\n    }\n  }, {});\n  modify({\n    a: [12]\n  }, {\n    $rename: {\n      a: 'b'\n    }\n  }, {\n    b: [12]\n  });\n  modify({\n    a: {\n      b: 12\n    }\n  }, {\n    $rename: {\n      a: 'c'\n    }\n  }, {\n    c: {\n      b: 12\n    }\n  });\n  modify({\n    a: {\n      b: 12\n    }\n  }, {\n    $rename: {\n      'a.b': 'a.c'\n    }\n  }, {\n    a: {\n      c: 12\n    }\n  });\n  modify({\n    a: {\n      b: 12\n    }\n  }, {\n    $rename: {\n      'a.b': 'x'\n    }\n  }, {\n    a: {},\n    x: 12\n  }); // tested\n\n  modify({\n    a: {\n      b: 12\n    }\n  }, {\n    $rename: {\n      'a.b': 'q.r'\n    }\n  }, {\n    a: {},\n    q: {\n      r: 12\n    }\n  });\n  modify({\n    a: {\n      b: 12\n    }\n  }, {\n    $rename: {\n      'a.b': 'q.2.r'\n    }\n  }, {\n    a: {},\n    q: {\n      2: {\n        r: 12\n      }\n    }\n  });\n  modify({\n    a: {\n      b: 12\n    },\n    q: {}\n  }, {\n    $rename: {\n      'a.b': 'q.2.r'\n    }\n  }, {\n    a: {},\n    q: {\n      2: {\n        r: 12\n      }\n    }\n  });\n  exception({\n    a: {\n      b: 12\n    },\n    q: []\n  }, {\n    $rename: {\n      'a.b': 'q.2'\n    }\n  }); // tested\n\n  exception({\n    a: {\n      b: 12\n    },\n    q: []\n  }, {\n    $rename: {\n      'a.b': 'q.2.r'\n    }\n  }); // tested\n  // These strange MongoDB behaviors throw.\n  // modify({a: {b: 12}, q: []}, {$rename: {'q.1': 'x'}},\n  //        {a: {b: 12}, x: []}); // tested\n  // modify({a: {b: 12}, q: []}, {$rename: {'q.1.j': 'x'}},\n  //        {a: {b: 12}, x: []}); // tested\n\n  exception({}, {\n    $rename: {\n      'a': 'a'\n    }\n  });\n  exception({}, {\n    $rename: {\n      'a.b': 'a.b'\n    }\n  });\n  modify({\n    a: 12,\n    b: 13\n  }, {\n    $rename: {\n      a: 'b'\n    }\n  }, {\n    b: 12\n  });\n  exception({\n    a: [12]\n  }, {\n    $rename: {\n      a: '$b'\n    }\n  });\n  exception({\n    a: [12]\n  }, {\n    $rename: {\n      a: '\\0a'\n    }\n  }); // $setOnInsert\n\n  modify({\n    a: 0\n  }, {\n    $setOnInsert: {\n      a: 12\n    }\n  }, {\n    a: 0\n  });\n  upsert({\n    a: 12\n  }, {\n    $setOnInsert: {\n      b: 12\n    }\n  }, {\n    a: 12,\n    b: 12\n  });\n  upsert({\n    a: 12\n  }, {\n    $setOnInsert: {\n      _id: 'test'\n    }\n  }, {\n    _id: 'test',\n    a: 12\n  });\n  upsertException({\n    a: 0\n  }, {\n    $setOnInsert: {\n      $a: 12\n    }\n  });\n  upsertException({\n    a: 0\n  }, {\n    $setOnInsert: {\n      '\\0a': 12\n    }\n  });\n  upsert({\n    a: 0\n  }, {\n    $setOnInsert: {\n      b: {\n        a: 1\n      }\n    }\n  }, {\n    a: 0,\n    b: {\n      a: 1\n    }\n  });\n  upsertException({\n    a: 0\n  }, {\n    $setOnInsert: {\n      b: {\n        $a: 1\n      }\n    }\n  });\n  upsertException({\n    a: 0\n  }, {\n    $setOnInsert: {\n      b: {\n        'a.b': 1\n      }\n    }\n  });\n  upsertException({\n    a: 0\n  }, {\n    $setOnInsert: {\n      b: {\n        '\\0a': 1\n      }\n    }\n  });\n  exception({}, {\n    $set: {\n      _id: 'bad'\n    }\n  }); // $bit\n  // unimplemented\n  // XXX test case sensitivity of modops\n  // XXX for each (most) modop, test that it performs a deep copy\n}); // XXX test update() (selecting docs, multi, upsert..)\n\nTinytest.add(\"minimongo - observe ordered\", function (test) {\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var handle;\n  var c = new LocalCollection();\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    }\n  }).observe(cbs);\n  test.isTrue(handle.collection === c);\n  c.insert({\n    _id: 'foo',\n    a: 1\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, 0, null]);\n  c.update({\n    a: 1\n  }, {\n    $set: {\n      a: 2\n    }\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 2\n  }, 0, {\n    a: 1\n  }]);\n  c.insert({\n    a: 10\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 10\n  }, 1, null]);\n  c.update({}, {\n    $inc: {\n      a: 1\n    }\n  }, {\n    multi: true\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 3\n  }, 0, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['changed', {\n    a: 11\n  }, 1, {\n    a: 10\n  }]);\n  c.update({\n    a: 11\n  }, {\n    a: 1\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 1\n  }, 1, {\n    a: 11\n  }]);\n  test.equal(operations.shift(), ['moved', {\n    a: 1\n  }, 1, 0, 'foo']);\n  c.remove({\n    a: 2\n  });\n  test.equal(operations.shift(), undefined);\n  c.remove({\n    a: 3\n  });\n  test.equal(operations.shift(), ['removed', 'foo', 1, {\n    a: 3\n  }]); // test stop\n\n  handle.stop();\n  var idA2 = Random.id();\n  c.insert({\n    _id: idA2,\n    a: 2\n  });\n  test.equal(operations.shift(), undefined); // test initial inserts (and backwards sort)\n\n  handle = c.find({}, {\n    sort: {\n      a: -1\n    }\n  }).observe(cbs);\n  test.equal(operations.shift(), ['added', {\n    a: 2\n  }, 0, null]);\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, 1, null]);\n  handle.stop(); // test _suppress_initial\n\n  handle = c.find({}, {\n    sort: {\n      a: -1\n    }\n  }).observe(_.extend({\n    _suppress_initial: true\n  }, cbs));\n  test.equal(operations.shift(), undefined);\n  c.insert({\n    a: 100\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 100\n  }, 0, idA2]);\n  handle.stop(); // test skip and limit.\n\n  c.remove({});\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    },\n    skip: 1,\n    limit: 2\n  }).observe(cbs);\n  test.equal(operations.shift(), undefined);\n  c.insert({\n    a: 1\n  });\n  test.equal(operations.shift(), undefined);\n  c.insert({\n    _id: 'foo',\n    a: 2\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 2\n  }, 0, null]);\n  c.insert({\n    a: 3\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 3\n  }, 1, null]);\n  c.insert({\n    a: 4\n  });\n  test.equal(operations.shift(), undefined);\n  c.update({\n    a: 1\n  }, {\n    a: 0\n  });\n  test.equal(operations.shift(), undefined);\n  c.update({\n    a: 0\n  }, {\n    a: 5\n  });\n  test.equal(operations.shift(), ['removed', 'foo', 0, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['added', {\n    a: 4\n  }, 1, null]);\n  c.update({\n    a: 3\n  }, {\n    a: 3.5\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 3.5\n  }, 0, {\n    a: 3\n  }]);\n  handle.stop(); // test observe limit with pre-existing docs\n\n  c.remove({});\n  c.insert({\n    a: 1\n  });\n  c.insert({\n    _id: 'two',\n    a: 2\n  });\n  c.insert({\n    a: 3\n  });\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    },\n    limit: 2\n  }).observe(cbs);\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, 0, null]);\n  test.equal(operations.shift(), ['added', {\n    a: 2\n  }, 1, null]);\n  test.equal(operations.shift(), undefined);\n  c.remove({\n    a: 2\n  });\n  test.equal(operations.shift(), ['removed', 'two', 1, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['added', {\n    a: 3\n  }, 1, null]);\n  test.equal(operations.shift(), undefined);\n  handle.stop(); // test _no_indices\n\n  c.remove({});\n  handle = c.find({}, {\n    sort: {\n      a: 1\n    }\n  }).observe(_.extend(cbs, {\n    _no_indices: true\n  }));\n  c.insert({\n    _id: 'foo',\n    a: 1\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, -1, null]);\n  c.update({\n    a: 1\n  }, {\n    $set: {\n      a: 2\n    }\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 2\n  }, -1, {\n    a: 1\n  }]);\n  c.insert({\n    a: 10\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 10\n  }, -1, null]);\n  c.update({}, {\n    $inc: {\n      a: 1\n    }\n  }, {\n    multi: true\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 3\n  }, -1, {\n    a: 2\n  }]);\n  test.equal(operations.shift(), ['changed', {\n    a: 11\n  }, -1, {\n    a: 10\n  }]);\n  c.update({\n    a: 11\n  }, {\n    a: 1\n  });\n  test.equal(operations.shift(), ['changed', {\n    a: 1\n  }, -1, {\n    a: 11\n  }]);\n  test.equal(operations.shift(), ['moved', {\n    a: 1\n  }, -1, -1, 'foo']);\n  c.remove({\n    a: 2\n  });\n  test.equal(operations.shift(), undefined);\n  c.remove({\n    a: 3\n  });\n  test.equal(operations.shift(), ['removed', 'foo', -1, {\n    a: 3\n  }]);\n  handle.stop();\n});\n\n_.each([true, false], function (ordered) {\n  Tinytest.add(\"minimongo - observe ordered: \" + ordered, function (test) {\n    var c = new LocalCollection();\n    var ev = \"\";\n\n    var makecb = function (tag) {\n      var ret = {};\n\n      _.each([\"added\", \"changed\", \"removed\"], function (fn) {\n        var fnName = ordered ? fn + \"At\" : fn;\n\n        ret[fnName] = function (doc) {\n          ev = ev + fn.substr(0, 1) + tag + doc._id + \"_\";\n        };\n      });\n\n      return ret;\n    };\n\n    var expect = function (x) {\n      test.equal(ev, x);\n      ev = \"\";\n    };\n\n    c.insert({\n      _id: 1,\n      name: \"strawberry\",\n      tags: [\"fruit\", \"red\", \"squishy\"]\n    });\n    c.insert({\n      _id: 2,\n      name: \"apple\",\n      tags: [\"fruit\", \"red\", \"hard\"]\n    });\n    c.insert({\n      _id: 3,\n      name: \"rose\",\n      tags: [\"flower\", \"red\", \"squishy\"]\n    }); // This should work equally well for ordered and unordered observations\n    // (because the callbacks don't look at indices and there's no 'moved'\n    // callback).\n\n    var handle = c.find({\n      tags: \"flower\"\n    }).observe(makecb('a'));\n    expect(\"aa3_\");\n    c.update({\n      name: \"rose\"\n    }, {\n      $set: {\n        tags: [\"bloom\", \"red\", \"squishy\"]\n      }\n    });\n    expect(\"ra3_\");\n    c.update({\n      name: \"rose\"\n    }, {\n      $set: {\n        tags: [\"flower\", \"red\", \"squishy\"]\n      }\n    });\n    expect(\"aa3_\");\n    c.update({\n      name: \"rose\"\n    }, {\n      $set: {\n        food: false\n      }\n    });\n    expect(\"ca3_\");\n    c.remove({});\n    expect(\"ra3_\");\n    c.insert({\n      _id: 4,\n      name: \"daisy\",\n      tags: [\"flower\"]\n    });\n    expect(\"aa4_\");\n    handle.stop(); // After calling stop, no more callbacks are called.\n\n    c.insert({\n      _id: 5,\n      name: \"iris\",\n      tags: [\"flower\"]\n    });\n    expect(\"\"); // Test that observing a lookup by ID works.\n\n    handle = c.find(4).observe(makecb('b'));\n    expect('ab4_');\n    c.update(4, {\n      $set: {\n        eek: 5\n      }\n    });\n    expect('cb4_');\n    handle.stop(); // Test observe with reactive: false.\n\n    handle = c.find({\n      tags: \"flower\"\n    }, {\n      reactive: false\n    }).observe(makecb('c'));\n    expect('ac4_ac5_'); // This insert shouldn't trigger a callback because it's not reactive.\n\n    c.insert({\n      _id: 6,\n      name: \"river\",\n      tags: [\"flower\"]\n    });\n    expect('');\n    handle.stop();\n  });\n});\n\nTinytest.add(\"minimongo - saveOriginals\", function (test) {\n  // set up some data\n  var c = new LocalCollection(),\n      count;\n  c.insert({\n    _id: 'foo',\n    x: 'untouched'\n  });\n  c.insert({\n    _id: 'bar',\n    x: 'updateme'\n  });\n  c.insert({\n    _id: 'baz',\n    x: 'updateme'\n  });\n  c.insert({\n    _id: 'quux',\n    y: 'removeme'\n  });\n  c.insert({\n    _id: 'whoa',\n    y: 'removeme'\n  }); // Save originals and make some changes.\n\n  c.saveOriginals();\n  c.insert({\n    _id: \"hooray\",\n    z: 'insertme'\n  });\n  c.remove({\n    y: 'removeme'\n  });\n  count = c.update({\n    x: 'updateme'\n  }, {\n    $set: {\n      z: 5\n    }\n  }, {\n    multi: true\n  });\n  c.update('bar', {\n    $set: {\n      k: 7\n    }\n  }); // update same doc twice\n  // Verify returned count is correct\n\n  test.equal(count, 2); // Verify the originals.\n\n  var originals = c.retrieveOriginals();\n  var affected = ['bar', 'baz', 'quux', 'whoa', 'hooray'];\n  test.equal(originals.size(), _.size(affected));\n\n  _.each(affected, function (id) {\n    test.isTrue(originals.has(id));\n  });\n\n  test.equal(originals.get('bar'), {\n    _id: 'bar',\n    x: 'updateme'\n  });\n  test.equal(originals.get('baz'), {\n    _id: 'baz',\n    x: 'updateme'\n  });\n  test.equal(originals.get('quux'), {\n    _id: 'quux',\n    y: 'removeme'\n  });\n  test.equal(originals.get('whoa'), {\n    _id: 'whoa',\n    y: 'removeme'\n  });\n  test.equal(originals.get('hooray'), undefined); // Verify that changes actually occured.\n\n  test.equal(c.find().count(), 4);\n  test.equal(c.findOne('foo'), {\n    _id: 'foo',\n    x: 'untouched'\n  });\n  test.equal(c.findOne('bar'), {\n    _id: 'bar',\n    x: 'updateme',\n    z: 5,\n    k: 7\n  });\n  test.equal(c.findOne('baz'), {\n    _id: 'baz',\n    x: 'updateme',\n    z: 5\n  });\n  test.equal(c.findOne('hooray'), {\n    _id: 'hooray',\n    z: 'insertme'\n  }); // The next call doesn't get the same originals again.\n\n  c.saveOriginals();\n  originals = c.retrieveOriginals();\n  test.isTrue(originals);\n  test.isTrue(originals.empty()); // Insert and remove a document during the period.\n\n  c.saveOriginals();\n  c.insert({\n    _id: 'temp',\n    q: 8\n  });\n  c.remove('temp');\n  originals = c.retrieveOriginals();\n  test.equal(originals.size(), 1);\n  test.isTrue(originals.has('temp'));\n  test.equal(originals.get('temp'), undefined);\n});\nTinytest.add(\"minimongo - saveOriginals errors\", function (test) {\n  var c = new LocalCollection(); // Can't call retrieve before save.\n\n  test.throws(function () {\n    c.retrieveOriginals();\n  });\n  c.saveOriginals(); // Can't call save twice.\n\n  test.throws(function () {\n    c.saveOriginals();\n  });\n});\nTinytest.add(\"minimongo - objectid transformation\", function (test) {\n  var testId = function (item) {\n    test.equal(item, MongoID.idParse(MongoID.idStringify(item)));\n  };\n\n  var randomOid = new MongoID.ObjectID();\n  testId(randomOid);\n  testId(\"FOO\");\n  testId(\"ffffffffffff\");\n  testId(\"0987654321abcdef09876543\");\n  testId(new MongoID.ObjectID());\n  testId(\"--a string\");\n  test.equal(\"ffffffffffff\", MongoID.idParse(MongoID.idStringify(\"ffffffffffff\")));\n});\nTinytest.add(\"minimongo - objectid\", function (test) {\n  var randomOid = new MongoID.ObjectID();\n  var anotherRandomOid = new MongoID.ObjectID();\n  test.notEqual(randomOid, anotherRandomOid);\n  test.throws(function () {\n    new MongoID.ObjectID(\"qqqqqqqqqqqqqqqqqqqqqqqq\");\n  });\n  test.throws(function () {\n    new MongoID.ObjectID(\"ABCDEF\");\n  });\n  test.equal(randomOid, new MongoID.ObjectID(randomOid.valueOf()));\n});\nTinytest.add(\"minimongo - pause\", function (test) {\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var c = new LocalCollection();\n  var h = c.find({}).observe(cbs); // remove and add cancel out.\n\n  c.insert({\n    _id: 1,\n    a: 1\n  });\n  test.equal(operations.shift(), ['added', {\n    a: 1\n  }, 0, null]);\n  c.pauseObservers();\n  c.remove({\n    _id: 1\n  });\n  test.length(operations, 0);\n  c.insert({\n    _id: 1,\n    a: 1\n  });\n  test.length(operations, 0);\n  c.resumeObservers();\n  test.length(operations, 0); // two modifications become one\n\n  c.pauseObservers();\n  c.update({\n    _id: 1\n  }, {\n    a: 2\n  });\n  c.update({\n    _id: 1\n  }, {\n    a: 3\n  });\n  c.resumeObservers();\n  test.equal(operations.shift(), ['changed', {\n    a: 3\n  }, 0, {\n    a: 1\n  }]);\n  test.length(operations, 0); // test special case for remove({})\n\n  c.pauseObservers();\n  test.equal(c.remove({}), 1);\n  test.length(operations, 0);\n  c.resumeObservers();\n  test.equal(operations.shift(), ['removed', 1, 0, {\n    a: 3\n  }]);\n  test.length(operations, 0);\n  h.stop();\n});\nTinytest.add(\"minimongo - ids matched by selector\", function (test) {\n  var check = function (selector, ids) {\n    var idsFromSelector = LocalCollection._idsMatchedBySelector(selector); // XXX normalize order, in a way that also works for ObjectIDs?\n\n\n    test.equal(idsFromSelector, ids);\n  };\n\n  check(\"foo\", [\"foo\"]);\n  check({\n    _id: \"foo\"\n  }, [\"foo\"]);\n  var oid1 = new MongoID.ObjectID();\n  check(oid1, [oid1]);\n  check({\n    _id: oid1\n  }, [oid1]);\n  check({\n    _id: \"foo\",\n    x: 42\n  }, [\"foo\"]);\n  check({}, null);\n  check({\n    _id: {\n      $in: [\"foo\", oid1]\n    }\n  }, [\"foo\", oid1]);\n  check({\n    _id: {\n      $ne: \"foo\"\n    }\n  }, null); // not actually valid, but works for now...\n\n  check({\n    $and: [\"foo\"]\n  }, [\"foo\"]);\n  check({\n    $and: [{\n      x: 42\n    }, {\n      _id: oid1\n    }]\n  }, [oid1]);\n  check({\n    $and: [{\n      x: 42\n    }, {\n      _id: {\n        $in: [oid1]\n      }\n    }]\n  }, [oid1]);\n});\nTinytest.add(\"minimongo - reactive stop\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({\n    _id: 'A'\n  });\n  coll.insert({\n    _id: 'B'\n  });\n  coll.insert({\n    _id: 'C'\n  });\n\n  var addBefore = function (str, newChar, before) {\n    var idx = str.indexOf(before);\n    if (idx === -1) return str + newChar;\n    return str.slice(0, idx) + newChar + str.slice(idx);\n  };\n\n  var x, y;\n  var sortOrder = ReactiveVar(1);\n  var c = Tracker.autorun(function () {\n    var q = coll.find({}, {\n      sort: {\n        _id: sortOrder.get()\n      }\n    });\n    x = \"\";\n    q.observe({\n      addedAt: function (doc, atIndex, before) {\n        x = addBefore(x, doc._id, before);\n      }\n    });\n    y = \"\";\n    q.observeChanges({\n      addedBefore: function (id, fields, before) {\n        y = addBefore(y, id, before);\n      }\n    });\n  });\n  test.equal(x, \"ABC\");\n  test.equal(y, \"ABC\");\n  sortOrder.set(-1);\n  test.equal(x, \"ABC\");\n  test.equal(y, \"ABC\");\n  Tracker.flush();\n  test.equal(x, \"CBA\");\n  test.equal(y, \"CBA\");\n  coll.insert({\n    _id: 'D'\n  });\n  coll.insert({\n    _id: 'E'\n  });\n  test.equal(x, \"EDCBA\");\n  test.equal(y, \"EDCBA\");\n  c.stop(); // stopping kills the observes immediately\n\n  coll.insert({\n    _id: 'F'\n  });\n  test.equal(x, \"EDCBA\");\n  test.equal(y, \"EDCBA\");\n});\nTinytest.add(\"minimongo - immediate invalidate\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({\n    _id: 'A'\n  }); // This has two separate findOnes.  findOne() uses skip/limit, which means\n  // that its response to an update() call involves a recompute. We used to have\n  // a bug where we would first calculate all the calls that need to be\n  // recomputed, then recompute them one by one, without checking to see if the\n  // callbacks from recomputing one query stopped the second query, which\n  // crashed.\n\n  var c = Tracker.autorun(function () {\n    coll.findOne('A');\n    coll.findOne('A');\n  });\n  coll.update('A', {\n    $set: {\n      x: 42\n    }\n  });\n  c.stop();\n});\nTinytest.add(\"minimongo - count on cursor with limit\", function (test) {\n  var coll = new LocalCollection(),\n      count;\n  coll.insert({\n    _id: 'A'\n  });\n  coll.insert({\n    _id: 'B'\n  });\n  coll.insert({\n    _id: 'C'\n  });\n  coll.insert({\n    _id: 'D'\n  });\n  var c = Tracker.autorun(function (c) {\n    var cursor = coll.find({\n      _id: {\n        $exists: true\n      }\n    }, {\n      sort: {\n        _id: 1\n      },\n      limit: 3\n    });\n    count = cursor.count();\n  });\n  test.equal(count, 3);\n  coll.remove('A'); // still 3 in the collection\n\n  Tracker.flush();\n  test.equal(count, 3);\n  coll.remove('B'); // expect count now 2\n\n  Tracker.flush();\n  test.equal(count, 2);\n  coll.insert({\n    _id: 'A'\n  }); // now 3 again\n\n  Tracker.flush();\n  test.equal(count, 3);\n  coll.insert({\n    _id: 'B'\n  }); // now 4 entries, but count should be 3 still\n\n  Tracker.flush();\n  test.equal(count, 3);\n  c.stop();\n});\nTinytest.add(\"minimongo - reactive count with cached cursor\", function (test) {\n  var coll = new LocalCollection();\n  var cursor = coll.find({});\n  var firstAutorunCount, secondAutorunCount;\n  Tracker.autorun(function () {\n    firstAutorunCount = cursor.count();\n  });\n  Tracker.autorun(function () {\n    secondAutorunCount = coll.find({}).count();\n  });\n  test.equal(firstAutorunCount, 0);\n  test.equal(secondAutorunCount, 0);\n  coll.insert({\n    i: 1\n  });\n  coll.insert({\n    i: 2\n  });\n  coll.insert({\n    i: 3\n  });\n  Tracker.flush();\n  test.equal(firstAutorunCount, 3);\n  test.equal(secondAutorunCount, 3);\n});\nTinytest.add(\"minimongo - $near operator tests\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({\n    rest: {\n      loc: [2, 3]\n    }\n  });\n  coll.insert({\n    rest: {\n      loc: [-3, 3]\n    }\n  });\n  coll.insert({\n    rest: {\n      loc: [5, 5]\n    }\n  });\n  test.equal(coll.find({\n    'rest.loc': {\n      $near: [0, 0],\n      $maxDistance: 30\n    }\n  }).count(), 3);\n  test.equal(coll.find({\n    'rest.loc': {\n      $near: [0, 0],\n      $maxDistance: 4\n    }\n  }).count(), 1);\n  var points = coll.find({\n    'rest.loc': {\n      $near: [0, 0],\n      $maxDistance: 6\n    }\n  }).fetch();\n\n  _.each(points, function (point, i, points) {\n    test.isTrue(!i || distance([0, 0], point.rest.loc) >= distance([0, 0], points[i - 1].rest.loc));\n  });\n\n  function distance(a, b) {\n    var x = a[0] - b[0];\n    var y = a[1] - b[1];\n    return Math.sqrt(x * x + y * y);\n  } // GeoJSON tests\n\n\n  coll = new LocalCollection();\n  var data = [{\n    \"category\": \"BURGLARY\",\n    \"descript\": \"BURGLARY OF STORE, FORCIBLE ENTRY\",\n    \"address\": \"100 Block of 10TH ST\",\n    \"location\": {\n      \"type\": \"Point\",\n      \"coordinates\": [-122.415449723856, 37.7749518087273]\n    }\n  }, {\n    \"category\": \"WEAPON LAWS\",\n    \"descript\": \"POSS OF PROHIBITED WEAPON\",\n    \"address\": \"900 Block of MINNA ST\",\n    \"location\": {\n      \"type\": \"Point\",\n      \"coordinates\": [-122.415386041221, 37.7747879744156]\n    }\n  }, {\n    \"category\": \"LARCENY/THEFT\",\n    \"descript\": \"GRAND THEFT OF PROPERTY\",\n    \"address\": \"900 Block of MINNA ST\",\n    \"location\": {\n      \"type\": \"Point\",\n      \"coordinates\": [-122.41538270191, 37.774683628213]\n    }\n  }, {\n    \"category\": \"LARCENY/THEFT\",\n    \"descript\": \"PETTY THEFT FROM LOCKED AUTO\",\n    \"address\": \"900 Block of MINNA ST\",\n    \"location\": {\n      \"type\": \"Point\",\n      \"coordinates\": [-122.415396041221, 37.7747879744156]\n    }\n  }, {\n    \"category\": \"OTHER OFFENSES\",\n    \"descript\": \"POSSESSION OF BURGLARY TOOLS\",\n    \"address\": \"900 Block of MINNA ST\",\n    \"location\": {\n      \"type\": \"Point\",\n      \"coordinates\": [-122.415386041221, 37.7747879734156]\n    }\n  }];\n\n  _.each(data, function (x, i) {\n    coll.insert(_.extend(x, {\n      x: i\n    }));\n  });\n\n  var close15 = coll.find({\n    location: {\n      $near: {\n        $geometry: {\n          type: \"Point\",\n          coordinates: [-122.4154282, 37.7746115]\n        },\n        $maxDistance: 15\n      }\n    }\n  }).fetch();\n  test.length(close15, 1);\n  test.equal(close15[0].descript, \"GRAND THEFT OF PROPERTY\");\n  var close20 = coll.find({\n    location: {\n      $near: {\n        $geometry: {\n          type: \"Point\",\n          coordinates: [-122.4154282, 37.7746115]\n        },\n        $maxDistance: 20\n      }\n    }\n  }).fetch();\n  test.length(close20, 4);\n  test.equal(close20[0].descript, \"GRAND THEFT OF PROPERTY\");\n  test.equal(close20[1].descript, \"PETTY THEFT FROM LOCKED AUTO\");\n  test.equal(close20[2].descript, \"POSSESSION OF BURGLARY TOOLS\");\n  test.equal(close20[3].descript, \"POSS OF PROHIBITED WEAPON\"); // Any combinations of $near with $or/$and/$nor/$not should throw an error\n\n  test.throws(function () {\n    coll.find({\n      location: {\n        $not: {\n          $near: {\n            $geometry: {\n              type: \"Point\",\n              coordinates: [-122.4154282, 37.7746115]\n            },\n            $maxDistance: 20\n          }\n        }\n      }\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $and: [{\n        location: {\n          $near: {\n            $geometry: {\n              type: \"Point\",\n              coordinates: [-122.4154282, 37.7746115]\n            },\n            $maxDistance: 20\n          }\n        }\n      }, {\n        x: 0\n      }]\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $or: [{\n        location: {\n          $near: {\n            $geometry: {\n              type: \"Point\",\n              coordinates: [-122.4154282, 37.7746115]\n            },\n            $maxDistance: 20\n          }\n        }\n      }, {\n        x: 0\n      }]\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $nor: [{\n        location: {\n          $near: {\n            $geometry: {\n              type: \"Point\",\n              coordinates: [-122.4154282, 37.7746115]\n            },\n            $maxDistance: 1\n          }\n        }\n      }, {\n        x: 0\n      }]\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $and: [{\n        $and: [{\n          location: {\n            $near: {\n              $geometry: {\n                type: \"Point\",\n                coordinates: [-122.4154282, 37.7746115]\n              },\n              $maxDistance: 1\n            }\n          }\n        }]\n      }]\n    });\n  }); // array tests\n\n  coll = new LocalCollection();\n  coll.insert({\n    _id: \"x\",\n    k: 9,\n    a: [{\n      b: [[100, 100], [1, 1]]\n    }, {\n      b: [150, 150]\n    }]\n  });\n  coll.insert({\n    _id: \"y\",\n    k: 9,\n    a: {\n      b: [5, 5]\n    }\n  });\n\n  var testNear = function (near, md, expected) {\n    test.equal(_.pluck(coll.find({\n      'a.b': {\n        $near: near,\n        $maxDistance: md\n      }\n    }).fetch(), '_id'), expected);\n  };\n\n  testNear([149, 149], 4, ['x']);\n  testNear([149, 149], 1000, ['x', 'y']); // It's important that we figure out that 'x' is closer than 'y' to [2,2] even\n  // though the first within-1000 point in 'x' (ie, [100,100]) is farther than\n  // 'y'.\n\n  testNear([2, 2], 1000, ['x', 'y']); // Ensure that distance is used as a tie-breaker for sort.\n\n  test.equal(_.pluck(coll.find({\n    'a.b': {\n      $near: [1, 1]\n    }\n  }, {\n    sort: {\n      k: 1\n    }\n  }).fetch(), '_id'), ['x', 'y']);\n  test.equal(_.pluck(coll.find({\n    'a.b': {\n      $near: [5, 5]\n    }\n  }, {\n    sort: {\n      k: 1\n    }\n  }).fetch(), '_id'), ['y', 'x']);\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var handle = coll.find({\n    'a.b': {\n      $near: [7, 7]\n    }\n  }).observe(cbs);\n  test.length(operations, 2);\n  test.equal(operations.shift(), ['added', {\n    k: 9,\n    a: {\n      b: [5, 5]\n    }\n  }, 0, null]);\n  test.equal(operations.shift(), ['added', {\n    k: 9,\n    a: [{\n      b: [[100, 100], [1, 1]]\n    }, {\n      b: [150, 150]\n    }]\n  }, 1, null]); // This needs to be inserted in the MIDDLE of the two existing ones.\n\n  coll.insert({\n    a: {\n      b: [3, 3]\n    }\n  });\n  test.length(operations, 1);\n  test.equal(operations.shift(), ['added', {\n    a: {\n      b: [3, 3]\n    }\n  }, 1, 'x']);\n  handle.stop();\n}); // issue #2077\n\nTinytest.add(\"minimongo - $near and $geometry for legacy coordinates\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({\n    loc: {\n      x: 1,\n      y: 1\n    }\n  });\n  coll.insert({\n    loc: [-1, -1]\n  });\n  coll.insert({\n    loc: [40, -10]\n  });\n  coll.insert({\n    loc: {\n      x: -10,\n      y: 40\n    }\n  });\n  test.equal(coll.find({\n    'loc': {\n      $near: [0, 0],\n      $maxDistance: 4\n    }\n  }).count(), 2);\n  test.equal(coll.find({\n    'loc': {\n      $near: {\n        $geometry: {\n          type: \"Point\",\n          coordinates: [0, 0]\n        }\n      }\n    }\n  }).count(), 4);\n  test.equal(coll.find({\n    'loc': {\n      $near: {\n        $geometry: {\n          type: \"Point\",\n          coordinates: [0, 0]\n        },\n        $maxDistance: 200000\n      }\n    }\n  }).count(), 2);\n}); // Regression test for #4377. Previously, \"replace\" updates didn't clone the\n// argument.\n\nTinytest.add(\"minimongo - update should clone\", function (test) {\n  var x = [];\n  var coll = new LocalCollection();\n  var id = coll.insert({});\n  coll.update(id, {\n    x: x\n  });\n  x.push(1);\n  test.equal(coll.findOne(id), {\n    _id: id,\n    x: []\n  });\n}); // See #2275.\n\nTinytest.add(\"minimongo - fetch in observe\", function (test) {\n  var coll = new LocalCollection();\n  var callbackInvoked = false;\n  var observe = coll.find().observeChanges({\n    added: function (id, fields) {\n      callbackInvoked = true;\n      test.equal(fields, {\n        foo: 1\n      });\n      var doc = coll.findOne({\n        foo: 1\n      });\n      test.isTrue(doc);\n      test.equal(doc.foo, 1);\n    }\n  });\n  test.isFalse(callbackInvoked);\n  var computation = Tracker.autorun(function (computation) {\n    if (computation.firstRun) {\n      coll.insert({\n        foo: 1\n      });\n    }\n  });\n  test.isTrue(callbackInvoked);\n  observe.stop();\n  computation.stop();\n}); // See #2254\n\nTinytest.add(\"minimongo - fine-grained reactivity of observe with fields projection\", function (test) {\n  var X = new LocalCollection();\n  var id = \"asdf\";\n  X.insert({\n    _id: id,\n    foo: {\n      bar: 123\n    }\n  });\n  var callbackInvoked = false;\n  var obs = X.find(id, {\n    fields: {\n      'foo.bar': 1\n    }\n  }).observeChanges({\n    changed: function (id, fields) {\n      callbackInvoked = true;\n    }\n  });\n  test.isFalse(callbackInvoked);\n  X.update(id, {\n    $set: {\n      'foo.baz': 456\n    }\n  });\n  test.isFalse(callbackInvoked);\n  obs.stop();\n});\nTinytest.add(\"minimongo - fine-grained reactivity of query with fields projection\", function (test) {\n  var X = new LocalCollection();\n  var id = \"asdf\";\n  X.insert({\n    _id: id,\n    foo: {\n      bar: 123\n    }\n  });\n  var callbackInvoked = false;\n  var computation = Tracker.autorun(function () {\n    callbackInvoked = true;\n    return X.findOne(id, {\n      fields: {\n        'foo.bar': 1\n      }\n    });\n  });\n  test.isTrue(callbackInvoked);\n  callbackInvoked = false;\n  X.update(id, {\n    $set: {\n      'foo.baz': 456\n    }\n  });\n  test.isFalse(callbackInvoked);\n  X.update(id, {\n    $set: {\n      'foo.bar': 124\n    }\n  });\n  Tracker.flush();\n  test.isTrue(callbackInvoked);\n  computation.stop();\n}); // Tests that the logic in `LocalCollection.prototype.update`\n// correctly deals with count() on a cursor with skip or limit (since\n// then the result set is an IdMap, not an array)\n\nTinytest.add(\"minimongo - reactive skip/limit count while updating\", function (test) {\n  var X = new LocalCollection();\n  var count = -1;\n  var c = Tracker.autorun(function () {\n    count = X.find({}, {\n      skip: 1,\n      limit: 1\n    }).count();\n  });\n  test.equal(count, 0);\n  X.insert({});\n  Tracker.flush({\n    _throwFirstError: true\n  });\n  test.equal(count, 0);\n  X.insert({});\n  Tracker.flush({\n    _throwFirstError: true\n  });\n  test.equal(count, 1);\n  X.update({}, {\n    $set: {\n      foo: 1\n    }\n  });\n  Tracker.flush({\n    _throwFirstError: true\n  });\n  test.equal(count, 1); // Make sure a second update also works\n\n  X.update({}, {\n    $set: {\n      foo: 2\n    }\n  });\n  Tracker.flush({\n    _throwFirstError: true\n  });\n  test.equal(count, 1);\n  c.stop();\n}); // Makes sure inserts cannot be performed using field names that have\n// Mongo restricted characters in them ('.', '$', '\\0'):\n// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names\n\nTinytest.add(\"minimongo - cannot insert using invalid field names\", function (test) {\n  var collection = new LocalCollection(); // Quick test to make sure non-dot field inserts are working\n\n  collection.insert({\n    a: 'b'\n  }); // Quick test to make sure field values with dots are allowed\n\n  collection.insert({\n    a: 'b.c'\n  }); // Verify top level dot-field inserts are prohibited\n\n  ['a.b', '.b', 'a.', 'a.b.c'].forEach(function (field) {\n    test.throws(function () {\n      var _collection$insert;\n\n      collection.insert((_collection$insert = {}, _collection$insert[field] = 'c', _collection$insert));\n    }, \"Key \" + field + \" must not contain '.'\");\n  }); // Verify nested dot-field inserts are prohibited\n\n  test.throws(function () {\n    collection.insert({\n      a: {\n        b: {\n          'c.d': 'e'\n        }\n      }\n    });\n  }, \"Key c.d must not contain '.'\"); // Verify field names starting with $ are prohibited\n\n  test.throws(function () {\n    collection.insert({\n      '$a': 'b'\n    });\n  }, \"Key $a must not start with '$'\"); // Verify nested field names starting with $ are prohibited\n\n  test.throws(function () {\n    collection.insert({\n      a: {\n        b: {\n          '$c': 'd'\n        }\n      }\n    });\n  }, \"Key $c must not start with '$'\"); // Verify top level fields with null characters are prohibited\n\n  ['\\0a', 'a\\0', 'a\\0b', \"\\0a\", \"a\\0\", \"a\\0b\"].forEach(function (field) {\n    test.throws(function () {\n      var _collection$insert2;\n\n      collection.insert((_collection$insert2 = {}, _collection$insert2[field] = 'c', _collection$insert2));\n    }, \"Key \" + field + \" must not contain null bytes\");\n  }); // Verify nested field names with null characters are prohibited\n\n  test.throws(function () {\n    collection.insert({\n      a: {\n        b: {\n          '\\0c': 'd'\n        }\n      }\n    });\n  }, 'Key \\0c must not contain null bytes');\n}); // Makes sure $set's cannot be performed using null bytes\n// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names\n\nTinytest.add(\"minimongo - cannot $set with null bytes\", function (test) {\n  var collection = new LocalCollection(); // Quick test to make sure non-null byte $set's are working\n\n  var id = collection.insert({\n    a: 'b',\n    'c': 'd'\n  });\n  collection.update({\n    _id: id\n  }, {\n    $set: {\n      e: 'f'\n    }\n  }); // Verify $set's with null bytes throw an exception\n\n  test.throws(function () {\n    collection.update({\n      _id: id\n    }, {\n      $set: {\n        '\\0a': 'b'\n      }\n    });\n  }, 'Key \\0a must not contain null bytes');\n}); // Makes sure $rename's cannot be performed using null bytes\n// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names\n\nTinytest.add(\"minimongo - cannot $rename with null bytes\", function (test) {\n  var collection = new LocalCollection(); // Quick test to make sure non-null byte $rename's are working\n\n  var id = collection.insert({\n    a: 'b',\n    c: 'd'\n  });\n  collection.update({\n    _id: id\n  }, {\n    $rename: {\n      a: 'a1',\n      c: 'c1'\n    }\n  }); // Verify $rename's with null bytes throw an exception\n\n  collection.remove({});\n  id = collection.insert({\n    a: 'b',\n    c: 'd'\n  });\n  test.throws(function () {\n    collection.update({\n      _id: id\n    }, {\n      $rename: {\n        a: '\\0a',\n        c: 'c\\0'\n      }\n    });\n  }, \"The 'to' field for $rename cannot contain an embedded null byte\");\n});","map":{"version":3,"sources":["/packages/minimongo/minimongo_tests.js"],"names":["LocalCollection","_useOID","assert_ordering","test","f","values","i","length","x","fail","type","message","value","JSON","stringify","should_be_zero_but_got","less","more","first","second","should_be_negative_but_got","should_be_positive_but_got","log_callbacks","operations","addedAt","obj","idx","before","_id","push","EJSON","clone","changedAt","old_obj","at","movedTo","old_at","new_at","removedAt","id","Tinytest","add","c","fluffyKitten_id","count","insert","name","equal","find","fetch","findOne","remove","update","$set","undefined","tags","skip","limit","sort","foo","bar","bam","MinimongoError","e","field","res","q","context","forEach","cursor","isTrue","map","invalidTransform","doc","throws","transform","transformWithoutId","_","omit","a","b","d","y","g","Date","_f","_equal","z","setDate","getDate","notEqual","lookupA","MinimongoTest","makeLookupFunction","lookupAX","arrayIndices","lookupA0X","w","matches","shouldMatch","selector","doesMatch","Minimongo","Matcher","documentMatches","result","document","match","bind","nomatch","date1","date2","getTime","k","$lt","$gt","$lte","$gte","$all","$exists","$mod","each","badMod","$eq","$ne","$in","$nin","$size","$bitsAllClear","Uint8Array","$bitsAllSet","$bitsAnySet","$bitsAnyClear","$type","newBinary","MongoID","ObjectID","$regex","$options","reusedRegexp","$not","big","$or","$nor","$and","$where","dogs","room","animals","$elemMatch","age","$comment","testProjection","projection","tests","projection_f","_compileProjection","equalNonStrict","desc","isEqual","testCase","testCompileProjectionThrows","expectedError","baz","nested","bazbaz","meh","tr","hope","humanity","people","candies","times","something","Random","anything","cool","nothing","fetchResults","fields","all","has","arr","grades","mean","$slice","setA","fieldA","fieldB","fieldC","setB","anotherA","anotherB","testForProjection","expected","fetched","projectionFn","filteredDoc","cbs","handle","observe","collection","shift","$inc","multi","stop","idA2","observeChanges","added","extend","_suppress_initial","blacklisted","_no_indices","zoo","foobar","shortBinary","longBinary1","longBinary2","_cmp","verify","sorts","docs","isArray","sorter","Sorter","getComparator","$natural","s","j","pluck","up","down","selected","testCursorMatchesField","fieldValues","range","max","keyListToObject","keyList","key","testKeys","sortSpec","expectedKeyList","expectedKeys","actualKeyList","_generateKeysFromDoc","actualKeys","testParallelError","testOrder","doc1","doc2","matcher","comparator","comparison","keyCompatible","compatible","actual","_keyCompatibleWithSelector","sortFunction","forwardCmp","backwardCmp","checkSearch","cmp","array","_binarySearch","checkSearchForward","checkSearchBackward","modifyWithQuery","query","mod","coll","input","modify","exceptionWithQuery","exception","upsert","insertedId","upsertException","$a","$unset","$near","$currentDate","msg","instanceOf","$min","$max","$push","$each","$sort","$position","$pushAll","$addToSet","$b","$pop","$pull","$pullAll","$rename","r","$setOnInsert","ordered","ev","makecb","tag","ret","fn","fnName","substr","expect","food","eek","reactive","saveOriginals","originals","retrieveOriginals","affected","size","get","empty","testId","item","idParse","idStringify","randomOid","anotherRandomOid","valueOf","h","pauseObservers","resumeObservers","check","ids","idsFromSelector","_idsMatchedBySelector","oid1","addBefore","str","newChar","indexOf","slice","sortOrder","ReactiveVar","Tracker","autorun","atIndex","addedBefore","set","flush","firstAutorunCount","secondAutorunCount","rest","loc","$maxDistance","points","point","distance","Math","sqrt","data","close15","location","$geometry","coordinates","descript","close20","testNear","near","md","callbackInvoked","isFalse","computation","firstRun","X","obs","changed","_throwFirstError"],"mappings":"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","file":"/packages/minimongo/minimongo_tests.js.map","sourcesContent":["\n// Hack to make LocalCollection generate ObjectIDs by default.\nLocalCollection._useOID = true;\n\n// assert that f is a strcmp-style comparison function that puts\n// 'values' in the provided order\n\nvar assert_ordering = function (test, f, values) {\n  for (var i = 0; i < values.length; i++) {\n    var x = f(values[i], values[i]);\n    if (x !== 0) {\n      // XXX super janky\n      test.fail({type: \"minimongo-ordering\",\n                 message: \"value doesn't order as equal to itself\",\n                 value: JSON.stringify(values[i]),\n                 should_be_zero_but_got: JSON.stringify(x)});\n    }\n    if (i + 1 < values.length) {\n      var less = values[i];\n      var more = values[i + 1];\n      var x = f(less, more);\n      if (!(x < 0)) {\n        // XXX super janky\n        test.fail({type: \"minimongo-ordering\",\n                   message: \"ordering test failed\",\n                   first: JSON.stringify(less),\n                   second: JSON.stringify(more),\n                   should_be_negative_but_got: JSON.stringify(x)});\n      }\n      x = f(more, less);\n      if (!(x > 0)) {\n        // XXX super janky\n        test.fail({type: \"minimongo-ordering\",\n                   message: \"ordering test failed\",\n                   first: JSON.stringify(less),\n                   second: JSON.stringify(more),\n                   should_be_positive_but_got: JSON.stringify(x)});\n      }\n    }\n  }\n};\n\nvar log_callbacks = function (operations) {\n  return {\n    addedAt: function (obj, idx, before) {\n      delete obj._id;\n      operations.push(EJSON.clone(['added', obj, idx, before]));\n    },\n    changedAt: function (obj, old_obj, at) {\n      delete obj._id;\n      delete old_obj._id;\n      operations.push(EJSON.clone(['changed', obj, at, old_obj]));\n    },\n    movedTo: function (obj, old_at, new_at, before) {\n      delete obj._id;\n      operations.push(EJSON.clone(['moved', obj, old_at, new_at, before]));\n    },\n    removedAt: function (old_obj, at) {\n      var id = old_obj._id;\n      delete old_obj._id;\n      operations.push(EJSON.clone(['removed', id, at, old_obj]));\n    }\n  };\n};\n\n// XXX test shared structure in all MM entrypoints\nTinytest.add(\"minimongo - basics\", function (test) {\n  var c = new LocalCollection(),\n      fluffyKitten_id,\n      count;\n\n  fluffyKitten_id = c.insert({type: \"kitten\", name: \"fluffy\"});\n  c.insert({type: \"kitten\", name: \"snookums\"});\n  c.insert({type: \"cryptographer\", name: \"alice\"});\n  c.insert({type: \"cryptographer\", name: \"bob\"});\n  c.insert({type: \"cryptographer\", name: \"cara\"});\n  test.equal(c.find().count(), 5);\n  test.equal(c.find({type: \"kitten\"}).count(), 2);\n  test.equal(c.find({type: \"cryptographer\"}).count(), 3);\n  test.length(c.find({type: \"kitten\"}).fetch(), 2);\n  test.length(c.find({type: \"cryptographer\"}).fetch(), 3);\n  test.equal(fluffyKitten_id, c.findOne({type: \"kitten\", name: \"fluffy\"})._id);\n\n  c.remove({name: \"cara\"});\n  test.equal(c.find().count(), 4);\n  test.equal(c.find({type: \"kitten\"}).count(), 2);\n  test.equal(c.find({type: \"cryptographer\"}).count(), 2);\n  test.length(c.find({type: \"kitten\"}).fetch(), 2);\n  test.length(c.find({type: \"cryptographer\"}).fetch(), 2);\n\n  count = c.update({name: \"snookums\"}, {$set: {type: \"cryptographer\"}});\n  test.equal(count, 1);\n  test.equal(c.find().count(), 4);\n  test.equal(c.find({type: \"kitten\"}).count(), 1);\n  test.equal(c.find({type: \"cryptographer\"}).count(), 3);\n  test.length(c.find({type: \"kitten\"}).fetch(), 1);\n  test.length(c.find({type: \"cryptographer\"}).fetch(), 3);\n\n  c.remove(null);\n  c.remove(false);\n  c.remove(undefined);\n  test.equal(c.find().count(), 4);\n\n  c.remove({_id: null});\n  c.remove({_id: false});\n  c.remove({_id: undefined});\n  count = c.remove();\n  test.equal(count, 0);\n  test.equal(c.find().count(), 4);\n\n  count = c.remove({});\n  test.equal(count, 4);\n  test.equal(c.find().count(), 0);\n\n  c.insert({_id: 1, name: \"strawberry\", tags: [\"fruit\", \"red\", \"squishy\"]});\n  c.insert({_id: 2, name: \"apple\", tags: [\"fruit\", \"red\", \"hard\"]});\n  c.insert({_id: 3, name: \"rose\", tags: [\"flower\", \"red\", \"squishy\"]});\n\n  test.equal(c.find({tags: \"flower\"}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}).count(), 2);\n  test.equal(c.find({tags: \"red\"}).count(), 3);\n  test.length(c.find({tags: \"flower\"}).fetch(), 1);\n  test.length(c.find({tags: \"fruit\"}).fetch(), 2);\n  test.length(c.find({tags: \"red\"}).fetch(), 3);\n\n  test.equal(c.findOne(1).name, \"strawberry\");\n  test.equal(c.findOne(2).name, \"apple\");\n  test.equal(c.findOne(3).name, \"rose\");\n  test.equal(c.findOne(4), undefined);\n  test.equal(c.findOne(\"abc\"), undefined);\n  test.equal(c.findOne(undefined), undefined);\n\n  test.equal(c.find(1).count(), 1);\n  test.equal(c.find(4).count(), 0);\n  test.equal(c.find(\"abc\").count(), 0);\n  test.equal(c.find(undefined).count(), 0);\n  test.equal(c.find().count(), 3);\n  test.equal(c.find(1, {skip: 1}).count(), 0);\n  test.equal(c.find({_id: 1}, {skip: 1}).count(), 0);\n  test.equal(c.find({}, {skip: 1}).count(), 2);\n  test.equal(c.find({}, {skip: 2}).count(), 1);\n  test.equal(c.find({}, {limit: 2}).count(), 2);\n  test.equal(c.find({}, {limit: 1}).count(), 1);\n  test.equal(c.find({}, {skip: 1, limit: 1}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}, {skip: 1}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}, {limit: 1}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}, {skip: 1, limit: 1}).count(), 1);\n  test.equal(c.find(1, {sort: ['_id','desc'], skip: 1}).count(), 0);\n  test.equal(c.find({_id: 1}, {sort: ['_id','desc'], skip: 1}).count(), 0);\n  test.equal(c.find({}, {sort: ['_id','desc'], skip: 1}).count(), 2);\n  test.equal(c.find({}, {sort: ['_id','desc'], skip: 2}).count(), 1);\n  test.equal(c.find({}, {sort: ['_id','desc'], limit: 2}).count(), 2);\n  test.equal(c.find({}, {sort: ['_id','desc'], limit: 1}).count(), 1);\n  test.equal(c.find({}, {sort: ['_id','desc'], skip: 1, limit: 1}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}, {sort: ['_id','desc'], skip: 1}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}, {sort: ['_id','desc'], limit: 1}).count(), 1);\n  test.equal(c.find({tags: \"fruit\"}, {sort: ['_id','desc'], skip: 1, limit: 1}).count(), 1);\n\n  // Regression test for #455.\n  c.insert({foo: {bar: 'baz'}});\n  test.equal(c.find({foo: {bam: 'baz'}}).count(), 0);\n  test.equal(c.find({foo: {bar: 'baz'}}).count(), 1);\n\n});\n\nTinytest.add(\"minimongo - error - no options\", function (test) {\n  try {\n    throw MinimongoError(\"Not fun to have errors\");\n  } catch (e) {\n    test.equal(e.message, \"Not fun to have errors\");\n  }\n});\n\nTinytest.add(\"minimongo - error - with field\", function (test) {\n  try {\n    throw MinimongoError(\"Cats are no fun\", { field: \"mice\" });\n  } catch (e) {\n    test.equal(e.message, \"Cats are no fun for field 'mice'\");\n  }\n});\n\nTinytest.add(\"minimongo - cursors\", function (test) {\n  var c = new LocalCollection();\n  var res;\n\n  for (var i = 0; i < 20; i++)\n    c.insert({i: i});\n\n  var q = c.find();\n  test.equal(q.count(), 20);\n\n  // fetch\n  res = q.fetch();\n  test.length(res, 20);\n  for (var i = 0; i < 20; i++) {\n    test.equal(res[i].i, i);\n  }\n  // call it again, it still works\n  test.length(q.fetch(), 20);\n\n  // forEach\n  var count = 0;\n  var context = {};\n  q.forEach(function (obj, i, cursor) {\n    test.equal(obj.i, count++);\n    test.equal(obj.i, i);\n    test.isTrue(context === this);\n    test.isTrue(cursor === q);\n  }, context);\n  test.equal(count, 20);\n  // call it again, it still works\n  test.length(q.fetch(), 20);\n\n  // map\n  res = q.map(function (obj, i, cursor) {\n    test.equal(obj.i, i);\n    test.isTrue(context === this);\n    test.isTrue(cursor === q);\n    return obj.i * 2;\n  }, context);\n  test.length(res, 20);\n  for (var i = 0; i < 20; i++)\n    test.equal(res[i], i * 2);\n  // call it again, it still works\n  test.length(q.fetch(), 20);\n\n  // findOne (and no rewind first)\n  test.equal(c.findOne({i: 0}).i, 0);\n  test.equal(c.findOne({i: 1}).i, 1);\n  var id = c.findOne({i: 2})._id;\n  test.equal(c.findOne(id).i, 2);\n});\n\nTinytest.add(\"minimongo - transform\", function (test) {\n  var c = new LocalCollection;\n  c.insert({});\n  // transform functions must return objects\n  var invalidTransform = function (doc) { return doc._id; };\n  test.throws(function () {\n    c.findOne({}, {transform: invalidTransform});\n  });\n\n  // transformed documents get _id field transplanted if not present\n  var transformWithoutId = function (doc) { return _.omit(doc, '_id'); };\n  test.equal(c.findOne({}, {transform: transformWithoutId})._id,\n             c.findOne()._id);\n});\n\nTinytest.add(\"minimongo - misc\", function (test) {\n  // deepcopy\n  var a = {a: [1, 2, 3], b: \"x\", c: true, d: {x: 12, y: [12]},\n           f: null, g: new Date()};\n  var b = EJSON.clone(a);\n  test.equal(a, b);\n  test.isTrue(LocalCollection._f._equal(a, b));\n  a.a.push(4);\n  test.length(b.a, 3);\n  a.c = false;\n  test.isTrue(b.c);\n  b.d.z = 15;\n  a.d.z = 14;\n  test.equal(b.d.z, 15);\n  a.d.y.push(88);\n  test.length(b.d.y, 1);\n  test.equal(a.g, b.g);\n  b.g.setDate(b.g.getDate() + 1);\n  test.notEqual(a.g, b.g);\n\n  a = {x: function () {}};\n  b = EJSON.clone(a);\n  a.x.a = 14;\n  test.equal(b.x.a, 14); // just to document current behavior\n});\n\nTinytest.add(\"minimongo - lookup\", function (test) {\n  var lookupA = MinimongoTest.makeLookupFunction('a');\n  test.equal(lookupA({}), [{value: undefined}]);\n  test.equal(lookupA({a: 1}), [{value: 1}]);\n  test.equal(lookupA({a: [1]}), [{value: [1]}]);\n\n  var lookupAX = MinimongoTest.makeLookupFunction('a.x');\n  test.equal(lookupAX({a: {x: 1}}), [{value: 1}]);\n  test.equal(lookupAX({a: {x: [1]}}), [{value: [1]}]);\n  test.equal(lookupAX({a: 5}), [{value: undefined}]);\n  test.equal(lookupAX({a: [{x: 1}, {x: [2]}, {y: 3}]}),\n             [{value: 1, arrayIndices: [0]},\n              {value: [2], arrayIndices: [1]},\n              {value: undefined, arrayIndices: [2]}]);\n\n  var lookupA0X = MinimongoTest.makeLookupFunction('a.0.x');\n  test.equal(lookupA0X({a: [{x: 1}]}), [\n    // From interpreting '0' as \"0th array element\".\n    {value: 1, arrayIndices: [0, 'x']},\n    // From interpreting '0' as \"after branching in the array, look in the\n    // object {x:1} for a field named 0\".\n    {value: undefined, arrayIndices: [0]}]);\n  test.equal(lookupA0X({a: [{x: [1]}]}), [\n    {value: [1], arrayIndices: [0, 'x']},\n    {value: undefined, arrayIndices: [0]}]);\n  test.equal(lookupA0X({a: 5}), [{value: undefined}]);\n  test.equal(lookupA0X({a: [{x: 1}, {x: [2]}, {y: 3}]}), [\n    // From interpreting '0' as \"0th array element\".\n    {value: 1, arrayIndices: [0, 'x']},\n    // From interpreting '0' as \"after branching in the array, look in the\n    // object {x:1} for a field named 0\".\n    {value: undefined, arrayIndices: [0]},\n    {value: undefined, arrayIndices: [1]},\n    {value: undefined, arrayIndices: [2]}\n  ]);\n\n  test.equal(\n    MinimongoTest.makeLookupFunction('w.x.0.z')({\n      w: [{x: [{z: 5}]}]}), [\n        // From interpreting '0' as \"0th array element\".\n        {value: 5, arrayIndices: [0, 0, 'x']},\n        // From interpreting '0' as \"after branching in the array, look in the\n        // object {z:5} for a field named \"0\".\n        {value: undefined, arrayIndices: [0, 0]}\n      ]);\n});\n\nTinytest.add(\"minimongo - selector_compiler\", function (test) {\n  var matches = function (shouldMatch, selector, doc) {\n    var doesMatch = new Minimongo.Matcher(selector).documentMatches(doc).result;\n    if (doesMatch != shouldMatch) {\n      // XXX super janky\n      test.fail({message: \"minimongo match failure: document \" +\n                 (shouldMatch ? \"should match, but doesn't\" :\n                  \"shouldn't match, but does\"),\n                 selector: JSON.stringify(selector),\n                 document: JSON.stringify(doc)\n                });\n    }\n  };\n\n  var match = _.bind(matches, null, true);\n  var nomatch = _.bind(matches, null, false);\n\n  // XXX blog post about what I learned while writing these tests (weird\n  // mongo edge cases)\n\n  // empty selectors\n  match({}, {});\n  match({}, {a: 12});\n\n  // scalars\n  match(1, {_id: 1, a: 'foo'});\n  nomatch(1, {_id: 2, a: 'foo'});\n  match('a', {_id: 'a', a: 'foo'});\n  nomatch('a', {_id: 'b', a: 'foo'});\n\n  // safety\n  nomatch(undefined, {});\n  nomatch(undefined, {_id: 'foo'});\n  nomatch(false, {_id: 'foo'});\n  nomatch(null, {_id: 'foo'});\n  nomatch({_id: undefined}, {_id: 'foo'});\n  nomatch({_id: false}, {_id: 'foo'});\n  nomatch({_id: null}, {_id: 'foo'});\n\n  // matching one or more keys\n  nomatch({a: 12}, {});\n  match({a: 12}, {a: 12});\n  match({a: 12}, {a: 12, b: 13});\n  match({a: 12, b: 13}, {a: 12, b: 13});\n  match({a: 12, b: 13}, {a: 12, b: 13, c: 14});\n  nomatch({a: 12, b: 13, c: 14}, {a: 12, b: 13});\n  nomatch({a: 12, b: 13}, {b: 13, c: 14});\n\n  match({a: 12}, {a: [12]});\n  match({a: 12}, {a: [11, 12, 13]});\n  nomatch({a: 12}, {a: [11, 13]});\n  match({a: 12, b: 13}, {a: [11, 12, 13], b: [13, 14, 15]});\n  nomatch({a: 12, b: 13}, {a: [11, 12, 13], b: [14, 15]});\n\n  // dates\n  var date1 = new Date;\n  var date2 = new Date(date1.getTime() + 1000);\n  match({a: date1}, {a: date1});\n  nomatch({a: date1}, {a: date2});\n\n\n  // arrays\n  match({a: [1,2]}, {a: [1, 2]});\n  match({a: [1,2]}, {a: [[1, 2]]});\n  match({a: [1,2]}, {a: [[3, 4], [1, 2]]});\n  nomatch({a: [1,2]}, {a: [3, 4]});\n  nomatch({a: [1,2]}, {a: [[[1, 2]]]});\n\n  // literal documents\n  match({a: {b: 12}}, {a: {b: 12}});\n  nomatch({a: {b: 12, c: 13}}, {a: {b: 12}});\n  nomatch({a: {b: 12}}, {a: {b: 12, c: 13}});\n  match({a: {b: 12, c: 13}}, {a: {b: 12, c: 13}});\n  nomatch({a: {b: 12, c: 13}}, {a: {c: 13, b: 12}}); // tested on mongodb\n  nomatch({a: {}}, {a: {b: 12}});\n  nomatch({a: {b:12}}, {a: {}});\n  match(\n    {a: {b: 12, c: [13, true, false, 2.2, \"a\", null, {d: 14}]}},\n    {a: {b: 12, c: [13, true, false, 2.2, \"a\", null, {d: 14}]}});\n  match({a: {b: 12}}, {a: {b: 12}, k: 99});\n\n  match({a: {b: 12}}, {a: [{b: 12}]});\n  nomatch({a: {b: 12}}, {a: [[{b: 12}]]});\n  match({a: {b: 12}}, {a: [{b: 11}, {b: 12}, {b: 13}]});\n  nomatch({a: {b: 12}}, {a: [{b: 11}, {b: 12, c: 20}, {b: 13}]});\n  nomatch({a: {b: 12, c: 20}}, {a: [{b: 11}, {b: 12}, {c: 20}]});\n  match({a: {b: 12, c: 20}}, {a: [{b: 11}, {b: 12, c: 20}, {b: 13}]});\n\n  // null\n  match({a: null}, {a: null});\n  match({a: null}, {b: 12});\n  nomatch({a: null}, {a: 12});\n  match({a: null}, {a: [1, 2, null, 3]}); // tested on mongodb\n  nomatch({a: null}, {a: [1, 2, {}, 3]}); // tested on mongodb\n\n  // order comparisons: $lt, $gt, $lte, $gte\n  match({a: {$lt: 10}}, {a: 9});\n  nomatch({a: {$lt: 10}}, {a: 10});\n  nomatch({a: {$lt: 10}}, {a: 11});\n\n  match({a: {$gt: 10}}, {a: 11});\n  nomatch({a: {$gt: 10}}, {a: 10});\n  nomatch({a: {$gt: 10}}, {a: 9});\n\n  match({a: {$lte: 10}}, {a: 9});\n  match({a: {$lte: 10}}, {a: 10});\n  nomatch({a: {$lte: 10}}, {a: 11});\n\n  match({a: {$gte: 10}}, {a: 11});\n  match({a: {$gte: 10}}, {a: 10});\n  nomatch({a: {$gte: 10}}, {a: 9});\n\n  match({a: {$lt: 10}}, {a: [11, 9, 12]});\n  nomatch({a: {$lt: 10}}, {a: [11, 12]});\n\n  // (there's a full suite of ordering test elsewhere)\n  nomatch({a: {$lt: \"null\"}}, {a: null});\n  match({a: {$lt: {x: [2, 3, 4]}}}, {a: {x: [1, 3, 4]}});\n  match({a: {$gt: {x: [2, 3, 4]}}}, {a: {x: [3, 3, 4]}});\n  nomatch({a: {$gt: {x: [2, 3, 4]}}}, {a: {x: [1, 3, 4]}});\n  nomatch({a: {$gt: {x: [2, 3, 4]}}}, {a: {x: [2, 3, 4]}});\n  nomatch({a: {$lt: {x: [2, 3, 4]}}}, {a: {x: [2, 3, 4]}});\n  match({a: {$gte: {x: [2, 3, 4]}}}, {a: {x: [2, 3, 4]}});\n  match({a: {$lte: {x: [2, 3, 4]}}}, {a: {x: [2, 3, 4]}});\n\n  nomatch({a: {$gt: [2, 3]}}, {a: [1, 2]}); // tested against mongodb\n\n  // composition of two qualifiers\n  nomatch({a: {$lt: 11, $gt: 9}}, {a: 8});\n  nomatch({a: {$lt: 11, $gt: 9}}, {a: 9});\n  match({a: {$lt: 11, $gt: 9}}, {a: 10});\n  nomatch({a: {$lt: 11, $gt: 9}}, {a: 11});\n  nomatch({a: {$lt: 11, $gt: 9}}, {a: 12});\n\n  match({a: {$lt: 11, $gt: 9}}, {a: [8, 9, 10, 11, 12]});\n  match({a: {$lt: 11, $gt: 9}}, {a: [8, 9, 11, 12]}); // tested against mongodb\n\n  // $all\n  match({a: {$all: [1, 2]}}, {a: [1, 2]});\n  nomatch({a: {$all: [1, 2, 3]}}, {a: [1, 2]});\n  match({a: {$all: [1, 2]}}, {a: [3, 2, 1]});\n  match({a: {$all: [1, \"x\"]}}, {a: [3, \"x\", 1]});\n  nomatch({a: {$all: ['2']}}, {a: 2});\n  nomatch({a: {$all: [2]}}, {a: '2'});\n  match({a: {$all: [[1, 2], [1, 3]]}}, {a: [[1, 3], [1, 2], [1, 4]]});\n  nomatch({a: {$all: [[1, 2], [1, 3]]}}, {a: [[1, 4], [1, 2], [1, 4]]});\n  match({a: {$all: [2, 2]}}, {a: [2]}); // tested against mongodb\n  nomatch({a: {$all: [2, 3]}}, {a: [2, 2]});\n\n  nomatch({a: {$all: [1, 2]}}, {a: [[1, 2]]}); // tested against mongodb\n  nomatch({a: {$all: [1, 2]}}, {}); // tested against mongodb, field doesn't exist\n  nomatch({a: {$all: [1, 2]}}, {a: {foo: 'bar'}}); // tested against mongodb, field is not an object\n  nomatch({a: {$all: []}}, {a: []});\n  nomatch({a: {$all: []}}, {a: [5]});\n  match({a: {$all: [/i/, /e/i]}}, {a: [\"foo\", \"bEr\", \"biz\"]});\n  nomatch({a: {$all: [/i/, /e/i]}}, {a: [\"foo\", \"bar\", \"biz\"]});\n  match({a: {$all: [{b: 3}]}}, {a: [{b: 3}]});\n  // Members of $all other than regexps are *equality matches*, not document\n  // matches.\n  nomatch({a: {$all: [{b: 3}]}}, {a: [{b: 3, k: 4}]});\n  test.throws(function () {\n    match({a: {$all: [{$gt: 4}]}}, {});\n  });\n\n  // $exists\n  match({a: {$exists: true}}, {a: 12});\n  nomatch({a: {$exists: true}}, {b: 12});\n  nomatch({a: {$exists: false}}, {a: 12});\n  match({a: {$exists: false}}, {b: 12});\n\n  match({a: {$exists: true}}, {a: []});\n  nomatch({a: {$exists: true}}, {b: []});\n  nomatch({a: {$exists: false}}, {a: []});\n  match({a: {$exists: false}}, {b: []});\n\n  match({a: {$exists: true}}, {a: [1]});\n  nomatch({a: {$exists: true}}, {b: [1]});\n  nomatch({a: {$exists: false}}, {a: [1]});\n  match({a: {$exists: false}}, {b: [1]});\n\n  match({a: {$exists: 1}}, {a: 5});\n  match({a: {$exists: 0}}, {b: 5});\n\n  nomatch({'a.x':{$exists: false}}, {a: [{}, {x: 5}]});\n  match({'a.x':{$exists: true}}, {a: [{}, {x: 5}]});\n  match({'a.x':{$exists: true}}, {a: [{}, {x: 5}]});\n  match({'a.x':{$exists: true}}, {a: {x: []}});\n  match({'a.x':{$exists: true}}, {a: {x: null}});\n\n  // $mod\n  match({a: {$mod: [10, 1]}}, {a: 11});\n  nomatch({a: {$mod: [10, 1]}}, {a: 12});\n  match({a: {$mod: [10, 1]}}, {a: [10, 11, 12]});\n  nomatch({a: {$mod: [10, 1]}}, {a: [10, 12]});\n  _.each([\n    5,\n    [10],\n    [10, 1, 2],\n    \"foo\",\n    {bar: 1},\n    []\n  ], function (badMod) {\n    test.throws(function () {\n      match({a: {$mod: badMod}}, {a: 11});\n    });\n  });\n\n  // $eq\n  nomatch({a: {$eq: 1}}, {a: 2});\n  match({a: {$eq: 2}}, {a: 2});\n  nomatch({a: {$eq: [1]}}, {a: [2]});\n\n  match({a: {$eq: [1, 2]}}, {a: [1, 2]});\n  match({a: {$eq: 1}}, {a: [1, 2]});\n  match({a: {$eq: 2}}, {a: [1, 2]});\n  nomatch({a: {$eq: 3}}, {a: [1, 2]});\n  match({'a.b': {$eq: 1}}, {a: [{b: 1}, {b: 2}]});\n  match({'a.b': {$eq: 2}}, {a: [{b: 1}, {b: 2}]});\n  nomatch({'a.b': {$eq: 3}}, {a: [{b: 1}, {b: 2}]});\n\n  match({a: {$eq: {x: 1}}}, {a: {x: 1}});\n  nomatch({a: {$eq: {x: 1}}}, {a: {x: 2}});\n  nomatch({a: {$eq: {x: 1}}}, {a: {x: 1, y: 2}});\n\n  // $ne\n  match({a: {$ne: 1}}, {a: 2});\n  nomatch({a: {$ne: 2}}, {a: 2});\n  match({a: {$ne: [1]}}, {a: [2]});\n\n  nomatch({a: {$ne: [1, 2]}}, {a: [1, 2]}); // all tested against mongodb\n  nomatch({a: {$ne: 1}}, {a: [1, 2]});\n  nomatch({a: {$ne: 2}}, {a: [1, 2]});\n  match({a: {$ne: 3}}, {a: [1, 2]});\n  nomatch({'a.b': {$ne: 1}}, {a: [{b: 1}, {b: 2}]});\n  nomatch({'a.b': {$ne: 2}}, {a: [{b: 1}, {b: 2}]});\n  match({'a.b': {$ne: 3}}, {a: [{b: 1}, {b: 2}]});\n\n  nomatch({a: {$ne: {x: 1}}}, {a: {x: 1}});\n  match({a: {$ne: {x: 1}}}, {a: {x: 2}});\n  match({a: {$ne: {x: 1}}}, {a: {x: 1, y: 2}});\n\n  // This query means: All 'a.b' must be non-5, and some 'a.b' must be >6.\n  match({'a.b': {$ne: 5, $gt: 6}}, {a: [{b: 2}, {b: 10}]});\n  nomatch({'a.b': {$ne: 5, $gt: 6}}, {a: [{b: 2}, {b: 4}]});\n  nomatch({'a.b': {$ne: 5, $gt: 6}}, {a: [{b: 2}, {b: 5}]});\n  nomatch({'a.b': {$ne: 5, $gt: 6}}, {a: [{b: 10}, {b: 5}]});\n  // Should work the same if the branch is at the bottom.\n  match({a: {$ne: 5, $gt: 6}}, {a: [2, 10]});\n  nomatch({a: {$ne: 5, $gt: 6}}, {a: [2, 4]});\n  nomatch({a: {$ne: 5, $gt: 6}}, {a: [2, 5]});\n  nomatch({a: {$ne: 5, $gt: 6}}, {a: [10, 5]});\n\n  // $in\n  match({a: {$in: [1, 2, 3]}}, {a: 2});\n  nomatch({a: {$in: [1, 2, 3]}}, {a: 4});\n  match({a: {$in: [[1], [2], [3]]}}, {a: [2]});\n  nomatch({a: {$in: [[1], [2], [3]]}}, {a: [4]});\n  match({a: {$in: [{b: 1}, {b: 2}, {b: 3}]}}, {a: {b: 2}});\n  nomatch({a: {$in: [{b: 1}, {b: 2}, {b: 3}]}}, {a: {b: 4}});\n\n  match({a: {$in: [1, 2, 3]}}, {a: [2]}); // tested against mongodb\n  match({a: {$in: [{x: 1}, {x: 2}, {x: 3}]}}, {a: [{x: 2}]});\n  match({a: {$in: [1, 2, 3]}}, {a: [4, 2]});\n  nomatch({a: {$in: [1, 2, 3]}}, {a: [4]});\n\n  match({a: {$in: ['x', /foo/i]}}, {a: 'x'});\n  match({a: {$in: ['x', /foo/i]}}, {a: 'fOo'});\n  match({a: {$in: ['x', /foo/i]}}, {a: ['f', 'fOo']});\n  nomatch({a: {$in: ['x', /foo/i]}}, {a: ['f', 'fOx']});\n\n  match({a: {$in: [1, null]}}, {});\n  match({'a.b': {$in: [1, null]}}, {});\n  match({'a.b': {$in: [1, null]}}, {a: {}});\n  match({'a.b': {$in: [1, null]}}, {a: {b: null}});\n  nomatch({'a.b': {$in: [1, null]}}, {a: {b: 5}});\n  nomatch({'a.b': {$in: [1]}}, {a: {b: null}});\n  nomatch({'a.b': {$in: [1]}}, {a: {}});\n  nomatch({'a.b': {$in: [1, null]}}, {a: [{b: 5}]});\n  match({'a.b': {$in: [1, null]}}, {a: [{b: 5}, {}]});\n  nomatch({'a.b': {$in: [1, null]}}, {a: [{b: 5}, []]});\n  nomatch({'a.b': {$in: [1, null]}}, {a: [{b: 5}, 5]});\n\n  // $nin\n  nomatch({a: {$nin: [1, 2, 3]}}, {a: 2});\n  match({a: {$nin: [1, 2, 3]}}, {a: 4});\n  nomatch({a: {$nin: [[1], [2], [3]]}}, {a: [2]});\n  match({a: {$nin: [[1], [2], [3]]}}, {a: [4]});\n  nomatch({a: {$nin: [{b: 1}, {b: 2}, {b: 3}]}}, {a: {b: 2}});\n  match({a: {$nin: [{b: 1}, {b: 2}, {b: 3}]}}, {a: {b: 4}});\n\n  nomatch({a: {$nin: [1, 2, 3]}}, {a: [2]}); // tested against mongodb\n  nomatch({a: {$nin: [{x: 1}, {x: 2}, {x: 3}]}}, {a: [{x: 2}]});\n  nomatch({a: {$nin: [1, 2, 3]}}, {a: [4, 2]});\n  nomatch({'a.b': {$nin: [1, 2, 3]}}, {a: [{b:4}, {b:2}]});\n  match({a: {$nin: [1, 2, 3]}}, {a: [4]});\n  match({'a.b': {$nin: [1, 2, 3]}}, {a: [{b:4}]});\n\n  nomatch({a: {$nin: ['x', /foo/i]}}, {a: 'x'});\n  nomatch({a: {$nin: ['x', /foo/i]}}, {a: 'fOo'});\n  nomatch({a: {$nin: ['x', /foo/i]}}, {a: ['f', 'fOo']});\n  match({a: {$nin: ['x', /foo/i]}}, {a: ['f', 'fOx']});\n\n  nomatch({a: {$nin: [1, null]}}, {});\n  nomatch({'a.b': {$nin: [1, null]}}, {});\n  nomatch({'a.b': {$nin: [1, null]}}, {a: {}});\n  nomatch({'a.b': {$nin: [1, null]}}, {a: {b: null}});\n  match({'a.b': {$nin: [1, null]}}, {a: {b: 5}});\n  match({'a.b': {$nin: [1]}}, {a: {b: null}});\n  match({'a.b': {$nin: [1]}}, {a: {}});\n  match({'a.b': {$nin: [1, null]}}, {a: [{b: 5}]});\n  nomatch({'a.b': {$nin: [1, null]}}, {a: [{b: 5}, {}]});\n  match({'a.b': {$nin: [1, null]}}, {a: [{b: 5}, []]});\n  match({'a.b': {$nin: [1, null]}}, {a: [{b: 5}, 5]});\n\n  // $size\n  match({a: {$size: 0}}, {a: []});\n  match({a: {$size: 1}}, {a: [2]});\n  match({a: {$size: 2}}, {a: [2, 2]});\n  nomatch({a: {$size: 0}}, {a: [2]});\n  nomatch({a: {$size: 1}}, {a: []});\n  nomatch({a: {$size: 1}}, {a: [2, 2]});\n  nomatch({a: {$size: 0}}, {a: \"2\"});\n  nomatch({a: {$size: 1}}, {a: \"2\"});\n  nomatch({a: {$size: 2}}, {a: \"2\"});\n\n  nomatch({a: {$size: 2}}, {a: [[2,2]]}); // tested against mongodb\n\n\n  // $bitsAllClear - number\n  match({a: {$bitsAllClear: [0,1,2,3]}}, {a: 0});\n  match({a: {$bitsAllClear: [0,1,2,3]}}, {a: 0b10000});\n  nomatch({a: {$bitsAllClear: [0,1,2,3]}}, {a: 0b1});\n  nomatch({a: {$bitsAllClear: [0,1,2,3]}}, {a: 0b10});\n  nomatch({a: {$bitsAllClear: [0,1,2,3]}}, {a: 0b100});\n  nomatch({a: {$bitsAllClear: [0,1,2,3]}}, {a: 0b1000});\n\n  // $bitsAllClear - buffer\n  match({a: {$bitsAllClear: new Uint8Array([3])}}, {a: new Uint8Array([4])});\n  match({a: {$bitsAllClear: new Uint8Array([0, 1])}}, {a: new Uint8Array([255])});  // 256 should not be set for 255.\n  match({a: {$bitsAllClear: new Uint8Array([3])}}, {a: 4 });\n\n  match({a: {$bitsAllClear: new Uint8Array([3])}}, {a: 0 });\n\n  // $bitsAllSet - number\n  match({a: {$bitsAllSet: [0,1,2,3]}}, {a: 0b1111});\n  nomatch({a: {$bitsAllSet: [0,1,2,3]}}, {a: 0b111});\n  nomatch({a: {$bitsAllSet: [0,1,2,3]}}, {a: 256});\n  nomatch({a: {$bitsAllSet: [0,1,2,3]}}, {a: 50000});\n  match({a: {$bitsAllSet: [0,1,2]}}, {a: 15});\n  match({a: {$bitsAllSet: [0, 12]}}, {a: 0b1000000000001});\n  nomatch({a: {$bitsAllSet: [0, 12]}}, {a: 0b1000000000000});\n  nomatch({a: {$bitsAllSet: [0, 12]}}, {a: 0b1});\n\n  // $bitsAllSet - buffer\n  match({a: {$bitsAllSet: new Uint8Array([3])}}, {a: new Uint8Array([3])});\n  match({a: {$bitsAllSet: new Uint8Array([7])}}, {a: new Uint8Array([15])});\n  match({a: {$bitsAllSet: new Uint8Array([3])}}, {a: 3 });\n\n  // $bitsAnySet - number\n  match({a: {$bitsAnySet: [0,1,2,3]}}, {a: 0b1});\n  match({a: {$bitsAnySet: [0,1,2,3]}}, {a: 0b10});\n  match({a: {$bitsAnySet: [0,1,2,3]}}, {a: 0b100});\n  match({a: {$bitsAnySet: [0,1,2,3]}}, {a: 0b1000});\n  match({a: {$bitsAnySet: [4]}}, {a: 0b10000});\n  nomatch({a: {$bitsAnySet: [0,1,2,3]}}, {a: 0b10000});\n  nomatch({a: {$bitsAnySet: [0,1,2,3]}}, {a: 0});\n\n  // $bitsAnySet - buffer\n  match({a: {$bitsAnySet: new Uint8Array([3])}}, {a: new Uint8Array([7])});\n  match({a: {$bitsAnySet: new Uint8Array([15])}}, {a: new Uint8Array([7])});\n  match({a: {$bitsAnySet: new Uint8Array([3])}}, {a: 1 });\n\n  // $bitsAnyClear - number\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b1});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b10});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b100});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b1000});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b10000});\n  nomatch({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b1111});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b111});\n  nomatch({a: {$bitsAnyClear: [0,1,2]}}, {a: 0b111});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b11});\n  nomatch({a: {$bitsAnyClear: [0,1]}}, {a: 0b11});\n  match({a: {$bitsAnyClear: [0,1,2,3]}}, {a: 0b1});\n  nomatch({a: {$bitsAnyClear: [0]}}, {a: 0b1});\n  nomatch({a: {$bitsAnyClear: [4]}}, {a: 0b10000});\n\n  // $bitsAnyClear - buffer\n  match({a: {$bitsAnyClear: new Uint8Array([8])}}, {a: new Uint8Array([7])});\n  match({a: {$bitsAnyClear: new Uint8Array([1])}}, {a: new Uint8Array([0])});\n  match({a: {$bitsAnyClear: new Uint8Array([1])}}, {a: 4 });\n\n\n  // $type\n  match({a: {$type: 1}}, {a: 1.1});\n  match({a: {$type: 1}}, {a: 1});\n  nomatch({a: {$type: 1}}, {a: \"1\"});\n  match({a: {$type: 2}}, {a: \"1\"});\n  nomatch({a: {$type: 2}}, {a: 1});\n  match({a: {$type: 3}}, {a: {}});\n  match({a: {$type: 3}}, {a: {b: 2}});\n  nomatch({a: {$type: 3}}, {a: []});\n  nomatch({a: {$type: 3}}, {a: [1]});\n  nomatch({a: {$type: 3}}, {a: null});\n  match({a: {$type: 5}}, {a: EJSON.newBinary(0)});\n  match({a: {$type: 5}}, {a: EJSON.newBinary(4)});\n  nomatch({a: {$type: 5}}, {a: []});\n  nomatch({a: {$type: 5}}, {a: [42]});\n  match({a: {$type: 7}}, {a: new MongoID.ObjectID()});\n  nomatch({a: {$type: 7}}, {a: \"1234567890abcd1234567890\"});\n  match({a: {$type: 8}}, {a: true});\n  match({a: {$type: 8}}, {a: false});\n  nomatch({a: {$type: 8}}, {a: \"true\"});\n  nomatch({a: {$type: 8}}, {a: 0});\n  nomatch({a: {$type: 8}}, {a: null});\n  nomatch({a: {$type: 8}}, {a: ''});\n  nomatch({a: {$type: 8}}, {});\n  match({a: {$type: 9}}, {a: (new Date)});\n  nomatch({a: {$type: 9}}, {a: +(new Date)});\n  match({a: {$type: 10}}, {a: null});\n  nomatch({a: {$type: 10}}, {a: false});\n  nomatch({a: {$type: 10}}, {a: ''});\n  nomatch({a: {$type: 10}}, {a: 0});\n  nomatch({a: {$type: 10}}, {});\n  match({a: {$type: 11}}, {a: /x/});\n  nomatch({a: {$type: 11}}, {a: 'x'});\n  nomatch({a: {$type: 11}}, {});\n\n  // The normal rule for {$type:4} (4 means array) is that it NOT good enough to\n  // just have an array that's the leaf that matches the path.  (An array inside\n  // that array is good, though.)\n  nomatch({a: {$type: 4}}, {a: []});\n  nomatch({a: {$type: 4}}, {a: [1]}); // tested against mongodb\n  match({a: {$type: 1}}, {a: [1]});\n  nomatch({a: {$type: 2}}, {a: [1]});\n  match({a: {$type: 1}}, {a: [\"1\", 1]});\n  match({a: {$type: 2}}, {a: [\"1\", 1]});\n  nomatch({a: {$type: 3}}, {a: [\"1\", 1]});\n  nomatch({a: {$type: 4}}, {a: [\"1\", 1]});\n  nomatch({a: {$type: 1}}, {a: [\"1\", []]});\n  match({a: {$type: 2}}, {a: [\"1\", []]});\n  match({a: {$type: 4}}, {a: [\"1\", []]}); // tested against mongodb\n  // An exception to the normal rule is that an array found via numeric index is\n  // examined itself, and its elements are not.\n  match({'a.0': {$type: 4}}, {a: [[0]]});\n  nomatch({'a.0': {$type: 1}}, {a: [[0]]});\n\n  // regular expressions\n  match({a: /a/}, {a: 'cat'});\n  nomatch({a: /a/}, {a: 'cut'});\n  nomatch({a: /a/}, {a: 'CAT'});\n  match({a: /a/i}, {a: 'CAT'});\n  match({a: /a/}, {a: ['foo', 'bar']});  // search within array...\n  nomatch({a: /,/}, {a: ['foo', 'bar']});  // but not by stringifying\n  match({a: {$regex: 'a'}}, {a: ['foo', 'bar']});\n  nomatch({a: {$regex: ','}}, {a: ['foo', 'bar']});\n  match({a: {$regex: /a/}}, {a: 'cat'});\n  nomatch({a: {$regex: /a/}}, {a: 'cut'});\n  nomatch({a: {$regex: /a/}}, {a: 'CAT'});\n  match({a: {$regex: /a/i}}, {a: 'CAT'});\n  match({a: {$regex: /a/, $options: 'i'}}, {a: 'CAT'}); // tested\n  match({a: {$regex: /a/i, $options: 'i'}}, {a: 'CAT'}); // tested\n  nomatch({a: {$regex: /a/i, $options: ''}}, {a: 'CAT'}); // tested\n  match({a: {$regex: 'a'}}, {a: 'cat'});\n  nomatch({a: {$regex: 'a'}}, {a: 'cut'});\n  nomatch({a: {$regex: 'a'}}, {a: 'CAT'});\n  match({a: {$regex: 'a', $options: 'i'}}, {a: 'CAT'});\n  match({a: {$regex: '', $options: 'i'}}, {a: 'foo'});\n  nomatch({a: {$regex: '', $options: 'i'}}, {});\n  nomatch({a: {$regex: '', $options: 'i'}}, {a: 5});\n  nomatch({a: /undefined/}, {});\n  nomatch({a: {$regex: 'undefined'}}, {});\n  nomatch({a: /xxx/}, {});\n  nomatch({a: {$regex: 'xxx'}}, {});\n\n  // GitHub issue #2817:\n  // Regexps with a global flag ('g') keep a state when tested against the same\n  // string. Selector shouldn't return different result for similar documents\n  // because of this state.\n  var reusedRegexp = /sh/ig;\n  match({a: reusedRegexp}, {a: 'Shorts'});\n  match({a: reusedRegexp}, {a: 'Shorts'});\n  match({a: reusedRegexp}, {a: 'Shorts'});\n\n  match({a: {$regex: reusedRegexp}}, {a: 'Shorts'});\n  match({a: {$regex: reusedRegexp}}, {a: 'Shorts'});\n  match({a: {$regex: reusedRegexp}}, {a: 'Shorts'});\n\n  test.throws(function () {\n    match({a: {$options: 'i'}}, {a: 12});\n  });\n\n  match({a: /a/}, {a: ['dog', 'cat']});\n  nomatch({a: /a/}, {a: ['dog', 'puppy']});\n\n  // we don't support regexps in minimongo very well (eg, there's no EJSON\n  // encoding so it won't go over the wire), but run these tests anyway\n  match({a: /a/}, {a: /a/});\n  match({a: /a/}, {a: ['x', /a/]});\n  nomatch({a: /a/}, {a: /a/i});\n  nomatch({a: /a/m}, {a: /a/});\n  nomatch({a: /a/}, {a: /b/});\n  nomatch({a: /5/}, {a: 5});\n  nomatch({a: /t/}, {a: true});\n  match({a: /m/i}, {a: ['x', 'xM']});\n\n  test.throws(function () {\n    match({a: {$regex: /a/, $options: 'x'}}, {a: 'cat'});\n  });\n  test.throws(function () {\n    match({a: {$regex: /a/, $options: 's'}}, {a: 'cat'});\n  });\n\n  // $not\n  match({x: {$not: {$gt: 7}}}, {x: 6});\n  nomatch({x: {$not: {$gt: 7}}}, {x: 8});\n  match({x: {$not: {$lt: 10, $gt: 7}}}, {x: 11});\n  nomatch({x: {$not: {$lt: 10, $gt: 7}}}, {x: 9});\n  match({x: {$not: {$lt: 10, $gt: 7}}}, {x: 6});\n\n  match({x: {$not: {$gt: 7}}}, {x: [2, 3, 4]});\n  match({'x.y': {$not: {$gt: 7}}}, {x: [{y:2}, {y:3}, {y:4}]});\n  nomatch({x: {$not: {$gt: 7}}}, {x: [2, 3, 4, 10]});\n  nomatch({'x.y': {$not: {$gt: 7}}}, {x: [{y:2}, {y:3}, {y:4}, {y:10}]});\n\n  match({x: {$not: /a/}}, {x: \"dog\"});\n  nomatch({x: {$not: /a/}}, {x: \"cat\"});\n  match({x: {$not: /a/}}, {x: [\"dog\", \"puppy\"]});\n  nomatch({x: {$not: /a/}}, {x: [\"kitten\", \"cat\"]});\n\n  // dotted keypaths: bare values\n  match({\"a.b\": 1}, {a: {b: 1}});\n  nomatch({\"a.b\": 1}, {a: {b: 2}});\n  match({\"a.b\": [1,2,3]}, {a: {b: [1,2,3]}});\n  nomatch({\"a.b\": [1,2,3]}, {a: {b: [4]}});\n  match({\"a.b\": /a/}, {a: {b: \"cat\"}});\n  nomatch({\"a.b\": /a/}, {a: {b: \"dog\"}});\n  match({\"a.b.c\": null}, {});\n  match({\"a.b.c\": null}, {a: 1});\n  match({\"a.b\": null}, {a: 1});\n  match({\"a.b.c\": null}, {a: {b: 4}});\n\n  // dotted keypaths, nulls, numeric indices, arrays\n  nomatch({\"a.b\": null}, {a: [1]});\n  match({\"a.b\": []}, {a: {b: []}});\n  var big = {a: [{b: 1}, 2, {}, {b: [3, 4]}]};\n  match({\"a.b\": 1}, big);\n  match({\"a.b\": [3, 4]}, big);\n  match({\"a.b\": 3}, big);\n  match({\"a.b\": 4}, big);\n  match({\"a.b\": null}, big);  // matches on slot 2\n  match({'a.1': 8}, {a: [7, 8, 9]});\n  nomatch({'a.1': 7}, {a: [7, 8, 9]});\n  nomatch({'a.1': null}, {a: [7, 8, 9]});\n  match({'a.1': [8, 9]}, {a: [7, [8, 9]]});\n  nomatch({'a.1': 6}, {a: [[6, 7], [8, 9]]});\n  nomatch({'a.1': 7}, {a: [[6, 7], [8, 9]]});\n  nomatch({'a.1': 8}, {a: [[6, 7], [8, 9]]});\n  nomatch({'a.1': 9}, {a: [[6, 7], [8, 9]]});\n  match({\"a.1\": 2}, {a: [0, {1: 2}, 3]});\n  match({\"a.1\": {1: 2}}, {a: [0, {1: 2}, 3]});\n  match({\"x.1.y\": 8}, {x: [7, {y: 8}, 9]});\n  // comes from trying '1' as key in the plain object\n  match({\"x.1.y\": null}, {x: [7, {y: 8}, 9]});\n  match({\"a.1.b\": 9}, {a: [7, {b: 9}, {1: {b: 'foo'}}]});\n  match({\"a.1.b\": 'foo'}, {a: [7, {b: 9}, {1: {b: 'foo'}}]});\n  match({\"a.1.b\": null}, {a: [7, {b: 9}, {1: {b: 'foo'}}]});\n  match({\"a.1.b\": 2}, {a: [1, [{b: 2}], 3]});\n  nomatch({\"a.1.b\": null}, {a: [1, [{b: 2}], 3]});\n  // this is new behavior in mongo 2.5\n  nomatch({\"a.0.b\": null}, {a: [5]});\n  match({\"a.1\": 4}, {a: [{1: 4}, 5]});\n  match({\"a.1\": 5}, {a: [{1: 4}, 5]});\n  nomatch({\"a.1\": null}, {a: [{1: 4}, 5]});\n  match({\"a.1.foo\": 4}, {a: [{1: {foo: 4}}, {foo: 5}]});\n  match({\"a.1.foo\": 5}, {a: [{1: {foo: 4}}, {foo: 5}]});\n  match({\"a.1.foo\": null}, {a: [{1: {foo: 4}}, {foo: 5}]});\n\n  // trying to access a dotted field that is undefined at some point\n  // down the chain\n  nomatch({\"a.b\": 1}, {x: 2});\n  nomatch({\"a.b.c\": 1}, {a: {x: 2}});\n  nomatch({\"a.b.c\": 1}, {a: {b: {x: 2}}});\n  nomatch({\"a.b.c\": 1}, {a: {b: 1}});\n  nomatch({\"a.b.c\": 1}, {a: {b: 0}});\n\n  // dotted keypaths: literal objects\n  match({\"a.b\": {c: 1}}, {a: {b: {c: 1}}});\n  nomatch({\"a.b\": {c: 1}}, {a: {b: {c: 2}}});\n  nomatch({\"a.b\": {c: 1}}, {a: {b: 2}});\n  match({\"a.b\": {c: 1, d: 2}}, {a: {b: {c: 1, d: 2}}});\n  nomatch({\"a.b\": {c: 1, d: 2}}, {a: {b: {c: 1, d: 1}}});\n  nomatch({\"a.b\": {c: 1, d: 2}}, {a: {b: {d: 2}}});\n\n  // dotted keypaths: $ operators\n  match({\"a.b\": {$in: [1, 2, 3]}}, {a: {b: [2]}}); // tested against mongodb\n  match({\"a.b\": {$in: [{x: 1}, {x: 2}, {x: 3}]}}, {a: {b: [{x: 2}]}});\n  match({\"a.b\": {$in: [1, 2, 3]}}, {a: {b: [4, 2]}});\n  nomatch({\"a.b\": {$in: [1, 2, 3]}}, {a: {b: [4]}});\n\n  // $or\n  test.throws(function () {\n    match({$or: []}, {});\n  });\n  test.throws(function () {\n    match({$or: [5]}, {});\n  });\n  test.throws(function () {\n    match({$or: []}, {a: 1});\n  });\n  match({$or: [{a: 1}]}, {a: 1});\n  nomatch({$or: [{b: 2}]}, {a: 1});\n  match({$or: [{a: 1}, {b: 2}]}, {a: 1});\n  nomatch({$or: [{c: 3}, {d: 4}]}, {a: 1});\n  match({$or: [{a: 1}, {b: 2}]}, {a: [1, 2, 3]});\n  nomatch({$or: [{a: 1}, {b: 2}]}, {c: [1, 2, 3]});\n  nomatch({$or: [{a: 1}, {b: 2}]}, {a: [2, 3, 4]});\n  match({$or: [{a: 1}, {a: 2}]}, {a: 1});\n  match({$or: [{a: 1}, {a: 2}], b: 2}, {a: 1, b: 2});\n  nomatch({$or: [{a: 2}, {a: 3}], b: 2}, {a: 1, b: 2});\n  nomatch({$or: [{a: 1}, {a: 2}], b: 3}, {a: 1, b: 2});\n\n  // Combining $or with equality\n  match({x: 1, $or: [{a: 1}, {b: 1}]}, {x: 1, b: 1});\n  match({$or: [{a: 1}, {b: 1}], x: 1}, {x: 1, b: 1});\n  nomatch({x: 1, $or: [{a: 1}, {b: 1}]}, {b: 1});\n  nomatch({x: 1, $or: [{a: 1}, {b: 1}]}, {x: 1});\n\n  // $or and $lt, $lte, $gt, $gte\n  match({$or: [{a: {$lte: 1}}, {a: 2}]}, {a: 1});\n  nomatch({$or: [{a: {$lt: 1}}, {a: 2}]}, {a: 1});\n  match({$or: [{a: {$gte: 1}}, {a: 2}]}, {a: 1});\n  nomatch({$or: [{a: {$gt: 1}}, {a: 2}]}, {a: 1});\n  match({$or: [{b: {$gt: 1}}, {b: {$lt: 3}}]}, {b: 2});\n  nomatch({$or: [{b: {$lt: 1}}, {b: {$gt: 3}}]}, {b: 2});\n\n  // $or and $in\n  match({$or: [{a: {$in: [1, 2, 3]}}]}, {a: 1});\n  nomatch({$or: [{a: {$in: [4, 5, 6]}}]}, {a: 1});\n  match({$or: [{a: {$in: [1, 2, 3]}}, {b: 2}]}, {a: 1});\n  match({$or: [{a: {$in: [1, 2, 3]}}, {b: 2}]}, {b: 2});\n  nomatch({$or: [{a: {$in: [1, 2, 3]}}, {b: 2}]}, {c: 3});\n  match({$or: [{a: {$in: [1, 2, 3]}}, {b: {$in: [1, 2, 3]}}]}, {b: 2});\n  nomatch({$or: [{a: {$in: [1, 2, 3]}}, {b: {$in: [4, 5, 6]}}]}, {b: 2});\n\n  // $or and $nin\n  nomatch({$or: [{a: {$nin: [1, 2, 3]}}]}, {a: 1});\n  match({$or: [{a: {$nin: [4, 5, 6]}}]}, {a: 1});\n  nomatch({$or: [{a: {$nin: [1, 2, 3]}}, {b: 2}]}, {a: 1});\n  match({$or: [{a: {$nin: [1, 2, 3]}}, {b: 2}]}, {b: 2});\n  match({$or: [{a: {$nin: [1, 2, 3]}}, {b: 2}]}, {c: 3});\n  match({$or: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [1, 2, 3]}}]}, {b: 2});\n  nomatch({$or: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [1, 2, 3]}}]}, {a: 1, b: 2});\n  match({$or: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [4, 5, 6]}}]}, {b: 2});\n\n  // $or and dot-notation\n  match({$or: [{\"a.b\": 1}, {\"a.b\": 2}]}, {a: {b: 1}});\n  match({$or: [{\"a.b\": 1}, {\"a.c\": 1}]}, {a: {b: 1}});\n  nomatch({$or: [{\"a.b\": 2}, {\"a.c\": 1}]}, {a: {b: 1}});\n\n  // $or and nested objects\n  match({$or: [{a: {b: 1, c: 2}}, {a: {b: 2, c: 1}}]}, {a: {b: 1, c: 2}});\n  nomatch({$or: [{a: {b: 1, c: 3}}, {a: {b: 2, c: 1}}]}, {a: {b: 1, c: 2}});\n\n  // $or and regexes\n  match({$or: [{a: /a/}]}, {a: \"cat\"});\n  nomatch({$or: [{a: /o/}]}, {a: \"cat\"});\n  match({$or: [{a: /a/}, {a: /o/}]}, {a: \"cat\"});\n  nomatch({$or: [{a: /i/}, {a: /o/}]}, {a: \"cat\"});\n  match({$or: [{a: /i/}, {b: /o/}]}, {a: \"cat\", b: \"dog\"});\n\n  // $or and $ne\n  match({$or: [{a: {$ne: 1}}]}, {});\n  nomatch({$or: [{a: {$ne: 1}}]}, {a: 1});\n  match({$or: [{a: {$ne: 1}}]}, {a: 2});\n  match({$or: [{a: {$ne: 1}}]}, {b: 1});\n  match({$or: [{a: {$ne: 1}}, {a: {$ne: 2}}]}, {a: 1});\n  match({$or: [{a: {$ne: 1}}, {b: {$ne: 1}}]}, {a: 1});\n  nomatch({$or: [{a: {$ne: 1}}, {b: {$ne: 2}}]}, {a: 1, b: 2});\n\n  // $or and $not\n  match({$or: [{a: {$not: {$mod: [10, 1]}}}]}, {});\n  nomatch({$or: [{a: {$not: {$mod: [10, 1]}}}]}, {a: 1});\n  match({$or: [{a: {$not: {$mod: [10, 1]}}}]}, {a: 2});\n  match({$or: [{a: {$not: {$mod: [10, 1]}}}, {a: {$not: {$mod: [10, 2]}}}]}, {a: 1});\n  nomatch({$or: [{a: {$not: {$mod: [10, 1]}}}, {a: {$mod: [10, 2]}}]}, {a: 1});\n  match({$or: [{a: {$not: {$mod: [10, 1]}}}, {a: {$mod: [10, 2]}}]}, {a: 2});\n  match({$or: [{a: {$not: {$mod: [10, 1]}}}, {a: {$mod: [10, 2]}}]}, {a: 3});\n  // this is possibly an open-ended task, so we stop here ...\n\n  // $nor\n  test.throws(function () {\n    match({$nor: []}, {});\n  });\n  test.throws(function () {\n    match({$nor: [5]}, {});\n  });\n  test.throws(function () {\n    match({$nor: []}, {a: 1});\n  });\n  nomatch({$nor: [{a: 1}]}, {a: 1});\n  match({$nor: [{b: 2}]}, {a: 1});\n  nomatch({$nor: [{a: 1}, {b: 2}]}, {a: 1});\n  match({$nor: [{c: 3}, {d: 4}]}, {a: 1});\n  nomatch({$nor: [{a: 1}, {b: 2}]}, {a: [1, 2, 3]});\n  match({$nor: [{a: 1}, {b: 2}]}, {c: [1, 2, 3]});\n  match({$nor: [{a: 1}, {b: 2}]}, {a: [2, 3, 4]});\n  nomatch({$nor: [{a: 1}, {a: 2}]}, {a: 1});\n\n  // $nor and $lt, $lte, $gt, $gte\n  nomatch({$nor: [{a: {$lte: 1}}, {a: 2}]}, {a: 1});\n  match({$nor: [{a: {$lt: 1}}, {a: 2}]}, {a: 1});\n  nomatch({$nor: [{a: {$gte: 1}}, {a: 2}]}, {a: 1});\n  match({$nor: [{a: {$gt: 1}}, {a: 2}]}, {a: 1});\n  nomatch({$nor: [{b: {$gt: 1}}, {b: {$lt: 3}}]}, {b: 2});\n  match({$nor: [{b: {$lt: 1}}, {b: {$gt: 3}}]}, {b: 2});\n\n  // $nor and $in\n  nomatch({$nor: [{a: {$in: [1, 2, 3]}}]}, {a: 1});\n  match({$nor: [{a: {$in: [4, 5, 6]}}]}, {a: 1});\n  nomatch({$nor: [{a: {$in: [1, 2, 3]}}, {b: 2}]}, {a: 1});\n  nomatch({$nor: [{a: {$in: [1, 2, 3]}}, {b: 2}]}, {b: 2});\n  match({$nor: [{a: {$in: [1, 2, 3]}}, {b: 2}]}, {c: 3});\n  nomatch({$nor: [{a: {$in: [1, 2, 3]}}, {b: {$in: [1, 2, 3]}}]}, {b: 2});\n  match({$nor: [{a: {$in: [1, 2, 3]}}, {b: {$in: [4, 5, 6]}}]}, {b: 2});\n\n  // $nor and $nin\n  match({$nor: [{a: {$nin: [1, 2, 3]}}]}, {a: 1});\n  nomatch({$nor: [{a: {$nin: [4, 5, 6]}}]}, {a: 1});\n  match({$nor: [{a: {$nin: [1, 2, 3]}}, {b: 2}]}, {a: 1});\n  nomatch({$nor: [{a: {$nin: [1, 2, 3]}}, {b: 2}]}, {b: 2});\n  nomatch({$nor: [{a: {$nin: [1, 2, 3]}}, {b: 2}]}, {c: 3});\n  nomatch({$nor: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [1, 2, 3]}}]}, {b: 2});\n  match({$nor: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [1, 2, 3]}}]}, {a: 1, b: 2});\n  nomatch({$nor: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [4, 5, 6]}}]}, {b: 2});\n\n  // $nor and dot-notation\n  nomatch({$nor: [{\"a.b\": 1}, {\"a.b\": 2}]}, {a: {b: 1}});\n  nomatch({$nor: [{\"a.b\": 1}, {\"a.c\": 1}]}, {a: {b: 1}});\n  match({$nor: [{\"a.b\": 2}, {\"a.c\": 1}]}, {a: {b: 1}});\n\n  // $nor and nested objects\n  nomatch({$nor: [{a: {b: 1, c: 2}}, {a: {b: 2, c: 1}}]}, {a: {b: 1, c: 2}});\n  match({$nor: [{a: {b: 1, c: 3}}, {a: {b: 2, c: 1}}]}, {a: {b: 1, c: 2}});\n\n  // $nor and regexes\n  nomatch({$nor: [{a: /a/}]}, {a: \"cat\"});\n  match({$nor: [{a: /o/}]}, {a: \"cat\"});\n  nomatch({$nor: [{a: /a/}, {a: /o/}]}, {a: \"cat\"});\n  match({$nor: [{a: /i/}, {a: /o/}]}, {a: \"cat\"});\n  nomatch({$nor: [{a: /i/}, {b: /o/}]}, {a: \"cat\", b: \"dog\"});\n\n  // $nor and $ne\n  nomatch({$nor: [{a: {$ne: 1}}]}, {});\n  match({$nor: [{a: {$ne: 1}}]}, {a: 1});\n  nomatch({$nor: [{a: {$ne: 1}}]}, {a: 2});\n  nomatch({$nor: [{a: {$ne: 1}}]}, {b: 1});\n  nomatch({$nor: [{a: {$ne: 1}}, {a: {$ne: 2}}]}, {a: 1});\n  nomatch({$nor: [{a: {$ne: 1}}, {b: {$ne: 1}}]}, {a: 1});\n  match({$nor: [{a: {$ne: 1}}, {b: {$ne: 2}}]}, {a: 1, b: 2});\n\n  // $nor and $not\n  nomatch({$nor: [{a: {$not: {$mod: [10, 1]}}}]}, {});\n  match({$nor: [{a: {$not: {$mod: [10, 1]}}}]}, {a: 1});\n  nomatch({$nor: [{a: {$not: {$mod: [10, 1]}}}]}, {a: 2});\n  nomatch({$nor: [{a: {$not: {$mod: [10, 1]}}}, {a: {$not: {$mod: [10, 2]}}}]}, {a: 1});\n  match({$nor: [{a: {$not: {$mod: [10, 1]}}}, {a: {$mod: [10, 2]}}]}, {a: 1});\n  nomatch({$nor: [{a: {$not: {$mod: [10, 1]}}}, {a: {$mod: [10, 2]}}]}, {a: 2});\n  nomatch({$nor: [{a: {$not: {$mod: [10, 1]}}}, {a: {$mod: [10, 2]}}]}, {a: 3});\n\n  // $and\n\n  test.throws(function () {\n    match({$and: []}, {});\n  });\n  test.throws(function () {\n    match({$and: [5]}, {});\n  });\n  test.throws(function () {\n    match({$and: []}, {a: 1});\n  });\n  match({$and: [{a: 1}]}, {a: 1});\n  nomatch({$and: [{a: 1}, {a: 2}]}, {a: 1});\n  nomatch({$and: [{a: 1}, {b: 1}]}, {a: 1});\n  match({$and: [{a: 1}, {b: 2}]}, {a: 1, b: 2});\n  nomatch({$and: [{a: 1}, {b: 1}]}, {a: 1, b: 2});\n  match({$and: [{a: 1}, {b: 2}], c: 3}, {a: 1, b: 2, c: 3});\n  nomatch({$and: [{a: 1}, {b: 2}], c: 4}, {a: 1, b: 2, c: 3});\n\n  // $and and regexes\n  match({$and: [{a: /a/}]}, {a: \"cat\"});\n  match({$and: [{a: /a/i}]}, {a: \"CAT\"});\n  nomatch({$and: [{a: /o/}]}, {a: \"cat\"});\n  nomatch({$and: [{a: /a/}, {a: /o/}]}, {a: \"cat\"});\n  match({$and: [{a: /a/}, {b: /o/}]}, {a: \"cat\", b: \"dog\"});\n  nomatch({$and: [{a: /a/}, {b: /a/}]}, {a: \"cat\", b: \"dog\"});\n\n  // $and, dot-notation, and nested objects\n  match({$and: [{\"a.b\": 1}]}, {a: {b: 1}});\n  match({$and: [{a: {b: 1}}]}, {a: {b: 1}});\n  nomatch({$and: [{\"a.b\": 2}]}, {a: {b: 1}});\n  nomatch({$and: [{\"a.c\": 1}]}, {a: {b: 1}});\n  nomatch({$and: [{\"a.b\": 1}, {\"a.b\": 2}]}, {a: {b: 1}});\n  nomatch({$and: [{\"a.b\": 1}, {a: {b: 2}}]}, {a: {b: 1}});\n  match({$and: [{\"a.b\": 1}, {\"c.d\": 2}]}, {a: {b: 1}, c: {d: 2}});\n  nomatch({$and: [{\"a.b\": 1}, {\"c.d\": 1}]}, {a: {b: 1}, c: {d: 2}});\n  match({$and: [{\"a.b\": 1}, {c: {d: 2}}]}, {a: {b: 1}, c: {d: 2}});\n  nomatch({$and: [{\"a.b\": 1}, {c: {d: 1}}]}, {a: {b: 1}, c: {d: 2}});\n  nomatch({$and: [{\"a.b\": 2}, {c: {d: 2}}]}, {a: {b: 1}, c: {d: 2}});\n  match({$and: [{a: {b: 1}}, {c: {d: 2}}]}, {a: {b: 1}, c: {d: 2}});\n  nomatch({$and: [{a: {b: 2}}, {c: {d: 2}}]}, {a: {b: 1}, c: {d: 2}});\n\n  // $and and $in\n  nomatch({$and: [{a: {$in: []}}]}, {});\n  match({$and: [{a: {$in: [1, 2, 3]}}]}, {a: 1});\n  nomatch({$and: [{a: {$in: [4, 5, 6]}}]}, {a: 1});\n  nomatch({$and: [{a: {$in: [1, 2, 3]}}, {a: {$in: [4, 5, 6]}}]}, {a: 1});\n  nomatch({$and: [{a: {$in: [1, 2, 3]}}, {b: {$in: [1, 2, 3]}}]}, {a: 1, b: 4});\n  match({$and: [{a: {$in: [1, 2, 3]}}, {b: {$in: [4, 5, 6]}}]}, {a: 1, b: 4});\n\n\n  // $and and $nin\n  match({$and: [{a: {$nin: []}}]}, {});\n  nomatch({$and: [{a: {$nin: [1, 2, 3]}}]}, {a: 1});\n  match({$and: [{a: {$nin: [4, 5, 6]}}]}, {a: 1});\n  nomatch({$and: [{a: {$nin: [1, 2, 3]}}, {a: {$nin: [4, 5, 6]}}]}, {a: 1});\n  nomatch({$and: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [1, 2, 3]}}]}, {a: 1, b: 4});\n  nomatch({$and: [{a: {$nin: [1, 2, 3]}}, {b: {$nin: [4, 5, 6]}}]}, {a: 1, b: 4});\n\n  // $and and $lt, $lte, $gt, $gte\n  match({$and: [{a: {$lt: 2}}]}, {a: 1});\n  nomatch({$and: [{a: {$lt: 1}}]}, {a: 1});\n  match({$and: [{a: {$lte: 1}}]}, {a: 1});\n  match({$and: [{a: {$gt: 0}}]}, {a: 1});\n  nomatch({$and: [{a: {$gt: 1}}]}, {a: 1});\n  match({$and: [{a: {$gte: 1}}]}, {a: 1});\n  match({$and: [{a: {$gt: 0}}, {a: {$lt: 2}}]}, {a: 1});\n  nomatch({$and: [{a: {$gt: 1}}, {a: {$lt: 2}}]}, {a: 1});\n  nomatch({$and: [{a: {$gt: 0}}, {a: {$lt: 1}}]}, {a: 1});\n  match({$and: [{a: {$gte: 1}}, {a: {$lte: 1}}]}, {a: 1});\n  nomatch({$and: [{a: {$gte: 2}}, {a: {$lte: 0}}]}, {a: 1});\n\n  // $and and $ne\n  match({$and: [{a: {$ne: 1}}]}, {});\n  nomatch({$and: [{a: {$ne: 1}}]}, {a: 1});\n  match({$and: [{a: {$ne: 1}}]}, {a: 2});\n  nomatch({$and: [{a: {$ne: 1}}, {a: {$ne: 2}}]}, {a: 2});\n  match({$and: [{a: {$ne: 1}}, {a: {$ne: 3}}]}, {a: 2});\n\n  // $and and $not\n  match({$and: [{a: {$not: {$gt: 2}}}]}, {a: 1});\n  nomatch({$and: [{a: {$not: {$lt: 2}}}]}, {a: 1});\n  match({$and: [{a: {$not: {$lt: 0}}}, {a: {$not: {$gt: 2}}}]}, {a: 1});\n  nomatch({$and: [{a: {$not: {$lt: 2}}}, {a: {$not: {$gt: 0}}}]}, {a: 1});\n\n  // $where\n  match({$where: \"this.a === 1\"}, {a: 1});\n  match({$where: \"obj.a === 1\"}, {a: 1});\n  nomatch({$where: \"this.a !== 1\"}, {a: 1});\n  nomatch({$where: \"obj.a !== 1\"}, {a: 1});\n  nomatch({$where: \"this.a === 1\", a: 2}, {a: 1});\n  match({$where: \"this.a === 1\", b: 2}, {a: 1, b: 2});\n  match({$where: \"this.a === 1 && this.b === 2\"}, {a: 1, b: 2});\n  match({$where: \"this.a instanceof Array\"}, {a: []});\n  nomatch({$where: \"this.a instanceof Array\"}, {a: 1});\n\n  // reaching into array\n  match({\"dogs.0.name\": \"Fido\"}, {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  match({\"dogs.1.name\": \"Rex\"}, {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  nomatch({\"dogs.1.name\": \"Fido\"}, {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  match({\"room.1b\": \"bla\"}, {room: {\"1b\": \"bla\"}});\n\n  match({\"dogs.name\": \"Fido\"}, {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  match({\"dogs.name\": \"Rex\"}, {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  match({\"animals.dogs.name\": \"Fido\"},\n        {animals: [{dogs: [{name: \"Rover\"}]},\n                   {},\n                   {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]}]});\n  match({\"animals.dogs.name\": \"Fido\"},\n        {animals: [{dogs: {name: \"Rex\"}},\n                   {dogs: {name: \"Fido\"}}]});\n  match({\"animals.dogs.name\": \"Fido\"},\n        {animals: [{dogs: [{name: \"Rover\"}]},\n                   {},\n                   {dogs: [{name: [\"Fido\"]}, {name: \"Rex\"}]}]});\n  nomatch({\"dogs.name\": \"Fido\"}, {dogs: []});\n\n  // $elemMatch\n  match({dogs: {$elemMatch: {name: /e/}}},\n        {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  nomatch({dogs: {$elemMatch: {name: /a/}}},\n          {dogs: [{name: \"Fido\"}, {name: \"Rex\"}]});\n  match({dogs: {$elemMatch: {age: {$gt: 4}}}},\n        {dogs: [{name: \"Fido\", age: 5}, {name: \"Rex\", age: 3}]});\n  match({dogs: {$elemMatch: {name: \"Fido\", age: {$gt: 4}}}},\n        {dogs: [{name: \"Fido\", age: 5}, {name: \"Rex\", age: 3}]});\n  nomatch({dogs: {$elemMatch: {name: \"Fido\", age: {$gt: 5}}}},\n          {dogs: [{name: \"Fido\", age: 5}, {name: \"Rex\", age: 3}]});\n  match({dogs: {$elemMatch: {name: /i/, age: {$gt: 4}}}},\n        {dogs: [{name: \"Fido\", age: 5}, {name: \"Rex\", age: 3}]});\n  nomatch({dogs: {$elemMatch: {name: /e/, age: 5}}},\n          {dogs: [{name: \"Fido\", age: 5}, {name: \"Rex\", age: 3}]});\n  match({x: {$elemMatch: {y: 9}}}, {x: [{y: 9}]});\n  nomatch({x: {$elemMatch: {y: 9}}}, {x: [[{y: 9}]]});\n  match({x: {$elemMatch: {$gt: 5, $lt: 9}}}, {x: [8]});\n  nomatch({x: {$elemMatch: {$gt: 5, $lt: 9}}}, {x: [[8]]});\n  match({'a.x': {$elemMatch: {y: 9}}},\n        {a: [{x: []}, {x: [{y: 9}]}]});\n  nomatch({a: {$elemMatch: {x: 5}}}, {a: {x: 5}});\n  match({a: {$elemMatch: {0: {$gt: 5, $lt: 9}}}}, {a: [[6]]});\n  match({a: {$elemMatch: {'0.b': {$gt: 5, $lt: 9}}}}, {a: [[{b:6}]]});\n  match({a: {$elemMatch: {x: 1, $or: [{a: 1}, {b: 1}]}}},\n        {a: [{x: 1, b: 1}]});\n  match({a: {$elemMatch: {$or: [{a: 1}, {b: 1}], x: 1}}},\n        {a: [{x: 1, b: 1}]});\n  match({a: {$elemMatch: {$or: [{a: 1}, {b: 1}]}}},\n        {a: [{x: 1, b: 1}]});\n  match({a: {$elemMatch: {$or: [{a: 1}, {b: 1}]}}},\n        {a: [{x: 1, b: 1}]});\n  match({a: {$elemMatch: {$and: [{b: 1}, {x: 1}]}}},\n        {a: [{x: 1, b: 1}]});\n  nomatch({a: {$elemMatch: {x: 1, $or: [{a: 1}, {b: 1}]}}},\n          {a: [{b: 1}]});\n  nomatch({a: {$elemMatch: {x: 1, $or: [{a: 1}, {b: 1}]}}},\n          {a: [{x: 1}]});\n  nomatch({a: {$elemMatch: {x: 1, $or: [{a: 1}, {b: 1}]}}},\n          {a: [{x: 1}, {b: 1}]});\n\n  test.throws(function () {\n    match({a: {$elemMatch: {$gte: 1, $or: [{a: 1}, {b: 1}]}}},\n          {a: [{x: 1, b: 1}]});\n  });\n\n  test.throws(function () {\n    match({x: {$elemMatch: {$and: [{$gt: 5, $lt: 9}]}}}, {x: [8]});\n  });\n\n  // $comment\n  match({a: 5, $comment: \"asdf\"}, {a: 5});\n  nomatch({a: 6, $comment: \"asdf\"}, {a: 5});\n\n  // XXX still needs tests:\n  // - non-scalar arguments to $gt, $lt, etc\n});\n\nTinytest.add(\"minimongo - projection_compiler\", function (test) {\n  var testProjection = function (projection, tests) {\n    var projection_f = LocalCollection._compileProjection(projection);\n    var equalNonStrict = function (a, b, desc) {\n      test.isTrue(_.isEqual(a, b), desc);\n    };\n\n    _.each(tests, function (testCase) {\n      equalNonStrict(projection_f(testCase[0]), testCase[1], testCase[2]);\n    });\n  };\n\n  var testCompileProjectionThrows = function (projection, expectedError) {\n    test.throws(function () {\n      LocalCollection._compileProjection(projection);\n    }, expectedError);\n  };\n\n  testProjection({ 'foo': 1, 'bar': 1 }, [\n    [{ foo: 42, bar: \"something\", baz: \"else\" },\n     { foo: 42, bar: \"something\" },\n     \"simplest - whitelist\"],\n\n    [{ foo: { nested: 17 }, baz: {} },\n     { foo: { nested: 17 } },\n     \"nested whitelisted field\"],\n\n    [{ _id: \"uid\", bazbaz: 42 },\n     { _id: \"uid\" },\n     \"simplest whitelist - preserve _id\"]\n  ]);\n\n  testProjection({ 'foo': 0, 'bar': 0 }, [\n    [{ foo: 42, bar: \"something\", baz: \"else\" },\n     { baz: \"else\" },\n     \"simplest - blacklist\"],\n\n    [{ foo: { nested: 17 }, baz: { foo: \"something\" } },\n     { baz: { foo: \"something\" } },\n     \"nested blacklisted field\"],\n\n    [{ _id: \"uid\", bazbaz: 42 },\n     { _id: \"uid\", bazbaz: 42 },\n     \"simplest blacklist - preserve _id\"]\n  ]);\n\n  testProjection({ _id: 0, foo: 1 }, [\n    [{ foo: 42, bar: 33, _id: \"uid\" },\n     { foo: 42 },\n     \"whitelist - _id blacklisted\"]\n  ]);\n\n  testProjection({ _id: 0, foo: 0 }, [\n    [{ foo: 42, bar: 33, _id: \"uid\" },\n     { bar: 33 },\n     \"blacklist - _id blacklisted\"]\n  ]);\n\n  testProjection({ 'foo.bar.baz': 1 }, [\n    [{ foo: { meh: \"fur\", bar: { baz: 42 }, tr: 1 }, bar: 33, baz: 'trolololo' },\n     { foo: { bar: { baz: 42 } } },\n     \"whitelist nested\"],\n\n    // Behavior of this test is looked up in actual mongo\n    [{ foo: { meh: \"fur\", bar: \"nope\", tr: 1 }, bar: 33, baz: 'trolololo' },\n     { foo: {} },\n     \"whitelist nested - path not found in doc, different type\"],\n\n    // Behavior of this test is looked up in actual mongo\n    [{ foo: { meh: \"fur\", bar: [], tr: 1 }, bar: 33, baz: 'trolololo' },\n     { foo: { bar: [] } },\n     \"whitelist nested - path not found in doc\"]\n  ]);\n\n  testProjection({ 'hope.humanity': 0, 'hope.people': 0 }, [\n    [{ hope: { humanity: \"lost\", people: 'broken', candies: 'long live!' } },\n     { hope: { candies: 'long live!' } },\n     \"blacklist nested\"],\n\n    [{ hope: \"new\" },\n     { hope: \"new\" },\n     \"blacklist nested - path not found in doc\"]\n  ]);\n\n  testProjection({ _id: 1 }, [\n    [{ _id: 42, x: 1, y: { z: \"2\" } },\n     { _id: 42 },\n     \"_id whitelisted\"],\n    [{ _id: 33 },\n     { _id: 33 },\n     \"_id whitelisted, _id only\"],\n    [{ x: 1 },\n     {},\n     \"_id whitelisted, no _id\"]\n  ]);\n\n  testProjection({ _id: 0 }, [\n    [{ _id: 42, x: 1, y: { z: \"2\" } },\n     { x: 1, y: { z: \"2\" } },\n     \"_id blacklisted\"],\n    [{ _id: 33 },\n     {},\n     \"_id blacklisted, _id only\"],\n    [{ x: 1 },\n     { x: 1 },\n     \"_id blacklisted, no _id\"]\n  ]);\n\n  testProjection({}, [\n    [{ a: 1, b: 2, c: \"3\" },\n     { a: 1, b: 2, c: \"3\" },\n     \"empty projection\"]\n  ]);\n\n  testCompileProjectionThrows(\n    { 'inc': 1, 'excl': 0 },\n    \"You cannot currently mix including and excluding fields\");\n  testCompileProjectionThrows(\n    { _id: 1, a: 0 },\n    \"You cannot currently mix including and excluding fields\");\n\n  testCompileProjectionThrows(\n    { 'a': 1, 'a.b': 1 },\n    \"using both of them may trigger unexpected behavior\");\n  testCompileProjectionThrows(\n    { 'a.b.c': 1, 'a.b': 1, 'a': 1 },\n    \"using both of them may trigger unexpected behavior\");\n\n  testCompileProjectionThrows(\"some string\", \"fields option must be an object\");\n});\n\nTinytest.add(\"minimongo - fetch with fields\", function (test) {\n  var c = new LocalCollection();\n  _.times(30, function (i) {\n    c.insert({\n      something: Random.id(),\n      anything: {\n        foo: \"bar\",\n        cool: \"hot\"\n      },\n      nothing: i,\n      i: i\n    });\n  });\n\n  // Test just a regular fetch with some projection\n  var fetchResults = c.find({}, { fields: {\n    'something': 1,\n    'anything.foo': 1\n  } }).fetch();\n\n  test.isTrue(_.all(fetchResults, function (x) {\n    return x &&\n           x.something &&\n           x.anything &&\n           x.anything.foo &&\n           x.anything.foo === \"bar\" &&\n           !_.has(x, 'nothing') &&\n           !_.has(x.anything, 'cool');\n  }));\n\n  // Test with a selector, even field used in the selector is excluded in the\n  // projection\n  fetchResults = c.find({\n    nothing: { $gte: 5 }\n  }, {\n    fields: { nothing: 0 }\n  }).fetch();\n\n  test.isTrue(_.all(fetchResults, function (x) {\n    return x &&\n           x.something &&\n           x.anything &&\n           x.anything.foo === \"bar\" &&\n           x.anything.cool === \"hot\" &&\n           !_.has(x, 'nothing') &&\n           x.i &&\n           x.i >= 5;\n  }));\n\n  test.isTrue(fetchResults.length === 25);\n\n  // Test that we can sort, based on field excluded from the projection, use\n  // skip and limit as well!\n  // following find will get indexes [10..20) sorted by nothing\n  fetchResults = c.find({}, {\n    sort: {\n      nothing: 1\n    },\n    limit: 10,\n    skip: 10,\n    fields: {\n      i: 1,\n      something: 1\n    }\n  }).fetch();\n\n  test.isTrue(_.all(fetchResults, function (x) {\n    return x &&\n           x.something &&\n           x.i >= 10 && x.i < 20;\n  }));\n\n  _.each(fetchResults, function (x, i, arr) {\n    if (!i) return;\n    test.isTrue(x.i === arr[i-1].i + 1);\n  });\n\n  // Temporary unsupported operators\n  // queries are taken from MongoDB docs examples\n  test.throws(function () {\n    c.find({}, { fields: { 'grades.$': 1 } });\n  });\n  test.throws(function () {\n    c.find({}, { fields: { grades: { $elemMatch: { mean: 70 } } } });\n  });\n  test.throws(function () {\n    c.find({}, { fields: { grades: { $slice: [20, 10] } } });\n  });\n});\n\nTinytest.add(\"minimongo - fetch with projection, subarrays\", function (test) {\n  // Apparently projection of type 'foo.bar.x' for\n  // { foo: [ { bar: { x: 42 } }, { bar: { x: 3 } } ] }\n  // should return exactly this object. More precisely, arrays are considered as\n  // sets and are queried separately and then merged back to result set\n  var c = new LocalCollection();\n\n  // Insert a test object with two set fields\n  c.insert({\n    setA: [{\n      fieldA: 42,\n      fieldB: 33\n    }, {\n      fieldA: \"the good\",\n      fieldB: \"the bad\",\n      fieldC: \"the ugly\"\n    }],\n    setB: [{\n      anotherA: { },\n      anotherB: \"meh\"\n    }, {\n      anotherA: 1234,\n      anotherB: 431\n    }]\n  });\n\n  var equalNonStrict = function (a, b, desc) {\n    test.isTrue(_.isEqual(a, b), desc);\n  };\n\n  var testForProjection = function (projection, expected) {\n    var fetched = c.find({}, { fields: projection }).fetch()[0];\n    equalNonStrict(fetched, expected, \"failed sub-set projection: \" +\n                                      JSON.stringify(projection));\n  };\n\n  testForProjection({ 'setA.fieldA': 1, 'setB.anotherB': 1, _id: 0 },\n                    {\n                      setA: [{ fieldA: 42 }, { fieldA: \"the good\" }],\n                      setB: [{ anotherB: \"meh\" }, { anotherB: 431 }]\n                    });\n\n  testForProjection({ 'setA.fieldA': 0, 'setB.anotherA': 0, _id: 0 },\n                    {\n                      setA: [{fieldB:33}, {fieldB:\"the bad\",fieldC:\"the ugly\"}],\n                      setB: [{ anotherB: \"meh\" }, { anotherB: 431 }]\n                    });\n\n  c.remove({});\n  c.insert({a:[[{b:1,c:2},{b:2,c:4}],{b:3,c:5},[{b:4, c:9}]]});\n\n  testForProjection({ 'a.b': 1, _id: 0 },\n                    {a: [ [ { b: 1 }, { b: 2 } ], { b: 3 }, [ { b: 4 } ] ] });\n  testForProjection({ 'a.b': 0, _id: 0 },\n                    {a: [ [ { c: 2 }, { c: 4 } ], { c: 5 }, [ { c: 9 } ] ] });\n});\n\nTinytest.add(\"minimongo - fetch with projection, deep copy\", function (test) {\n  // Compiled fields projection defines the contract: returned document doesn't\n  // retain anything from the passed argument.\n  var doc = {\n    a: { x: 42 },\n    b: {\n      y: { z: 33 }\n    },\n    c: \"asdf\"\n  };\n\n  var fields = {\n    'a': 1,\n    'b.y': 1\n  };\n\n  var projectionFn = LocalCollection._compileProjection(fields);\n  var filteredDoc = projectionFn(doc);\n  doc.a.x++;\n  doc.b.y.z--;\n  test.equal(filteredDoc.a.x, 42, \"projection returning deep copy - including\");\n  test.equal(filteredDoc.b.y.z, 33, \"projection returning deep copy - including\");\n\n  fields = { c: 0 };\n  projectionFn = LocalCollection._compileProjection(fields);\n  filteredDoc = projectionFn(doc);\n\n  doc.a.x = 5;\n  test.equal(filteredDoc.a.x, 43, \"projection returning deep copy - excluding\");\n});\n\nTinytest.add(\"minimongo - observe ordered with projection\", function (test) {\n  // These tests are copy-paste from \"minimongo -observe ordered\",\n  // slightly modified to test projection\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var handle;\n\n  var c = new LocalCollection();\n  handle = c.find({}, {sort: {a: 1}, fields: { a: 1 }}).observe(cbs);\n  test.isTrue(handle.collection === c);\n\n  c.insert({_id: 'foo', a:1, b:2});\n  test.equal(operations.shift(), ['added', {a:1}, 0, null]);\n  c.update({a:1}, {$set: {a: 2, b: 1}});\n  test.equal(operations.shift(), ['changed', {a:2}, 0, {a:1}]);\n  c.insert({_id: 'bar', a:10, c: 33});\n  test.equal(operations.shift(), ['added', {a:10}, 1, null]);\n  c.update({}, {$inc: {a: 1}}, {multi: true});\n  c.update({}, {$inc: {c: 1}}, {multi: true});\n  test.equal(operations.shift(), ['changed', {a:3}, 0, {a:2}]);\n  test.equal(operations.shift(), ['changed', {a:11}, 1, {a:10}]);\n  c.update({a:11}, {a:1, b:44});\n  test.equal(operations.shift(), ['changed', {a:1}, 1, {a:11}]);\n  test.equal(operations.shift(), ['moved', {a:1}, 1, 0, 'foo']);\n  c.remove({a:2});\n  test.equal(operations.shift(), undefined);\n  c.remove({a:3});\n  test.equal(operations.shift(), ['removed', 'foo', 1, {a:3}]);\n\n  // test stop\n  handle.stop();\n  var idA2 = Random.id();\n  c.insert({_id: idA2, a:2});\n  test.equal(operations.shift(), undefined);\n\n  var cursor = c.find({}, {fields: {a: 1, _id: 0}});\n  test.throws(function () {\n    cursor.observeChanges({added: function () {}});\n  });\n  test.throws(function () {\n    cursor.observe({added: function () {}});\n  });\n\n  // test initial inserts (and backwards sort)\n  handle = c.find({}, {sort: {a: -1}, fields: { a: 1 } }).observe(cbs);\n  test.equal(operations.shift(), ['added', {a:2}, 0, null]);\n  test.equal(operations.shift(), ['added', {a:1}, 1, null]);\n  handle.stop();\n\n  // test _suppress_initial\n  handle = c.find({}, {sort: {a: -1}, fields: { a: 1 }}).observe(_.extend(cbs, {_suppress_initial: true}));\n  test.equal(operations.shift(), undefined);\n  c.insert({a:100, b: { foo: \"bar\" }});\n  test.equal(operations.shift(), ['added', {a:100}, 0, idA2]);\n  handle.stop();\n\n  // test skip and limit.\n  c.remove({});\n  handle = c.find({}, {sort: {a: 1}, skip: 1, limit: 2, fields: { 'blacklisted': 0 }}).observe(cbs);\n  test.equal(operations.shift(), undefined);\n  c.insert({a:1, blacklisted:1324});\n  test.equal(operations.shift(), undefined);\n  c.insert({_id: 'foo', a:2, blacklisted:[\"something\"]});\n  test.equal(operations.shift(), ['added', {a:2}, 0, null]);\n  c.insert({a:3, blacklisted: { 2: 3 }});\n  test.equal(operations.shift(), ['added', {a:3}, 1, null]);\n  c.insert({a:4, blacklisted: 6});\n  test.equal(operations.shift(), undefined);\n  c.update({a:1}, {a:0, blacklisted:4444});\n  test.equal(operations.shift(), undefined);\n  c.update({a:0}, {a:5, blacklisted:11111});\n  test.equal(operations.shift(), ['removed', 'foo', 0, {a:2}]);\n  test.equal(operations.shift(), ['added', {a:4}, 1, null]);\n  c.update({a:3}, {a:3.5, blacklisted:333.4444});\n  test.equal(operations.shift(), ['changed', {a:3.5}, 0, {a:3}]);\n  handle.stop();\n\n  // test _no_indices\n\n  c.remove({});\n  handle = c.find({}, {sort: {a: 1}, fields: { a: 1 }}).observe(_.extend(cbs, {_no_indices: true}));\n  c.insert({_id: 'foo', a:1, zoo: \"crazy\"});\n  test.equal(operations.shift(), ['added', {a:1}, -1, null]);\n  c.update({a:1}, {$set: {a: 2, foobar: \"player\"}});\n  test.equal(operations.shift(), ['changed', {a:2}, -1, {a:1}]);\n  c.insert({a:10, b:123.45});\n  test.equal(operations.shift(), ['added', {a:10}, -1, null]);\n  c.update({}, {$inc: {a: 1, b:2}}, {multi: true});\n  test.equal(operations.shift(), ['changed', {a:3}, -1, {a:2}]);\n  test.equal(operations.shift(), ['changed', {a:11}, -1, {a:10}]);\n  c.update({a:11, b:125.45}, {a:1, b:444});\n  test.equal(operations.shift(), ['changed', {a:1}, -1, {a:11}]);\n  test.equal(operations.shift(), ['moved', {a:1}, -1, -1, 'foo']);\n  c.remove({a:2});\n  test.equal(operations.shift(), undefined);\n  c.remove({a:3});\n  test.equal(operations.shift(), ['removed', 'foo', -1, {a:3}]);\n  handle.stop();\n});\n\n\nTinytest.add(\"minimongo - ordering\", function (test) {\n  var shortBinary = EJSON.newBinary(1);\n  shortBinary[0] = 128;\n  var longBinary1 = EJSON.newBinary(2);\n  longBinary1[1] = 42;\n  var longBinary2 = EJSON.newBinary(2);\n  longBinary2[1] = 50;\n\n  var date1 = new Date;\n  var date2 = new Date(date1.getTime() + 1000);\n\n  // value ordering\n  assert_ordering(test, LocalCollection._f._cmp, [\n    null,\n    1, 2.2, 3,\n    \"03\", \"1\", \"11\", \"2\", \"a\", \"aaa\",\n    {}, {a: 2}, {a: 3}, {a: 3, b: 4}, {b: 4}, {b: 4, a: 3},\n    {b: {}}, {b: [1, 2, 3]}, {b: [1, 2, 4]},\n    [], [1, 2], [1, 2, 3], [1, 2, 4], [1, 2, \"4\"], [1, 2, [4]],\n    shortBinary, longBinary1, longBinary2,\n    new MongoID.ObjectID(\"1234567890abcd1234567890\"),\n    new MongoID.ObjectID(\"abcd1234567890abcd123456\"),\n    false, true,\n    date1, date2\n  ]);\n\n  // document ordering under a sort specification\n  var verify = function (sorts, docs) {\n    _.each(_.isArray(sorts) ? sorts : [sorts], function (sort) {\n      var sorter = new Minimongo.Sorter(sort);\n      assert_ordering(test, sorter.getComparator(), docs);\n    });\n  };\n\n  // note: [] doesn't sort with \"arrays\", it sorts as \"undefined\". the position\n  // of arrays in _typeorder only matters for things like $lt. (This behavior\n  // verified with MongoDB 2.2.1.) We don't define the relative order of {a: []}\n  // and {c: 1} is undefined (MongoDB does seem to care but it's not clear how\n  // or why).\n  verify([{\"a\" : 1}, [\"a\"], [[\"a\", \"asc\"]]],\n         [{a: []}, {a: 1}, {a: {}}, {a: true}]);\n  verify([{\"a\" : 1}, [\"a\"], [[\"a\", \"asc\"]]],\n         [{c: 1}, {a: 1}, {a: {}}, {a: true}]);\n  verify([{\"a\" : -1}, [[\"a\", \"desc\"]]],\n         [{a: true}, {a: {}}, {a: 1}, {c: 1}]);\n  verify([{\"a\" : -1}, [[\"a\", \"desc\"]]],\n         [{a: true}, {a: {}}, {a: 1}, {a: []}]);\n\n  verify([{\"a\" : 1, \"b\": -1}, [\"a\", [\"b\", \"desc\"]],\n          [[\"a\", \"asc\"], [\"b\", \"desc\"]]],\n         [{c: 1}, {a: 1, b: 3}, {a: 1, b: 2}, {a: 2, b: 0}]);\n\n  verify([{\"a\" : 1, \"b\": 1}, [\"a\", \"b\"],\n          [[\"a\", \"asc\"], [\"b\", \"asc\"]]],\n         [{c: 1}, {a: 1, b: 2}, {a: 1, b: 3}, {a: 2, b: 0}]);\n\n  test.throws(function () {\n    new Minimongo.Sorter(\"a\");\n  });\n\n  test.throws(function () {\n    new Minimongo.Sorter(123);\n  });\n\n  // We don't support $natural:1 (since we don't actually have Mongo's on-disk\n  // ordering available!)\n  test.throws(function () {\n    new Minimongo.Sorter({$natural: 1});\n  });\n\n  // No sort spec implies everything equal.\n  test.equal(new Minimongo.Sorter({}).getComparator()({a:1}, {a:2}), 0);\n\n  // All sorts of array edge cases!\n  // Increasing sort sorts by the smallest element it finds; 1 < 2.\n  verify({a: 1}, [\n    {a: [1, 10, 20]},\n    {a: [5, 2, 99]}\n  ]);\n  // Decreasing sorts by largest it finds; 99 > 20.\n  verify({a: -1}, [\n    {a: [5, 2, 99]},\n    {a: [1, 10, 20]}\n  ]);\n  // Can also sort by specific array indices.\n  verify({'a.1': 1}, [\n    {a: [5, 2, 99]},\n    {a: [1, 10, 20]}\n  ]);\n  // We do NOT expand sub-arrays, so the minimum in the second doc is 5, not\n  // -20. (Numbers always sort before arrays.)\n  verify({a: 1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [-5, -20], 18]}\n  ]);\n  // The maximum in each of these is the array, since arrays are \"greater\" than\n  // numbers. And [10, 15] is greater than [-5, -20].\n  verify({a: -1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [-5, -20], 18]}\n  ]);\n  // 'a.0' here ONLY means \"first element of a\", not \"first element of something\n  // found in a\", so it CANNOT find the 10 or -5.\n  verify({'a.0': 1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [-5, -20], 18]}\n  ]);\n  verify({'a.0': -1}, [\n    {a: [5, [-5, -20], 18]},\n    {a: [1, [10, 15], 20]}\n  ]);\n  // Similarly, this is just comparing [-5,-20] to [10, 15].\n  verify({'a.1': 1}, [\n    {a: [5, [-5, -20], 18]},\n    {a: [1, [10, 15], 20]}\n  ]);\n  verify({'a.1': -1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [-5, -20], 18]}\n  ]);\n  // Here we are just comparing [10,15] directly to [19,3] (and NOT also\n  // iterating over the numbers; this is implemented by setting dontIterate in\n  // makeLookupFunction).  So [10,15]<[19,3] even though 3 is the smallest\n  // number you can find there.\n  verify({'a.1': 1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [19, 3], 18]}\n  ]);\n  verify({'a.1': -1}, [\n    {a: [5, [19, 3], 18]},\n    {a: [1, [10, 15], 20]}\n  ]);\n  // Minimal elements are 1 and 5.\n  verify({a: 1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [19, 3], 18]}\n  ]);\n  // Maximal elements are [19,3] and [10,15] (because arrays sort higher than\n  // numbers), even though there's a 20 floating around.\n  verify({a: -1}, [\n    {a: [5, [19, 3], 18]},\n    {a: [1, [10, 15], 20]}\n  ]);\n  // Maximal elements are [10,15] and [3,19].  [10,15] is bigger even though 19\n  // is the biggest number in them, because array comparison is lexicographic.\n  verify({a: -1}, [\n    {a: [1, [10, 15], 20]},\n    {a: [5, [3, 19], 18]}\n  ]);\n\n  // (0,4) < (0,5), so they go in this order.  It's not correct to consider\n  // (0,3) as a sort key for the second document because they come from\n  // different a-branches.\n  verify({'a.x': 1, 'a.y': 1}, [\n    {a: [{x: 0, y: 4}]},\n    {a: [{x: 0, y: 5}, {x: 1, y: 3}]}\n  ]);\n\n  verify({'a.0.s': 1}, [\n    {a: [ {s: 1} ]},\n    {a: [ {s: 2} ]}\n  ]);\n});\n\nTinytest.add(\"minimongo - sort\", function (test) {\n  var c = new LocalCollection();\n  for (var i = 0; i < 50; i++)\n    for (var j = 0; j < 2; j++)\n      c.insert({a: i, b: j, _id: i + \"_\" + j});\n\n  test.equal(\n    c.find({a: {$gt: 10}}, {sort: {b: -1, a: 1}, limit: 5}).fetch(), [\n      {a: 11, b: 1, _id: \"11_1\"},\n      {a: 12, b: 1, _id: \"12_1\"},\n      {a: 13, b: 1, _id: \"13_1\"},\n      {a: 14, b: 1, _id: \"14_1\"},\n      {a: 15, b: 1, _id: \"15_1\"}]);\n\n  test.equal(\n    c.find({a: {$gt: 10}}, {sort: {b: -1, a: 1}, skip: 3, limit: 5}).fetch(), [\n      {a: 14, b: 1, _id: \"14_1\"},\n      {a: 15, b: 1, _id: \"15_1\"},\n      {a: 16, b: 1, _id: \"16_1\"},\n      {a: 17, b: 1, _id: \"17_1\"},\n      {a: 18, b: 1, _id: \"18_1\"}]);\n\n  test.equal(\n    c.find({a: {$gte: 20}}, {sort: {a: 1, b: -1}, skip: 50, limit: 5}).fetch(), [\n      {a: 45, b: 1, _id: \"45_1\"},\n      {a: 45, b: 0, _id: \"45_0\"},\n      {a: 46, b: 1, _id: \"46_1\"},\n      {a: 46, b: 0, _id: \"46_0\"},\n      {a: 47, b: 1, _id: \"47_1\"}]);\n});\n\nTinytest.add(\"minimongo - subkey sort\", function (test) {\n  var c = new LocalCollection();\n\n  // normal case\n  c.insert({a: {b: 2}});\n  c.insert({a: {b: 1}});\n  c.insert({a: {b: 3}});\n  test.equal(\n    _.pluck(c.find({}, {sort: {'a.b': -1}}).fetch(), 'a'),\n    [{b: 3}, {b: 2}, {b: 1}]);\n\n  // isn't an object\n  c.insert({a: 1});\n  test.equal(\n    _.pluck(c.find({}, {sort: {'a.b': 1}}).fetch(), 'a'),\n    [1, {b: 1}, {b: 2}, {b: 3}]);\n\n  // complex object\n  c.insert({a: {b: {c: 1}}});\n  test.equal(\n    _.pluck(c.find({}, {sort: {'a.b': -1}}).fetch(), 'a'),\n    [{b: {c: 1}}, {b: 3}, {b: 2}, {b: 1}, 1]);\n\n  // no such top level prop\n  c.insert({c: 1});\n  test.equal(\n    _.pluck(c.find({}, {sort: {'a.b': -1}}).fetch(), 'a'),\n    [{b: {c: 1}}, {b: 3}, {b: 2}, {b: 1}, 1, undefined]);\n\n  // no such mid level prop. just test that it doesn't throw.\n  test.equal(c.find({}, {sort: {'a.nope.c': -1}}).count(), 6);\n});\n\nTinytest.add(\"minimongo - array sort\", function (test) {\n  var c = new LocalCollection();\n\n  // \"up\" and \"down\" are the indices that the docs should have when sorted\n  // ascending and descending by \"a.x\" respectively. They are not reverses of\n  // each other: when sorting ascending, you use the minimum value you can find\n  // in the document, and when sorting descending, you use the maximum value you\n  // can find. So [1, 4] shows up in the 1 slot when sorting ascending and the 4\n  // slot when sorting descending.\n  //\n  // Similarly, \"selected\" is the index that the doc should have in the query\n  // that sorts ascending on \"a.x\" and selects {'a.x': {$gt: 1}}. In this case,\n  // the 1 in [1, 4] may not be used as a sort key.\n  c.insert({up: 1, down: 1, selected: 2, a: {x: [1, 4]}});\n  c.insert({up: 2, down: 2, selected: 0, a: [{x: [2]}, {x: 3}]});\n  c.insert({up: 0, down: 4,              a: {x: 0}});\n  c.insert({up: 3, down: 3, selected: 1, a: {x: 2.5}});\n  c.insert({up: 4, down: 0, selected: 3, a: {x: 5}});\n\n  // Test that the the documents in \"cursor\" contain values with the name\n  // \"field\" running from 0 to the max value of that name in the collection.\n  var testCursorMatchesField = function (cursor, field) {\n    var fieldValues = [];\n    c.find().forEach(function (doc) {\n      if (_.has(doc, field))\n        fieldValues.push(doc[field]);\n    });\n    test.equal(_.pluck(cursor.fetch(), field),\n               _.range(_.max(fieldValues) + 1));\n  };\n\n  testCursorMatchesField(c.find({}, {sort: {'a.x': 1}}), 'up');\n  testCursorMatchesField(c.find({}, {sort: {'a.x': -1}}), 'down');\n  testCursorMatchesField(c.find({'a.x': {$gt: 1}}, {sort: {'a.x': 1}}),\n                         'selected');\n});\n\nTinytest.add(\"minimongo - sort keys\", function (test) {\n  var keyListToObject = function (keyList) {\n    var obj = {};\n    _.each(keyList, function (key) {\n      obj[EJSON.stringify(key)] = true;\n    });\n    return obj;\n  };\n\n  var testKeys = function (sortSpec, doc, expectedKeyList) {\n    var expectedKeys = keyListToObject(expectedKeyList);\n    var sorter = new Minimongo.Sorter(sortSpec);\n\n    var actualKeyList = [];\n    sorter._generateKeysFromDoc(doc, function (key) {\n      actualKeyList.push(key);\n    });\n    var actualKeys = keyListToObject(actualKeyList);\n    test.equal(actualKeys, expectedKeys);\n  };\n\n  var testParallelError = function (sortSpec, doc) {\n    var sorter = new Minimongo.Sorter(sortSpec);\n    test.throws(function () {\n      sorter._generateKeysFromDoc(doc, function (){});\n    }, /parallel arrays/);\n  };\n\n  // Just non-array fields.\n  testKeys({'a.x': 1, 'a.y': 1},\n           {a: {x: 0, y: 5}},\n           [[0,5]]);\n\n  // Ensure that we don't get [0,3] and [1,5].\n  testKeys({'a.x': 1, 'a.y': 1},\n           {a: [{x: 0, y: 5}, {x: 1, y: 3}]},\n           [[0,5], [1,3]]);\n\n  // Ensure we can combine \"array fields\" with \"non-array fields\".\n  testKeys({'a.x': 1, 'a.y': 1, b: -1},\n           {a: [{x: 0, y: 5}, {x: 1, y: 3}], b: 42},\n           [[0,5,42], [1,3,42]]);\n  testKeys({b: -1, 'a.x': 1, 'a.y': 1},\n           {a: [{x: 0, y: 5}, {x: 1, y: 3}], b: 42},\n           [[42,0,5], [42,1,3]]);\n  testKeys({'a.x': 1, b: -1, 'a.y': 1},\n           {a: [{x: 0, y: 5}, {x: 1, y: 3}], b: 42},\n           [[0,42,5], [1,42,3]]);\n  testKeys({a: 1, b: 1},\n           {a: [1, 2, 3], b: 42},\n           [[1,42], [2,42], [3,42]]);\n\n  // Don't support multiple arrays at the same level.\n  testParallelError({a: 1, b: 1},\n                    {a: [1, 2, 3], b: [42]});\n\n  // We are MORE STRICT than Mongo here; Mongo supports this!\n  // XXX support this too  #NestedArraySort\n  testParallelError({'a.x': 1, 'a.y': 1},\n                    {a: [{x: 1, y: [2, 3]},\n                         {x: 2, y: [4, 5]}]});\n});\n\nTinytest.add(\"minimongo - sort key filter\", function (test) {\n  var testOrder = function (sortSpec, selector, doc1, doc2) {\n    var matcher = new Minimongo.Matcher(selector);\n    var sorter = new Minimongo.Sorter(sortSpec, {matcher: matcher});\n    var comparator = sorter.getComparator();\n    var comparison = comparator(doc1, doc2);\n    test.isTrue(comparison < 0);\n  };\n\n  testOrder({'a.x': 1}, {'a.x': {$gt: 1}},\n            {a: {x: 3}},\n            {a: {x: [1, 4]}});\n  testOrder({'a.x': 1}, {'a.x': {$gt: 0}},\n            {a: {x: [1, 4]}},\n            {a: {x: 3}});\n\n  var keyCompatible = function (sortSpec, selector, key, compatible) {\n    var matcher = new Minimongo.Matcher(selector);\n    var sorter = new Minimongo.Sorter(sortSpec, {matcher: matcher});\n    var actual = sorter._keyCompatibleWithSelector(key);\n    test.equal(actual, compatible);\n  };\n\n  keyCompatible({a: 1}, {a: 5}, [5], true);\n  keyCompatible({a: 1}, {a: 5}, [8], false);\n  keyCompatible({a: 1}, {a: {x: 5}}, [{x: 5}], true);\n  keyCompatible({a: 1}, {a: {x: 5}}, [{x: 5, y: 9}], false);\n  keyCompatible({'a.x': 1}, {a: {x: 5}}, [5], true);\n  // To confirm this:\n  //   > db.x.insert({_id: \"q\", a: [{x:1}, {x:5}], b: 2})\n  //   > db.x.insert({_id: \"w\", a: [{x:5}, {x:10}], b: 1})\n  //   > db.x.find({}).sort({'a.x': 1, b: 1})\n  //   { \"_id\" : \"q\", \"a\" : [  {  \"x\" : 1 },  {  \"x\" : 5 } ], \"b\" : 2 }\n  //   { \"_id\" : \"w\", \"a\" : [  {  \"x\" : 5 },  {  \"x\" : 10 } ], \"b\" : 1 }\n  //   > db.x.find({a: {x:5}}).sort({'a.x': 1, b: 1})\n  //   { \"_id\" : \"q\", \"a\" : [  {  \"x\" : 1 },  {  \"x\" : 5 } ], \"b\" : 2 }\n  //   { \"_id\" : \"w\", \"a\" : [  {  \"x\" : 5 },  {  \"x\" : 10 } ], \"b\" : 1 }\n  //   > db.x.find({'a.x': 5}).sort({'a.x': 1, b: 1})\n  //   { \"_id\" : \"w\", \"a\" : [  {  \"x\" : 5 },  {  \"x\" : 10 } ], \"b\" : 1 }\n  //   { \"_id\" : \"q\", \"a\" : [  {  \"x\" : 1 },  {  \"x\" : 5 } ], \"b\" : 2 }\n  // ie, only the last one manages to trigger the key compatibility code,\n  // not the previous one.  (The \"b\" sort is necessary because when the key\n  // compatibility code *does* kick in, both documents only end up with \"5\"\n  // for the first field as their only sort key, and we need to differentiate\n  // somehow...)\n  keyCompatible({'a.x': 1}, {a: {x: 5}}, [1], true);\n  keyCompatible({'a.x': 1}, {'a.x': 5}, [5], true);\n  keyCompatible({'a.x': 1}, {'a.x': 5}, [1], false);\n\n  // Regex key check.\n  keyCompatible({a: 1}, {a: /^foo+/}, ['foo'], true);\n  keyCompatible({a: 1}, {a: /^foo+/}, ['foooo'], true);\n  keyCompatible({a: 1}, {a: /^foo+/}, ['foooobar'], true);\n  keyCompatible({a: 1}, {a: /^foo+/}, ['afoooo'], false);\n  keyCompatible({a: 1}, {a: /^foo+/}, [''], false);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\"}}, ['foo'], true);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\"}}, ['foooo'], true);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\"}}, ['foooobar'], true);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\"}}, ['afoooo'], false);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\"}}, [''], false);\n\n  keyCompatible({a: 1}, {a: /^foo+/i}, ['foo'], true);\n  // Key compatibility check appears to be turned off for regexps with flags.\n  keyCompatible({a: 1}, {a: /^foo+/i}, ['bar'], true);\n  keyCompatible({a: 1}, {a: /^foo+/m}, ['bar'], true);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\", $options: \"i\"}}, ['bar'], true);\n  keyCompatible({a: 1}, {a: {$regex: \"^foo+\", $options: \"m\"}}, ['bar'], true);\n\n  // Multiple keys!\n  keyCompatible({a: 1, b: 1, c: 1},\n                {a: {$gt: 5}, c: {$lt: 3}}, [6, \"bla\", 2], true);\n  keyCompatible({a: 1, b: 1, c: 1},\n                {a: {$gt: 5}, c: {$lt: 3}}, [6, \"bla\", 4], false);\n  keyCompatible({a: 1, b: 1, c: 1},\n                {a: {$gt: 5}, c: {$lt: 3}}, [3, \"bla\", 1], false);\n  // No filtering is done (ie, all keys are compatible) if the first key isn't\n  // constrained.\n  keyCompatible({a: 1, b: 1, c: 1},\n                {c: {$lt: 3}}, [3, \"bla\", 4], true);\n});\n\nTinytest.add(\"minimongo - sort function\", function (test) {\n  var c = new LocalCollection();\n\n  c.insert({a: 1});\n  c.insert({a: 10});\n  c.insert({a: 5});\n  c.insert({a: 7});\n  c.insert({a: 2});\n  c.insert({a: 4});\n  c.insert({a: 3});\n\n  var sortFunction = function (doc1, doc2) {\n    return doc2.a - doc1.a;\n  };\n\n  test.equal(c.find({}, {sort: sortFunction}).fetch(), c.find({}).fetch().sort(sortFunction));\n  test.notEqual(c.find({}).fetch(), c.find({}).fetch().sort(sortFunction));\n  test.equal(c.find({}, {sort: {a: -1}}).fetch(), c.find({}).fetch().sort(sortFunction));\n});\n\nTinytest.add(\"minimongo - binary search\", function (test) {\n  var forwardCmp = function (a, b) {\n    return a - b;\n  };\n\n  var backwardCmp = function (a, b) {\n    return -1 * forwardCmp(a, b);\n  };\n\n  var checkSearch = function (cmp, array, value, expected, message) {\n    var actual = LocalCollection._binarySearch(cmp, array, value);\n    if (expected != actual) {\n      test.fail({type: \"minimongo-binary-search\",\n                 message: message + \" : Expected index \" + expected +\n                 \" but had \" + actual\n      });\n    }\n  };\n\n  var checkSearchForward = function (array, value, expected, message) {\n    checkSearch(forwardCmp, array, value, expected, message);\n  };\n  var checkSearchBackward = function (array, value, expected, message) {\n    checkSearch(backwardCmp, array, value, expected, message);\n  };\n\n  checkSearchForward([1, 2, 5, 7], 4, 2, \"Inner insert\");\n  checkSearchForward([1, 2, 3, 4], 3, 3, \"Inner insert, equal value\");\n  checkSearchForward([1, 2, 5], 4, 2, \"Inner insert, odd length\");\n  checkSearchForward([1, 3, 5, 6], 9, 4, \"End insert\");\n  checkSearchForward([1, 3, 5, 6], 0, 0, \"Beginning insert\");\n  checkSearchForward([1], 0, 0, \"Single array, less than.\");\n  checkSearchForward([1], 1, 1, \"Single array, equal.\");\n  checkSearchForward([1], 2, 1, \"Single array, greater than.\");\n  checkSearchForward([], 1, 0, \"Empty array\");\n  checkSearchForward([1, 1, 1, 2, 2, 2, 2], 1, 3, \"Highly degenerate array, lower\");\n  checkSearchForward([1, 1, 1, 2, 2, 2, 2], 2, 7, \"Highly degenerate array, upper\");\n  checkSearchForward([2, 2, 2, 2, 2, 2, 2], 1, 0, \"Highly degenerate array, lower\");\n  checkSearchForward([2, 2, 2, 2, 2, 2, 2], 2, 7, \"Highly degenerate array, equal\");\n  checkSearchForward([2, 2, 2, 2, 2, 2, 2], 3, 7, \"Highly degenerate array, upper\");\n\n  checkSearchBackward([7, 5, 2, 1], 4, 2, \"Backward: Inner insert\");\n  checkSearchBackward([4, 3, 2, 1], 3, 2, \"Backward: Inner insert, equal value\");\n  checkSearchBackward([5, 2, 1], 4, 1, \"Backward: Inner insert, odd length\");\n  checkSearchBackward([6, 5, 3, 1], 9, 0, \"Backward: Beginning insert\");\n  checkSearchBackward([6, 5, 3, 1], 0, 4, \"Backward: End insert\");\n  checkSearchBackward([1], 0, 1, \"Backward: Single array, less than.\");\n  checkSearchBackward([1], 1, 1, \"Backward: Single array, equal.\");\n  checkSearchBackward([1], 2, 0, \"Backward: Single array, greater than.\");\n  checkSearchBackward([], 1, 0, \"Backward: Empty array\");\n  checkSearchBackward([2, 2, 2, 2, 1, 1, 1], 1, 7, \"Backward: Degenerate array, lower\");\n  checkSearchBackward([2, 2, 2, 2, 1, 1, 1], 2, 4, \"Backward: Degenerate array, upper\");\n  checkSearchBackward([2, 2, 2, 2, 2, 2, 2], 1, 7, \"Backward: Highly degenerate array, upper\");\n  checkSearchBackward([2, 2, 2, 2, 2, 2, 2], 2, 7, \"Backward: Highly degenerate array, upper\");\n  checkSearchBackward([2, 2, 2, 2, 2, 2, 2], 3, 0, \"Backward: Highly degenerate array, upper\");\n});\n\nTinytest.add(\"minimongo - modify\", function (test) {\n  var modifyWithQuery = function (doc, query, mod, expected) {\n    var coll = new LocalCollection;\n    coll.insert(doc);\n    // The query is relevant for 'a.$.b'.\n    coll.update(query, mod);\n    var actual = coll.findOne();\n    delete actual._id;  // added by insert\n\n    if (typeof expected === \"function\") {\n      expected(actual, EJSON.stringify({input: doc, mod: mod}));\n    } else {\n      test.equal(actual, expected, EJSON.stringify({input: doc, mod: mod}));\n    }\n  };\n  var modify = function (doc, mod, expected) {\n    modifyWithQuery(doc, {}, mod, expected);\n  };\n  var exceptionWithQuery = function (doc, query, mod) {\n    var coll = new LocalCollection;\n    coll.insert(doc);\n    test.throws(function () {\n      coll.update(query, mod);\n    });\n  };\n  var exception = function (doc, mod) {\n    exceptionWithQuery(doc, {}, mod);\n  };\n\n  var upsert = function (query, mod, expected) {\n    var coll = new LocalCollection;\n\n    var result = coll.upsert(query, mod);\n\n    var actual = coll.findOne();\n\n    if (expected._id) {\n      test.equal(result.insertedId, expected._id);\n    }\n    else {\n      delete actual._id;\n    }\n\n    test.equal(actual, expected);\n  };\n\n  var upsertException = function (query, mod) {\n    var coll = new LocalCollection;\n    test.throws(function(){\n      coll.upsert(query, mod);\n    });\n  };\n\n  // document replacement\n  modify({}, {}, {});\n  modify({a: 12}, {}, {}); // tested against mongodb\n  modify({a: 12}, {a: 13}, {a:13});\n  modify({a: 12, b: 99}, {a: 13}, {a:13});\n  exception({a: 12}, {a: 13, $set: {b: 13}});\n  exception({a: 12}, {$set: {b: 13}, a: 13});\n\n  exception({a: 12}, {$a: 13}); //invalid operator\n  exception({a: 12}, {b:{$a: 13}});\n  exception({a: 12}, {b:{'a.b': 13}});\n  exception({a: 12}, {b:{'\\0a': 13}});\n\n  // keys\n  modify({}, {$set: {'a': 12}}, {a: 12});\n  modify({}, {$set: {'a.b': 12}}, {a: {b: 12}});\n  modify({}, {$set: {'a.b.c': 12}}, {a: {b: {c: 12}}});\n  modify({a: {d: 99}}, {$set: {'a.b.c': 12}}, {a: {d: 99, b: {c: 12}}});\n  modify({}, {$set: {'a.b.3.c': 12}}, {a: {b: {3: {c: 12}}}});\n  modify({a: {b: []}}, {$set: {'a.b.3.c': 12}}, {\n    a: {b: [null, null, null, {c: 12}]}});\n  exception({a: [null, null, null]}, {$set: {'a.1.b': 12}});\n  exception({a: [null, 1, null]}, {$set: {'a.1.b': 12}});\n  exception({a: [null, \"x\", null]}, {$set: {'a.1.b': 12}});\n  exception({a: [null, [], null]}, {$set: {'a.1.b': 12}});\n  modify({a: [null, null, null]}, {$set: {'a.3.b': 12}}, {\n    a: [null, null, null, {b: 12}]});\n  exception({a: []}, {$set: {'a.b': 12}});\n  exception({a: 12}, {$set: {'a.b': 99}}); // tested on mongo\n  exception({a: 'x'}, {$set: {'a.b': 99}});\n  exception({a: true}, {$set: {'a.b': 99}});\n  exception({a: null}, {$set: {'a.b': 99}});\n  modify({a: {}}, {$set: {'a.3': 12}}, {a: {'3': 12}});\n  modify({a: []}, {$set: {'a.3': 12}}, {a: [null, null, null, 12]});\n  exception({}, {$set: {'': 12}}); // tested on mongo\n  exception({}, {$set: {'.': 12}}); // tested on mongo\n  exception({}, {$set: {'a.': 12}}); // tested on mongo\n  exception({}, {$set: {'. ': 12}}); // tested on mongo\n  exception({}, {$inc: {'... ': 12}}); // tested on mongo\n  exception({}, {$set: {'a..b': 12}}); // tested on mongo\n  modify({a: [1,2,3]}, {$set: {'a.01': 99}}, {a: [1, 99, 3]});\n  modify({a: [1,{a: 98},3]}, {$set: {'a.01.b': 99}}, {a: [1,{a:98, b: 99},3]});\n  modify({}, {$set: {'2.a.b': 12}}, {'2': {'a': {'b': 12}}}); // tested\n  exception({x: []}, {$set: {'x.2..a': 99}});\n  modify({x: [null, null]}, {$set: {'x.2.a': 1}}, {x: [null, null, {a: 1}]});\n  exception({x: [null, null]}, {$set: {'x.1.a': 1}});\n\n  // a.$.b\n  modifyWithQuery({a: [{x: 2}, {x: 4}]}, {'a.x': 4}, {$set: {'a.$.z': 9}},\n                  {a: [{x: 2}, {x: 4, z: 9}]});\n  exception({a: [{x: 2}, {x: 4}]}, {$set: {'a.$.z': 9}});\n  exceptionWithQuery({a: [{x: 2}, {x: 4}], b: 5}, {b: 5}, {$set: {'a.$.z': 9}});\n  // can't have two $\n  exceptionWithQuery({a: [{x: [2]}]}, {'a.x': 2}, {$set: {'a.$.x.$': 9}});\n  modifyWithQuery({a: [5, 6, 7]}, {a: 6}, {$set: {'a.$': 9}}, {a: [5, 9, 7]});\n  modifyWithQuery({a: [{b: [{c: 9}, {c: 10}]}, {b: {c: 11}}]}, {'a.b.c': 10},\n                  {$unset: {'a.$.b': 1}}, {a: [{}, {b: {c: 11}}]});\n  modifyWithQuery({a: [{b: [{c: 9}, {c: 10}]}, {b: {c: 11}}]}, {'a.b.c': 11},\n                  {$unset: {'a.$.b': 1}},\n                  {a: [{b: [{c: 9}, {c: 10}]}, {}]});\n  modifyWithQuery({a: [1]}, {'a.0': 1}, {$set: {'a.$': 5}}, {a: [5]});\n  modifyWithQuery({a: [9]}, {a: {$mod: [2, 1]}}, {$set: {'a.$': 5}}, {a: [5]});\n  // Negatives don't set '$'.\n  exceptionWithQuery({a: [1]}, {$not: {a: 2}}, {$set: {'a.$': 5}});\n  exceptionWithQuery({a: [1]}, {'a.0': {$ne: 2}}, {$set: {'a.$': 5}});\n  // One $or clause works.\n  modifyWithQuery({a: [{x: 2}, {x: 4}]},\n                  {$or: [{'a.x': 4}]}, {$set: {'a.$.z': 9}},\n                  {a: [{x: 2}, {x: 4, z: 9}]});\n  // More $or clauses throw.\n  exceptionWithQuery({a: [{x: 2}, {x: 4}]},\n                     {$or: [{'a.x': 4}, {'a.x': 4}]},\n                     {$set: {'a.$.z': 9}});\n  // $and uses the last one.\n  modifyWithQuery({a: [{x: 1}, {x: 3}]},\n                  {$and: [{'a.x': 1}, {'a.x': 3}]},\n                  {$set: {'a.$.x': 5}},\n                  {a: [{x: 1}, {x: 5}]});\n  modifyWithQuery({a: [{x: 1}, {x: 3}]},\n                  {$and: [{'a.x': 3}, {'a.x': 1}]},\n                  {$set: {'a.$.x': 5}},\n                  {a: [{x: 5}, {x: 3}]});\n  // Same goes for the implicit AND of a document selector.\n  modifyWithQuery({a: [{x: 1}, {y: 3}]},\n                  {'a.x': 1, 'a.y': 3},\n                  {$set: {'a.$.z': 5}},\n                  {a: [{x: 1}, {y: 3, z: 5}]});\n  // with $near, make sure it finds the closest one\n  modifyWithQuery({a: [{b: [1,1]},\n                       {b: [ [3,3], [4,4] ]},\n                       {b: [9,9]}]},\n                  {'a.b': {$near: [5, 5]}},\n                  {$set: {'a.$.b': 'k'}},\n                  {a: [{b: [1,1]}, {b: 'k'}, {b: [9,9]}]});\n  modifyWithQuery({a: [{x: 1}, {y: 1}, {x: 1, y: 1}]},\n                  {a: {$elemMatch: {x: 1, y: 1}}},\n                  {$set: {'a.$.x': 2}},\n                  {a: [{x: 1}, {y: 1}, {x: 2, y: 1}]});\n  modifyWithQuery({a: [{b: [{x: 1}, {y: 1}, {x: 1, y: 1}]}]},\n                  {'a.b': {$elemMatch: {x: 1, y: 1}}},\n                  {$set: {'a.$.b': 3}},\n                  {a: [{b: 3}]});\n\n  // $inc\n  modify({a: 1, b: 2}, {$inc: {a: 10}}, {a: 11, b: 2});\n  modify({a: 1, b: 2}, {$inc: {c: 10}}, {a: 1, b: 2, c: 10});\n  exception({a: 1}, {$inc: {a: '10'}});\n  exception({a: 1}, {$inc: {a: true}});\n  exception({a: 1}, {$inc: {a: [10]}});\n  exception({a: '1'}, {$inc: {a: 10}});\n  exception({a: [1]}, {$inc: {a: 10}});\n  exception({a: {}}, {$inc: {a: 10}});\n  exception({a: false}, {$inc: {a: 10}});\n  exception({a: null}, {$inc: {a: 10}});\n  modify({a: [1, 2]}, {$inc: {'a.1': 10}}, {a: [1, 12]});\n  modify({a: [1, 2]}, {$inc: {'a.2': 10}}, {a: [1, 2, 10]});\n  modify({a: [1, 2]}, {$inc: {'a.3': 10}}, {a: [1, 2, null, 10]});\n  modify({a: {b: 2}}, {$inc: {'a.b': 10}}, {a: {b: 12}});\n  modify({a: {b: 2}}, {$inc: {'a.c': 10}}, {a: {b: 2, c: 10}});\n  exception({}, {$inc: {_id: 1}});\n\n  // $currentDate\n  modify({}, {$currentDate: {a: true}}, (result, msg) => { test.instanceOf(result.a,Date,msg) });\n  modify({}, {$currentDate: {a: {$type: \"date\"}}}, (result, msg) => { test.instanceOf(result.a,Date,msg) });\n  exception({}, {$currentDate: {a: false}});\n  exception({}, {$currentDate: {a: {}}});\n  exception({}, {$currentDate: {a: {$type: \"timestamp\"}}});\n\n  // $min\n  modify({a: 1, b: 2}, {$min: {b: 1}}, {a: 1, b: 1});\n  modify({a: 1, b: 2}, {$min: {b: 3}}, {a: 1, b: 2});\n  modify({a: 1, b: 2}, {$min: {c: 10}}, {a: 1, b: 2, c: 10});\n  exception({a: 1}, {$min: {a: '10'}});\n  exception({a: 1}, {$min: {a: true}});\n  exception({a: 1}, {$min: {a: [10]}});\n  exception({a: '1'}, {$min: {a: 10}});\n  exception({a: [1]}, {$min: {a: 10}});\n  exception({a: {}}, {$min: {a: 10}});\n  exception({a: false}, {$min: {a: 10}});\n  exception({a: null}, {$min: {a: 10}});\n  modify({a: [1, 2]}, {$min: {'a.1': 1}}, {a: [1, 1]});\n  modify({a: [1, 2]}, {$min: {'a.1': 3}}, {a: [1, 2]});\n  modify({a: [1, 2]}, {$min: {'a.2': 10}}, {a: [1, 2, 10]});\n  modify({a: [1, 2]}, {$min: {'a.3': 10}}, {a: [1, 2, null, 10]});\n  modify({a: {b: 2}}, {$min: {'a.b': 1}}, {a: {b: 1}});\n  modify({a: {b: 2}}, {$min: {'a.c': 10}}, {a: {b: 2, c: 10}});\n  exception({}, {$min: {_id: 1}});\n\n  // $max\n  modify({a: 1, b: 2}, {$max: {b: 1}}, {a: 1, b: 2});\n  modify({a: 1, b: 2}, {$max: {b: 3}}, {a: 1, b: 3});\n  modify({a: 1, b: 2}, {$max: {c: 10}}, {a: 1, b: 2, c: 10});\n  exception({a: 1}, {$max: {a: '10'}});\n  exception({a: 1}, {$max: {a: true}});\n  exception({a: 1}, {$max: {a: [10]}});\n  exception({a: '1'}, {$max: {a: 10}});\n  exception({a: [1]}, {$max: {a: 10}});\n  exception({a: {}}, {$max: {a: 10}});\n  exception({a: false}, {$max: {a: 10}});\n  exception({a: null}, {$max: {a: 10}});\n  modify({a: [1, 2]}, {$max: {'a.1': 3}}, {a: [1, 3]});\n  modify({a: [1, 2]}, {$max: {'a.1': 1}}, {a: [1, 2]});\n  modify({a: [1, 2]}, {$max: {'a.2': 10}}, {a: [1, 2, 10]});\n  modify({a: [1, 2]}, {$max: {'a.3': 10}}, {a: [1, 2, null, 10]});\n  modify({a: {b: 2}}, {$max: {'a.b': 3}}, {a: {b: 3}});\n  modify({a: {b: 2}}, {$max: {'a.c': 10}}, {a: {b: 2, c: 10}});\n  exception({}, {$max: {_id: 1}});\n\n  // $set\n  modify({a: 1, b: 2}, {$set: {a: 10}}, {a: 10, b: 2});\n  modify({a: 1, b: 2}, {$set: {c: 10}}, {a: 1, b: 2, c: 10});\n  modify({a: 1, b: 2}, {$set: {a: {c: 10}}}, {a: {c: 10}, b: 2});\n  modify({a: [1, 2], b: 2}, {$set: {a: [3, 4]}}, {a: [3, 4], b: 2});\n  modify({a: [1, 2, 3], b: 2}, {$set: {'a.1': [3, 4]}},\n         {a: [1, [3, 4], 3], b:2});\n  modify({a: [1], b: 2}, {$set: {'a.1': 9}}, {a: [1, 9], b: 2});\n  modify({a: [1], b: 2}, {$set: {'a.2': 9}}, {a: [1, null, 9], b: 2});\n  modify({a: {b: 1}}, {$set: {'a.c': 9}}, {a: {b: 1, c: 9}});\n  modify({}, {$set: {'x._id': 4}}, {x: {_id: 4}});\n  exception({}, {$set: {_id: 4}});\n  exception({_id: 4}, {$set: {_id: 4}});  // even not-changing _id is bad\n  //restricted field names\n  exception({a:{}}, {$set:{a:{$a:1}}}); \n  exception({ a: {} }, { $set: { a: { c:\n              [{ b: { $a: 1 } }] } } });\n  exception({a:{}}, {$set:{a:{'\\0a':1}}});\n  exception({a:{}}, {$set:{a:{'a.b':1}}});\n\n  // $unset\n  modify({}, {$unset: {a: 1}}, {});\n  modify({a: 1}, {$unset: {a: 1}}, {});\n  modify({a: 1, b: 2}, {$unset: {a: 1}}, {b: 2});\n  modify({a: 1, b: 2}, {$unset: {a: 0}}, {b: 2});\n  modify({a: 1, b: 2}, {$unset: {a: false}}, {b: 2});\n  modify({a: 1, b: 2}, {$unset: {a: null}}, {b: 2});\n  modify({a: 1, b: 2}, {$unset: {a: [1]}}, {b: 2});\n  modify({a: 1, b: 2}, {$unset: {a: {}}}, {b: 2});\n  modify({a: {b: 2, c: 3}}, {$unset: {'a.b': 1}}, {a: {c: 3}});\n  modify({a: [1, 2, 3]}, {$unset: {'a.1': 1}}, {a: [1, null, 3]}); // tested\n  modify({a: [1, 2, 3]}, {$unset: {'a.2': 1}}, {a: [1, 2, null]}); // tested\n  modify({a: [1, 2, 3]}, {$unset: {'a.x': 1}}, {a: [1, 2, 3]}); // tested\n  modify({a: {b: 1}}, {$unset: {'a.b.c.d': 1}}, {a: {b: 1}});\n  modify({a: {b: 1}}, {$unset: {'a.x.c.d': 1}}, {a: {b: 1}});\n  modify({a: {b: {c: 1}}}, {$unset: {'a.b.c': 1}}, {a: {b: {}}});\n  exception({}, {$unset: {_id: 1}});\n\n  // $push\n  modify({}, {$push: {a: 1}}, {a: [1]});\n  modify({a: []}, {$push: {a: 1}}, {a: [1]});\n  modify({a: [1]}, {$push: {a: 2}}, {a: [1, 2]});\n  exception({a: true}, {$push: {a: 1}});\n  modify({a: [1]}, {$push: {a: [2]}}, {a: [1, [2]]});\n  modify({a: []}, {$push: {'a.1': 99}}, {a: [null, [99]]}); // tested\n  modify({a: {}}, {$push: {'a.x': 99}}, {a: {x: [99]}});\n  modify({}, {$push: {a: {$each: [1, 2, 3]}}},\n         {a: [1, 2, 3]});\n  modify({a: []}, {$push: {a: {$each: [1, 2, 3]}}},\n         {a: [1, 2, 3]});\n  modify({a: [true]}, {$push: {a: {$each: [1, 2, 3]}}},\n         {a: [true, 1, 2, 3]});\n  // No positive numbers for $slice\n  exception({}, {$push: {a: {$each: [], $slice: 5}}});\n  modify({a: [true]}, {$push: {a: {$each: [1, 2, 3], $slice: -2}}},\n         {a: [2, 3]});\n  modify({a: [false, true]}, {$push: {a: {$each: [1], $slice: -2}}},\n         {a: [true, 1]});\n  modify(\n    {a: [{x: 3}, {x: 1}]},\n    {$push: {a: {\n      $each: [{x: 4}, {x: 2}],\n      $slice: -2,\n      $sort: {x: 1}\n    }}},\n    {a: [{x: 3}, {x: 4}]});\n  modify({}, {$push: {a: {$each: [1, 2, 3], $slice: 0}}}, {a: []});\n  modify({a: [1, 2]}, {$push: {a: {$each: [1, 2, 3], $slice: 0}}}, {a: []});\n  // $push with $position modifier\n  // No negative number for $position\n  exception({a: []}, {$push: {a: {$each: [0], $position: -1}}});\n  modify({a: [1, 2]}, {$push: {a: {$each: [0], $position: 0}}},\n    {a: [0, 1, 2]});\n  modify({a: [1, 2]}, {$push: {a: {$each: [-1, 0], $position: 0}}},\n    {a: [-1, 0, 1, 2]});\n  modify({a: [1, 3]}, {$push: {a: {$each: [2], $position: 1}}}, {a: [1, 2, 3]});\n  modify({a: [1, 4]}, {$push: {a: {$each: [2, 3], $position: 1}}},\n    {a: [1, 2, 3, 4]});\n  modify({a: [1, 2]}, {$push: {a: {$each: [3], $position: 3}}}, {a: [1, 2, 3]});\n  modify({a: [1, 2]}, {$push: {a: {$each: [3], $position: 99}}},\n    {a: [1, 2, 3]});\n  modify({a: [1, 2]}, {$push: {a: {$each: [3], $position: 99, $slice: -2}}},\n    {a: [2, 3]});\n  modify(\n    {a: [{x: 1}, {x: 2}]},\n    {$push: {a: {$each: [{x: 3}], $position: 0, $sort: {x: 1}, $slice: -3}}},\n    {a: [{x: 1}, {x: 2}, {x: 3}]}\n  );\n  modify(\n    {a: [{x: 1}, {x: 2}]},\n    {$push: {a: {$each: [{x: 3}], $position: 0, $sort: {x: 1}, $slice: 0}}},\n    {a: []}\n  );\n  //restricted field names\n  exception({}, {$push: {$a: 1}});\n  exception({}, {$push: {'\\0a': 1}});\n  exception({}, {$push: {a: {$a:1}}});\n  exception({}, {$push: {a: {$each: [{$a:1}]}}});\n  exception({}, {$push: {a: {$each: [{\"a.b\":1}]}}});\n  exception({}, {$push: {a: {$each: [{'\\0a':1}]}}});\n  modify({}, {$push: {a: {$each: [{'':1}]}}}, {a: [ { '': 1 } ]});\n  modify({}, {$push: {a: {$each: [{' ':1}]}}}, {a: [ { ' ': 1 } ]});\n  exception({}, {$push: {a: {$each: [{'.':1}]}}});\n\n  // $pushAll\n  modify({}, {$pushAll: {a: [1]}}, {a: [1]});\n  modify({a: []}, {$pushAll: {a: [1]}}, {a: [1]});\n  modify({a: [1]}, {$pushAll: {a: [2]}}, {a: [1, 2]});\n  modify({}, {$pushAll: {a: [1, 2]}}, {a: [1, 2]});\n  modify({a: []}, {$pushAll: {a: [1, 2]}}, {a: [1, 2]});\n  modify({a: [1]}, {$pushAll: {a: [2, 3]}}, {a: [1, 2, 3]});\n  modify({}, {$pushAll: {a: []}}, {a: []});\n  modify({a: []}, {$pushAll: {a: []}}, {a: []});\n  modify({a: [1]}, {$pushAll: {a: []}}, {a: [1]});\n  exception({a: true}, {$pushAll: {a: [1]}});\n  exception({a: []}, {$pushAll: {a: 1}});\n  modify({a: []}, {$pushAll: {'a.1': [99]}}, {a: [null, [99]]});\n  modify({a: []}, {$pushAll: {'a.1': []}}, {a: [null, []]});\n  modify({a: {}}, {$pushAll: {'a.x': [99]}}, {a: {x: [99]}});\n  modify({a: {}}, {$pushAll: {'a.x': []}}, {a: {x: []}});\n  exception({a: [1]}, {$pushAll: {a: [{$a:1}]}});\n  exception({a: [1]}, {$pushAll: {a: [{'\\0a':1}]}});\n  exception({a: [1]}, {$pushAll: {a: [{\"a.b\":1}]}});\n\n  // $addToSet\n  modify({}, {$addToSet: {a: 1}}, {a: [1]});\n  modify({a: []}, {$addToSet: {a: 1}}, {a: [1]});\n  modify({a: [1]}, {$addToSet: {a: 2}}, {a: [1, 2]});\n  modify({a: [1, 2]}, {$addToSet: {a: 1}}, {a: [1, 2]});\n  modify({a: [1, 2]}, {$addToSet: {a: 2}}, {a: [1, 2]});\n  modify({a: [1, 2]}, {$addToSet: {a: 3}}, {a: [1, 2, 3]});\n  exception({a: true}, {$addToSet: {a: 1}});\n  modify({a: [1]}, {$addToSet: {a: [2]}}, {a: [1, [2]]});\n  modify({}, {$addToSet: {a: {x: 1}}}, {a: [{x: 1}]});\n  modify({a: [{x: 1}]}, {$addToSet: {a: {x: 1}}}, {a: [{x: 1}]});\n  modify({a: [{x: 1}]}, {$addToSet: {a: {x: 2}}}, {a: [{x: 1}, {x: 2}]});\n  modify({a: [{x: 1, y: 2}]}, {$addToSet: {a: {x: 1, y: 2}}},\n         {a: [{x: 1, y: 2}]});\n  modify({a: [{x: 1, y: 2}]}, {$addToSet: {a: {y: 2, x: 1}}},\n         {a: [{x: 1, y: 2}, {y: 2, x: 1}]});\n  modify({a: [1, 2]}, {$addToSet: {a: {$each: [3, 1, 4]}}}, {a: [1, 2, 3, 4]});\n  modify({}, {$addToSet: {a: {$each: []}}}, {a: []});\n  modify({}, {$addToSet: {a: {$each: [1]}}}, {a: [1]});\n  modify({a: []}, {$addToSet: {'a.1': 99}}, {a: [null, [99]]});\n  modify({a: {}}, {$addToSet: {'a.x': 99}}, {a: {x: [99]}});\n  \n  // invalid field names\n  exception({}, {$addToSet: {a: {$b:1}}});\n  exception({}, {$addToSet: {a: {\"a.b\":1}}});\n  exception({}, {$addToSet: {a: {\"a.\":1}}});\n  exception({}, {$addToSet: {a: {'\\u0000a':1}}});\n  exception({a: [1, 2]}, {$addToSet: {a:{$each: [3, 1, {$a:1}]}}}); \n  exception({a: [1, 2]}, {$addToSet: {a:{$each: [3, 1, {'\\0a':1}]}}}); \n  exception({a: [1, 2]}, {$addToSet: {a:{$each: [3, 1, [{$a:1}]]}}}); \n  exception({a: [1, 2]}, {$addToSet: {a:{$each: [3, 1, [{b:{c:[{a:1},{\"d.s\":2}]}}]]}}}); \n  exception({a: [1, 2]}, {$addToSet: {a:{b: [3, 1, [{b:{c:[{a:1},{\"d.s\":2}]}}]]}}});\n  //$each is first element and thus an operator\n  modify({a: [1, 2]}, {$addToSet: {a: {$each: [3, 1, 4], b: 12}}},{a: [ 1, 2, 3, 4 ]});\n  // this should fail because $each is now a field name (not first in object) and thus invalid field name with $\n  exception({a: [1, 2]}, {$addToSet: {a: {b: 12, $each: [3, 1, 4]}}}); \n\n  // $pop\n  modify({}, {$pop: {a: 1}}, {}); // tested\n  modify({}, {$pop: {a: -1}}, {}); // tested\n  modify({a: []}, {$pop: {a: 1}}, {a: []});\n  modify({a: []}, {$pop: {a: -1}}, {a: []});\n  modify({a: [1, 2, 3]}, {$pop: {a: 1}}, {a: [1, 2]});\n  modify({a: [1, 2, 3]}, {$pop: {a: 10}}, {a: [1, 2]});\n  modify({a: [1, 2, 3]}, {$pop: {a: .001}}, {a: [1, 2]});\n  modify({a: [1, 2, 3]}, {$pop: {a: 0}}, {a: [1, 2]});\n  modify({a: [1, 2, 3]}, {$pop: {a: \"stuff\"}}, {a: [1, 2]});\n  modify({a: [1, 2, 3]}, {$pop: {a: -1}}, {a: [2, 3]});\n  modify({a: [1, 2, 3]}, {$pop: {a: -10}}, {a: [2, 3]});\n  modify({a: [1, 2, 3]}, {$pop: {a: -.001}}, {a: [2, 3]});\n  exception({a: true}, {$pop: {a: 1}});\n  exception({a: true}, {$pop: {a: -1}});\n  modify({a: []}, {$pop: {'a.1': 1}}, {a: []}); // tested\n  modify({a: [1, [2, 3], 4]}, {$pop: {'a.1': 1}}, {a: [1, [2], 4]});\n  modify({a: {}}, {$pop: {'a.x': 1}}, {a: {}}); // tested\n  modify({a: {x: [2, 3]}}, {$pop: {'a.x': 1}}, {a: {x: [2]}});\n\n  // $pull\n  modify({}, {$pull: {a: 1}}, {});\n  modify({}, {$pull: {'a.x': 1}}, {});\n  modify({a: {}}, {$pull: {'a.x': 1}}, {a: {}});\n  exception({a: true}, {$pull: {a: 1}});\n  modify({a: [2, 1, 2]}, {$pull: {a: 1}}, {a: [2, 2]});\n  modify({a: [2, 1, 2]}, {$pull: {a: 2}}, {a: [1]});\n  modify({a: [2, 1, 2]}, {$pull: {a: 3}}, {a: [2, 1, 2]});\n  modify({a: [1, null, 2, null]}, {$pull: {a: null}}, {a: [1, 2]});\n  modify({a: []}, {$pull: {a: 3}}, {a: []});\n  modify({a: [[2], [2, 1], [3]]}, {$pull: {a: [2, 1]}},\n         {a: [[2], [3]]}); // tested\n  modify({a: [{b: 1, c: 2}, {b: 2, c: 2}]}, {$pull: {a: {b: 1}}},\n         {a: [{b: 2, c: 2}]});\n  modify({a: [{b: 1, c: 2}, {b: 2, c: 2}]}, {$pull: {a: {c: 2}}},\n         {a: []});\n  // XXX implement this functionality!\n  // probably same refactoring as $elemMatch?\n  // modify({a: [1, 2, 3, 4]}, {$pull: {$gt: 2}}, {a: [1,2]}); fails!\n\n  // $pullAll\n  modify({}, {$pullAll: {a: [1]}}, {});\n  modify({a: [1, 2, 3]}, {$pullAll: {a: []}}, {a: [1, 2, 3]});\n  modify({a: [1, 2, 3]}, {$pullAll: {a: [2]}}, {a: [1, 3]});\n  modify({a: [1, 2, 3]}, {$pullAll: {a: [2, 1]}}, {a: [3]});\n  modify({a: [1, 2, 3]}, {$pullAll: {a: [1, 2]}}, {a: [3]});\n  modify({}, {$pullAll: {'a.b.c': [2]}}, {});\n  exception({a: true}, {$pullAll: {a: [1]}});\n  exception({a: [1, 2, 3]}, {$pullAll: {a: 1}});\n  modify({x: [{a: 1}, {a: 1, b: 2}]}, {$pullAll: {x: [{a: 1}]}},\n         {x: [{a: 1, b: 2}]});\n\n  // $rename\n  modify({}, {$rename: {a: 'b'}}, {});\n  modify({a: [12]}, {$rename: {a: 'b'}}, {b: [12]});\n  modify({a: {b: 12}}, {$rename: {a: 'c'}}, {c: {b: 12}});\n  modify({a: {b: 12}}, {$rename: {'a.b': 'a.c'}}, {a: {c: 12}});\n  modify({a: {b: 12}}, {$rename: {'a.b': 'x'}}, {a: {}, x: 12}); // tested\n  modify({a: {b: 12}}, {$rename: {'a.b': 'q.r'}}, {a: {}, q: {r: 12}});\n  modify({a: {b: 12}}, {$rename: {'a.b': 'q.2.r'}}, {a: {}, q: {2: {r: 12}}});\n  modify({a: {b: 12}, q: {}}, {$rename: {'a.b': 'q.2.r'}},\n         {a: {}, q: {2: {r: 12}}});\n  exception({a: {b: 12}, q: []}, {$rename: {'a.b': 'q.2'}}); // tested\n  exception({a: {b: 12}, q: []}, {$rename: {'a.b': 'q.2.r'}}); // tested\n  // These strange MongoDB behaviors throw.\n  // modify({a: {b: 12}, q: []}, {$rename: {'q.1': 'x'}},\n  //        {a: {b: 12}, x: []}); // tested\n  // modify({a: {b: 12}, q: []}, {$rename: {'q.1.j': 'x'}},\n  //        {a: {b: 12}, x: []}); // tested\n  exception({}, {$rename: {'a': 'a'}});\n  exception({}, {$rename: {'a.b': 'a.b'}});\n  modify({a: 12, b: 13}, {$rename: {a: 'b'}}, {b: 12});\n  exception({a: [12]}, {$rename: {a: '$b'}});\n  exception({a: [12]}, {$rename: {a: '\\0a'}});\n\n  // $setOnInsert\n  modify({a: 0}, {$setOnInsert: {a: 12}}, {a: 0});\n  upsert({a: 12}, {$setOnInsert: {b: 12}}, {a: 12, b: 12});\n  upsert({a: 12}, {$setOnInsert: {_id: 'test'}}, {_id: 'test', a: 12});\n  upsertException({a: 0}, {$setOnInsert: {$a: 12}});\n  upsertException({a: 0}, {$setOnInsert: {'\\0a': 12}});\n  upsert({a: 0}, {$setOnInsert: {b: {a:1}}}, {a:0, b:{a:1}});\n  upsertException({a: 0}, {$setOnInsert: {b: {$a:1}}});\n  upsertException({a: 0}, {$setOnInsert: {b: {'a.b':1}}});\n  upsertException({a: 0}, {$setOnInsert: {b: {'\\0a':1}}});\n\n  exception({}, {$set: {_id: 'bad'}});\n\n  // $bit\n  // unimplemented\n\n  // XXX test case sensitivity of modops\n  // XXX for each (most) modop, test that it performs a deep copy\n});\n\n// XXX test update() (selecting docs, multi, upsert..)\n\nTinytest.add(\"minimongo - observe ordered\", function (test) {\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var handle;\n\n  var c = new LocalCollection();\n  handle = c.find({}, {sort: {a: 1}}).observe(cbs);\n  test.isTrue(handle.collection === c);\n\n  c.insert({_id: 'foo', a:1});\n  test.equal(operations.shift(), ['added', {a:1}, 0, null]);\n  c.update({a:1}, {$set: {a: 2}});\n  test.equal(operations.shift(), ['changed', {a:2}, 0, {a:1}]);\n  c.insert({a:10});\n  test.equal(operations.shift(), ['added', {a:10}, 1, null]);\n  c.update({}, {$inc: {a: 1}}, {multi: true});\n  test.equal(operations.shift(), ['changed', {a:3}, 0, {a:2}]);\n  test.equal(operations.shift(), ['changed', {a:11}, 1, {a:10}]);\n  c.update({a:11}, {a:1});\n  test.equal(operations.shift(), ['changed', {a:1}, 1, {a:11}]);\n  test.equal(operations.shift(), ['moved', {a:1}, 1, 0, 'foo']);\n  c.remove({a:2});\n  test.equal(operations.shift(), undefined);\n  c.remove({a:3});\n  test.equal(operations.shift(), ['removed', 'foo', 1, {a:3}]);\n\n  // test stop\n  handle.stop();\n  var idA2 = Random.id();\n  c.insert({_id: idA2, a:2});\n  test.equal(operations.shift(), undefined);\n\n  // test initial inserts (and backwards sort)\n  handle = c.find({}, {sort: {a: -1}}).observe(cbs);\n  test.equal(operations.shift(), ['added', {a:2}, 0, null]);\n  test.equal(operations.shift(), ['added', {a:1}, 1, null]);\n  handle.stop();\n\n  // test _suppress_initial\n  handle = c.find({}, {sort: {a: -1}}).observe(_.extend({\n    _suppress_initial: true}, cbs));\n  test.equal(operations.shift(), undefined);\n  c.insert({a:100});\n  test.equal(operations.shift(), ['added', {a:100}, 0, idA2]);\n  handle.stop();\n\n  // test skip and limit.\n  c.remove({});\n  handle = c.find({}, {sort: {a: 1}, skip: 1, limit: 2}).observe(cbs);\n  test.equal(operations.shift(), undefined);\n  c.insert({a:1});\n  test.equal(operations.shift(), undefined);\n  c.insert({_id: 'foo', a:2});\n  test.equal(operations.shift(), ['added', {a:2}, 0, null]);\n  c.insert({a:3});\n  test.equal(operations.shift(), ['added', {a:3}, 1, null]);\n  c.insert({a:4});\n  test.equal(operations.shift(), undefined);\n  c.update({a:1}, {a:0});\n  test.equal(operations.shift(), undefined);\n  c.update({a:0}, {a:5});\n  test.equal(operations.shift(), ['removed', 'foo', 0, {a:2}]);\n  test.equal(operations.shift(), ['added', {a:4}, 1, null]);\n  c.update({a:3}, {a:3.5});\n  test.equal(operations.shift(), ['changed', {a:3.5}, 0, {a:3}]);\n  handle.stop();\n\n  // test observe limit with pre-existing docs\n  c.remove({});\n  c.insert({a: 1});\n  c.insert({_id: 'two', a: 2});\n  c.insert({a: 3});\n  handle = c.find({}, {sort: {a: 1}, limit: 2}).observe(cbs);\n  test.equal(operations.shift(), ['added', {a:1}, 0, null]);\n  test.equal(operations.shift(), ['added', {a:2}, 1, null]);\n  test.equal(operations.shift(), undefined);\n  c.remove({a: 2});\n  test.equal(operations.shift(), ['removed', 'two', 1, {a:2}]);\n  test.equal(operations.shift(), ['added', {a:3}, 1, null]);\n  test.equal(operations.shift(), undefined);\n  handle.stop();\n\n  // test _no_indices\n\n  c.remove({});\n  handle = c.find({}, {sort: {a: 1}}).observe(_.extend(cbs, {_no_indices: true}));\n  c.insert({_id: 'foo', a:1});\n  test.equal(operations.shift(), ['added', {a:1}, -1, null]);\n  c.update({a:1}, {$set: {a: 2}});\n  test.equal(operations.shift(), ['changed', {a:2}, -1, {a:1}]);\n  c.insert({a:10});\n  test.equal(operations.shift(), ['added', {a:10}, -1, null]);\n  c.update({}, {$inc: {a: 1}}, {multi: true});\n  test.equal(operations.shift(), ['changed', {a:3}, -1, {a:2}]);\n  test.equal(operations.shift(), ['changed', {a:11}, -1, {a:10}]);\n  c.update({a:11}, {a:1});\n  test.equal(operations.shift(), ['changed', {a:1}, -1, {a:11}]);\n  test.equal(operations.shift(), ['moved', {a:1}, -1, -1, 'foo']);\n  c.remove({a:2});\n  test.equal(operations.shift(), undefined);\n  c.remove({a:3});\n  test.equal(operations.shift(), ['removed', 'foo', -1, {a:3}]);\n  handle.stop();\n});\n\n_.each([true, false], function (ordered) {\n  Tinytest.add(\"minimongo - observe ordered: \" + ordered, function (test) {\n    var c = new LocalCollection();\n\n    var ev = \"\";\n    var makecb = function (tag) {\n      var ret = {};\n      _.each([\"added\", \"changed\", \"removed\"], function (fn) {\n        var fnName = ordered ? fn + \"At\" : fn;\n        ret[fnName] = function (doc) {\n          ev = (ev + fn.substr(0, 1) + tag + doc._id + \"_\");\n        };\n      });\n      return ret;\n    };\n    var expect = function (x) {\n      test.equal(ev, x);\n      ev = \"\";\n    };\n\n    c.insert({_id: 1, name: \"strawberry\", tags: [\"fruit\", \"red\", \"squishy\"]});\n    c.insert({_id: 2, name: \"apple\", tags: [\"fruit\", \"red\", \"hard\"]});\n    c.insert({_id: 3, name: \"rose\", tags: [\"flower\", \"red\", \"squishy\"]});\n\n    // This should work equally well for ordered and unordered observations\n    // (because the callbacks don't look at indices and there's no 'moved'\n    // callback).\n    var handle = c.find({tags: \"flower\"}).observe(makecb('a'));\n    expect(\"aa3_\");\n    c.update({name: \"rose\"}, {$set: {tags: [\"bloom\", \"red\", \"squishy\"]}});\n    expect(\"ra3_\");\n    c.update({name: \"rose\"}, {$set: {tags: [\"flower\", \"red\", \"squishy\"]}});\n    expect(\"aa3_\");\n    c.update({name: \"rose\"}, {$set: {food: false}});\n    expect(\"ca3_\");\n    c.remove({});\n    expect(\"ra3_\");\n    c.insert({_id: 4, name: \"daisy\", tags: [\"flower\"]});\n    expect(\"aa4_\");\n    handle.stop();\n    // After calling stop, no more callbacks are called.\n    c.insert({_id: 5, name: \"iris\", tags: [\"flower\"]});\n    expect(\"\");\n\n    // Test that observing a lookup by ID works.\n    handle = c.find(4).observe(makecb('b'));\n    expect('ab4_');\n    c.update(4, {$set: {eek: 5}});\n    expect('cb4_');\n    handle.stop();\n\n    // Test observe with reactive: false.\n    handle = c.find({tags: \"flower\"}, {reactive: false}).observe(makecb('c'));\n    expect('ac4_ac5_');\n    // This insert shouldn't trigger a callback because it's not reactive.\n    c.insert({_id: 6, name: \"river\", tags: [\"flower\"]});\n    expect('');\n    handle.stop();\n  });\n});\n\n\nTinytest.add(\"minimongo - saveOriginals\", function (test) {\n  // set up some data\n  var c = new LocalCollection(),\n      count;\n  c.insert({_id: 'foo', x: 'untouched'});\n  c.insert({_id: 'bar', x: 'updateme'});\n  c.insert({_id: 'baz', x: 'updateme'});\n  c.insert({_id: 'quux', y: 'removeme'});\n  c.insert({_id: 'whoa', y: 'removeme'});\n\n  // Save originals and make some changes.\n  c.saveOriginals();\n  c.insert({_id: \"hooray\", z: 'insertme'});\n  c.remove({y: 'removeme'});\n  count = c.update({x: 'updateme'}, {$set: {z: 5}}, {multi: true});\n  c.update('bar', {$set: {k: 7}});  // update same doc twice\n\n  // Verify returned count is correct\n  test.equal(count, 2);\n\n  // Verify the originals.\n  var originals = c.retrieveOriginals();\n  var affected = ['bar', 'baz', 'quux', 'whoa', 'hooray'];\n  test.equal(originals.size(), _.size(affected));\n  _.each(affected, function (id) {\n    test.isTrue(originals.has(id));\n  });\n  test.equal(originals.get('bar'), {_id: 'bar', x: 'updateme'});\n  test.equal(originals.get('baz'), {_id: 'baz', x: 'updateme'});\n  test.equal(originals.get('quux'), {_id: 'quux', y: 'removeme'});\n  test.equal(originals.get('whoa'), {_id: 'whoa', y: 'removeme'});\n  test.equal(originals.get('hooray'), undefined);\n\n  // Verify that changes actually occured.\n  test.equal(c.find().count(), 4);\n  test.equal(c.findOne('foo'), {_id: 'foo', x: 'untouched'});\n  test.equal(c.findOne('bar'), {_id: 'bar', x: 'updateme', z: 5, k: 7});\n  test.equal(c.findOne('baz'), {_id: 'baz', x: 'updateme', z: 5});\n  test.equal(c.findOne('hooray'), {_id: 'hooray', z: 'insertme'});\n\n  // The next call doesn't get the same originals again.\n  c.saveOriginals();\n  originals = c.retrieveOriginals();\n  test.isTrue(originals);\n  test.isTrue(originals.empty());\n\n  // Insert and remove a document during the period.\n  c.saveOriginals();\n  c.insert({_id: 'temp', q: 8});\n  c.remove('temp');\n  originals = c.retrieveOriginals();\n  test.equal(originals.size(), 1);\n  test.isTrue(originals.has('temp'));\n  test.equal(originals.get('temp'), undefined);\n});\n\nTinytest.add(\"minimongo - saveOriginals errors\", function (test) {\n  var c = new LocalCollection();\n  // Can't call retrieve before save.\n  test.throws(function () { c.retrieveOriginals(); });\n  c.saveOriginals();\n  // Can't call save twice.\n  test.throws(function () { c.saveOriginals(); });\n});\n\nTinytest.add(\"minimongo - objectid transformation\", function (test) {\n  var testId = function (item) {\n    test.equal(item, MongoID.idParse(MongoID.idStringify(item)));\n  };\n  var randomOid = new MongoID.ObjectID();\n  testId(randomOid);\n  testId(\"FOO\");\n  testId(\"ffffffffffff\");\n  testId(\"0987654321abcdef09876543\");\n  testId(new MongoID.ObjectID());\n  testId(\"--a string\");\n\n  test.equal(\"ffffffffffff\", MongoID.idParse(MongoID.idStringify(\"ffffffffffff\")));\n});\n\n\nTinytest.add(\"minimongo - objectid\", function (test) {\n  var randomOid = new MongoID.ObjectID();\n  var anotherRandomOid = new MongoID.ObjectID();\n  test.notEqual(randomOid, anotherRandomOid);\n  test.throws(function() { new MongoID.ObjectID(\"qqqqqqqqqqqqqqqqqqqqqqqq\");});\n  test.throws(function() { new MongoID.ObjectID(\"ABCDEF\"); });\n  test.equal(randomOid, new MongoID.ObjectID(randomOid.valueOf()));\n});\n\nTinytest.add(\"minimongo - pause\", function (test) {\n  var operations = [];\n  var cbs = log_callbacks(operations);\n\n  var c = new LocalCollection();\n  var h = c.find({}).observe(cbs);\n\n  // remove and add cancel out.\n  c.insert({_id: 1, a: 1});\n  test.equal(operations.shift(), ['added', {a:1}, 0, null]);\n\n  c.pauseObservers();\n\n  c.remove({_id: 1});\n  test.length(operations, 0);\n  c.insert({_id: 1, a: 1});\n  test.length(operations, 0);\n\n  c.resumeObservers();\n  test.length(operations, 0);\n\n\n  // two modifications become one\n  c.pauseObservers();\n\n  c.update({_id: 1}, {a: 2});\n  c.update({_id: 1}, {a: 3});\n\n  c.resumeObservers();\n  test.equal(operations.shift(), ['changed', {a:3}, 0, {a:1}]);\n  test.length(operations, 0);\n\n  // test special case for remove({})\n  c.pauseObservers();\n  test.equal(c.remove({}), 1);\n  test.length(operations, 0);\n  c.resumeObservers();\n  test.equal(operations.shift(), ['removed', 1, 0, {a:3}]);\n  test.length(operations, 0);\n\n  h.stop();\n});\n\nTinytest.add(\"minimongo - ids matched by selector\", function (test) {\n  var check = function (selector, ids) {\n    var idsFromSelector = LocalCollection._idsMatchedBySelector(selector);\n    // XXX normalize order, in a way that also works for ObjectIDs?\n    test.equal(idsFromSelector, ids);\n  };\n  check(\"foo\", [\"foo\"]);\n  check({_id: \"foo\"}, [\"foo\"]);\n  var oid1 = new MongoID.ObjectID();\n  check(oid1, [oid1]);\n  check({_id: oid1}, [oid1]);\n  check({_id: \"foo\", x: 42}, [\"foo\"]);\n  check({}, null);\n  check({_id: {$in: [\"foo\", oid1]}}, [\"foo\", oid1]);\n  check({_id: {$ne: \"foo\"}}, null);\n  // not actually valid, but works for now...\n  check({$and: [\"foo\"]}, [\"foo\"]);\n  check({$and: [{x: 42}, {_id: oid1}]}, [oid1]);\n  check({$and: [{x: 42}, {_id: {$in: [oid1]}}]}, [oid1]);\n});\n\nTinytest.add(\"minimongo - reactive stop\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({_id: 'A'});\n  coll.insert({_id: 'B'});\n  coll.insert({_id: 'C'});\n\n  var addBefore = function (str, newChar, before) {\n    var idx = str.indexOf(before);\n    if (idx === -1)\n      return str + newChar;\n    return str.slice(0, idx) + newChar + str.slice(idx);\n  };\n\n  var x, y;\n  var sortOrder = ReactiveVar(1);\n\n  var c = Tracker.autorun(function () {\n    var q = coll.find({}, {sort: {_id: sortOrder.get()}});\n    x = \"\";\n    q.observe({ addedAt: function (doc, atIndex, before) {\n      x = addBefore(x, doc._id, before);\n    }});\n    y = \"\";\n    q.observeChanges({ addedBefore: function (id, fields, before) {\n      y = addBefore(y, id, before);\n    }});\n  });\n\n  test.equal(x, \"ABC\");\n  test.equal(y, \"ABC\");\n\n  sortOrder.set(-1);\n  test.equal(x, \"ABC\");\n  test.equal(y, \"ABC\");\n  Tracker.flush();\n  test.equal(x, \"CBA\");\n  test.equal(y, \"CBA\");\n\n  coll.insert({_id: 'D'});\n  coll.insert({_id: 'E'});\n  test.equal(x, \"EDCBA\");\n  test.equal(y, \"EDCBA\");\n\n  c.stop();\n  // stopping kills the observes immediately\n  coll.insert({_id: 'F'});\n  test.equal(x, \"EDCBA\");\n  test.equal(y, \"EDCBA\");\n});\n\nTinytest.add(\"minimongo - immediate invalidate\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({_id: 'A'});\n\n  // This has two separate findOnes.  findOne() uses skip/limit, which means\n  // that its response to an update() call involves a recompute. We used to have\n  // a bug where we would first calculate all the calls that need to be\n  // recomputed, then recompute them one by one, without checking to see if the\n  // callbacks from recomputing one query stopped the second query, which\n  // crashed.\n  var c = Tracker.autorun(function () {\n    coll.findOne('A');\n    coll.findOne('A');\n  });\n\n  coll.update('A', {$set: {x: 42}});\n\n  c.stop();\n});\n\n\nTinytest.add(\"minimongo - count on cursor with limit\", function(test){\n  var coll = new LocalCollection(), count;\n\n  coll.insert({_id: 'A'});\n  coll.insert({_id: 'B'});\n  coll.insert({_id: 'C'});\n  coll.insert({_id: 'D'});\n\n  var c = Tracker.autorun(function (c) {\n    var cursor = coll.find({_id: {$exists: true}}, {sort: {_id: 1}, limit: 3});\n    count = cursor.count();\n  });\n\n  test.equal(count, 3);\n\n  coll.remove('A'); // still 3 in the collection\n  Tracker.flush();\n  test.equal(count, 3);\n\n  coll.remove('B'); // expect count now 2\n  Tracker.flush();\n  test.equal(count, 2);\n\n\n  coll.insert({_id: 'A'}); // now 3 again\n  Tracker.flush();\n  test.equal(count, 3);\n\n  coll.insert({_id: 'B'}); // now 4 entries, but count should be 3 still\n  Tracker.flush();\n  test.equal(count, 3);\n\n  c.stop();\n});\n\nTinytest.add(\"minimongo - reactive count with cached cursor\", function (test) {\n  var coll = new LocalCollection;\n  var cursor = coll.find({});\n  var firstAutorunCount, secondAutorunCount;\n  Tracker.autorun(function(){\n    firstAutorunCount = cursor.count();\n  });\n  Tracker.autorun(function(){\n    secondAutorunCount = coll.find({}).count();\n  });\n  test.equal(firstAutorunCount, 0);\n  test.equal(secondAutorunCount, 0);\n  coll.insert({i: 1});\n  coll.insert({i: 2});\n  coll.insert({i: 3});\n  Tracker.flush();\n  test.equal(firstAutorunCount, 3);\n  test.equal(secondAutorunCount, 3);\n});\n\nTinytest.add(\"minimongo - $near operator tests\", function (test) {\n  var coll = new LocalCollection();\n  coll.insert({ rest: { loc: [2, 3] } });\n  coll.insert({ rest: { loc: [-3, 3] } });\n  coll.insert({ rest: { loc: [5, 5] } });\n\n  test.equal(coll.find({ 'rest.loc': { $near: [0, 0], $maxDistance: 30 } }).count(), 3);\n  test.equal(coll.find({ 'rest.loc': { $near: [0, 0], $maxDistance: 4 } }).count(), 1);\n  var points = coll.find({ 'rest.loc': { $near: [0, 0], $maxDistance: 6 } }).fetch();\n  _.each(points, function (point, i, points) {\n    test.isTrue(!i || distance([0, 0], point.rest.loc) >= distance([0, 0], points[i - 1].rest.loc));\n  });\n\n  function distance(a, b) {\n    var x = a[0] - b[0];\n    var y = a[1] - b[1];\n    return Math.sqrt(x * x + y * y);\n  }\n\n  // GeoJSON tests\n  coll = new LocalCollection();\n  var data = [{ \"category\" : \"BURGLARY\", \"descript\" : \"BURGLARY OF STORE, FORCIBLE ENTRY\", \"address\" : \"100 Block of 10TH ST\", \"location\" : { \"type\" : \"Point\", \"coordinates\" : [  -122.415449723856,  37.7749518087273 ] } },\n    { \"category\" : \"WEAPON LAWS\", \"descript\" : \"POSS OF PROHIBITED WEAPON\", \"address\" : \"900 Block of MINNA ST\", \"location\" : { \"type\" : \"Point\", \"coordinates\" : [  -122.415386041221,  37.7747879744156 ] } },\n    { \"category\" : \"LARCENY/THEFT\", \"descript\" : \"GRAND THEFT OF PROPERTY\", \"address\" : \"900 Block of MINNA ST\", \"location\" : { \"type\" : \"Point\", \"coordinates\" : [  -122.41538270191,  37.774683628213 ] } },\n    { \"category\" : \"LARCENY/THEFT\", \"descript\" : \"PETTY THEFT FROM LOCKED AUTO\", \"address\" : \"900 Block of MINNA ST\", \"location\" : { \"type\" : \"Point\", \"coordinates\" : [  -122.415396041221,  37.7747879744156 ] } },\n    { \"category\" : \"OTHER OFFENSES\", \"descript\" : \"POSSESSION OF BURGLARY TOOLS\", \"address\" : \"900 Block of MINNA ST\", \"location\" : { \"type\" : \"Point\", \"coordinates\" : [  -122.415386041221,  37.7747879734156 ] } }\n  ];\n\n  _.each(data, function (x, i) { coll.insert(_.extend(x, { x: i })); });\n\n  var close15 = coll.find({ location: { $near: {\n    $geometry: { type: \"Point\",\n                 coordinates: [-122.4154282, 37.7746115] },\n    $maxDistance: 15 } } }).fetch();\n  test.length(close15, 1);\n  test.equal(close15[0].descript, \"GRAND THEFT OF PROPERTY\");\n\n  var close20 = coll.find({ location: { $near: {\n    $geometry: { type: \"Point\",\n                 coordinates: [-122.4154282, 37.7746115] },\n    $maxDistance: 20 } } }).fetch();\n  test.length(close20, 4);\n  test.equal(close20[0].descript, \"GRAND THEFT OF PROPERTY\");\n  test.equal(close20[1].descript, \"PETTY THEFT FROM LOCKED AUTO\");\n  test.equal(close20[2].descript, \"POSSESSION OF BURGLARY TOOLS\");\n  test.equal(close20[3].descript, \"POSS OF PROHIBITED WEAPON\");\n\n  // Any combinations of $near with $or/$and/$nor/$not should throw an error\n  test.throws(function () {\n    coll.find({ location: {\n      $not: {\n        $near: {\n          $geometry: {\n            type: \"Point\",\n            coordinates: [-122.4154282, 37.7746115]\n          }, $maxDistance: 20 } } } });\n  });\n  test.throws(function () {\n    coll.find({\n      $and: [ { location: { $near: { $geometry: { type: \"Point\", coordinates: [-122.4154282, 37.7746115] }, $maxDistance: 20 }}},\n              { x: 0 }]\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $or: [ { location: { $near: { $geometry: { type: \"Point\", coordinates: [-122.4154282, 37.7746115] }, $maxDistance: 20 }}},\n             { x: 0 }]\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $nor: [ { location: { $near: { $geometry: { type: \"Point\", coordinates: [-122.4154282, 37.7746115] }, $maxDistance: 1 }}},\n              { x: 0 }]\n    });\n  });\n  test.throws(function () {\n    coll.find({\n      $and: [{\n        $and: [{\n          location: {\n            $near: {\n              $geometry: {\n                type: \"Point\",\n                coordinates: [-122.4154282, 37.7746115]\n              },\n              $maxDistance: 1\n            }\n          }\n        }]\n      }]\n    });\n  });\n\n  // array tests\n  coll = new LocalCollection();\n  coll.insert({\n    _id: \"x\",\n    k: 9,\n    a: [\n      {b: [\n        [100, 100],\n        [1,  1]]},\n      {b: [150,  150]}]});\n  coll.insert({\n    _id: \"y\",\n    k: 9,\n    a: {b: [5, 5]}});\n  var testNear = function (near, md, expected) {\n    test.equal(\n      _.pluck(\n        coll.find({'a.b': {$near: near, $maxDistance: md}}).fetch(), '_id'),\n      expected);\n  };\n  testNear([149, 149], 4, ['x']);\n  testNear([149, 149], 1000, ['x', 'y']);\n  // It's important that we figure out that 'x' is closer than 'y' to [2,2] even\n  // though the first within-1000 point in 'x' (ie, [100,100]) is farther than\n  // 'y'.\n  testNear([2, 2], 1000, ['x', 'y']);\n\n  // Ensure that distance is used as a tie-breaker for sort.\n  test.equal(\n    _.pluck(coll.find({'a.b': {$near: [1, 1]}}, {sort: {k: 1}}).fetch(), '_id'),\n    ['x', 'y']);\n  test.equal(\n    _.pluck(coll.find({'a.b': {$near: [5, 5]}}, {sort: {k: 1}}).fetch(), '_id'),\n    ['y', 'x']);\n\n  var operations = [];\n  var cbs = log_callbacks(operations);\n  var handle = coll.find({'a.b': {$near: [7,7]}}).observe(cbs);\n\n  test.length(operations, 2);\n  test.equal(operations.shift(), ['added', {k:9, a:{b:[5,5]}}, 0, null]);\n  test.equal(operations.shift(),\n             ['added', {k: 9, a:[{b:[[100,100],[1,1]]},{b:[150,150]}]},\n              1, null]);\n  // This needs to be inserted in the MIDDLE of the two existing ones.\n  coll.insert({a: {b: [3,3]}});\n  test.length(operations, 1);\n  test.equal(operations.shift(), ['added', {a: {b: [3, 3]}}, 1, 'x']);\n\n  handle.stop();\n});\n\n// issue #2077\nTinytest.add(\"minimongo - $near and $geometry for legacy coordinates\", function(test){\n  var coll = new LocalCollection();\n\n  coll.insert({\n    loc: {\n      x: 1,\n      y: 1\n    }\n  });\n  coll.insert({\n    loc: [-1,-1]\n  });\n  coll.insert({\n    loc: [40,-10]\n  });\n  coll.insert({\n    loc: {\n      x: -10,\n      y: 40\n    }\n  });\n\n  test.equal(coll.find({ 'loc': { $near: [0, 0], $maxDistance: 4 } }).count(), 2);\n  test.equal(coll.find({ 'loc': { $near: {$geometry: {type: \"Point\", coordinates: [0, 0]}}} }).count(), 4);\n  test.equal(coll.find({ 'loc': { $near: {$geometry: {type: \"Point\", coordinates: [0, 0]}, $maxDistance:200000}}}).count(), 2);\n\n});\n\n// Regression test for #4377. Previously, \"replace\" updates didn't clone the\n// argument.\nTinytest.add(\"minimongo - update should clone\", function (test) {\n  var x = [];\n  var coll = new LocalCollection;\n  var id = coll.insert({});\n  coll.update(id, {x: x});\n  x.push(1);\n  test.equal(coll.findOne(id), {_id: id, x: []});\n});\n\n// See #2275.\nTinytest.add(\"minimongo - fetch in observe\", function (test) {\n  var coll = new LocalCollection;\n  var callbackInvoked = false;\n  var observe = coll.find().observeChanges({\n    added: function (id, fields) {\n      callbackInvoked = true;\n      test.equal(fields, {foo: 1});\n      var doc = coll.findOne({foo: 1});\n      test.isTrue(doc);\n      test.equal(doc.foo, 1);\n    }\n  });\n  test.isFalse(callbackInvoked);\n  var computation = Tracker.autorun(function (computation) {\n    if (computation.firstRun) {\n      coll.insert({foo: 1});\n    }\n  });\n  test.isTrue(callbackInvoked);\n  observe.stop();\n  computation.stop();\n});\n\n// See #2254\nTinytest.add(\"minimongo - fine-grained reactivity of observe with fields projection\", function (test) {\n  var X = new LocalCollection;\n  var id = \"asdf\";\n  X.insert({_id: id, foo: {bar: 123}});\n\n  var callbackInvoked = false;\n  var obs = X.find(id, {fields: {'foo.bar': 1}}).observeChanges({\n    changed: function (id, fields) {\n      callbackInvoked = true;\n    }\n  });\n\n  test.isFalse(callbackInvoked);\n  X.update(id, {$set: {'foo.baz': 456}});\n  test.isFalse(callbackInvoked);\n\n  obs.stop();\n});\nTinytest.add(\"minimongo - fine-grained reactivity of query with fields projection\", function (test) {\n  var X = new LocalCollection;\n  var id = \"asdf\";\n  X.insert({_id: id, foo: {bar: 123}});\n\n  var callbackInvoked = false;\n  var computation = Tracker.autorun(function () {\n    callbackInvoked = true;\n    return X.findOne(id, { fields: { 'foo.bar': 1 } });\n  });\n  test.isTrue(callbackInvoked);\n  callbackInvoked = false;\n  X.update(id, {$set: {'foo.baz': 456}});\n  test.isFalse(callbackInvoked);\n  X.update(id, {$set: {'foo.bar': 124}});\n  Tracker.flush();\n  test.isTrue(callbackInvoked);\n\n  computation.stop();\n});\n\n// Tests that the logic in `LocalCollection.prototype.update`\n// correctly deals with count() on a cursor with skip or limit (since\n// then the result set is an IdMap, not an array)\nTinytest.add(\"minimongo - reactive skip/limit count while updating\", function(test) {\n  var X = new LocalCollection;\n  var count = -1;\n\n  var c = Tracker.autorun(function() {\n    count = X.find({}, {skip: 1, limit: 1}).count();\n  });\n\n  test.equal(count, 0);\n\n  X.insert({});\n  Tracker.flush({_throwFirstError: true});\n  test.equal(count, 0);\n\n  X.insert({});\n  Tracker.flush({_throwFirstError: true});\n  test.equal(count, 1);\n\n  X.update({}, {$set: {foo: 1}});\n  Tracker.flush({_throwFirstError: true});\n  test.equal(count, 1);\n\n  // Make sure a second update also works\n  X.update({}, {$set: {foo: 2}});\n  Tracker.flush({_throwFirstError: true});\n  test.equal(count, 1);\n\n  c.stop();\n});\n\n// Makes sure inserts cannot be performed using field names that have\n// Mongo restricted characters in them ('.', '$', '\\0'):\n// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names\nTinytest.add(\"minimongo - cannot insert using invalid field names\", function (test) {\n  const collection = new LocalCollection();\n\n  // Quick test to make sure non-dot field inserts are working\n  collection.insert({ a: 'b' });\n\n  // Quick test to make sure field values with dots are allowed\n  collection.insert({ a: 'b.c' });\n\n  // Verify top level dot-field inserts are prohibited\n  ['a.b', '.b', 'a.', 'a.b.c'].forEach((field) => {\n    test.throws(function () {\n      collection.insert({ [field]: 'c' });\n    }, `Key ${field} must not contain '.'`);\n  });\n\n  // Verify nested dot-field inserts are prohibited\n  test.throws(function () {\n    collection.insert({ a: { b: { 'c.d': 'e' } } });\n  }, \"Key c.d must not contain '.'\");\n\n  // Verify field names starting with $ are prohibited\n  test.throws(function () {\n    collection.insert({ '$a': 'b' });\n  }, \"Key $a must not start with '$'\");\n\n  // Verify nested field names starting with $ are prohibited\n  test.throws(function () {\n    collection.insert({ a: { b: { '$c': 'd' } } });\n  }, \"Key $c must not start with '$'\");\n\n  // Verify top level fields with null characters are prohibited\n  ['\\0a', 'a\\0', 'a\\0b', '\\u0000a', 'a\\u0000', 'a\\u0000b'].forEach((field) => {\n    test.throws(function () {\n      collection.insert({ [field]: 'c' });\n    }, `Key ${field} must not contain null bytes`);\n  });\n\n  // Verify nested field names with null characters are prohibited\n  test.throws(function () {\n    collection.insert({ a: { b: { '\\0c': 'd' } } });\n  }, 'Key \\0c must not contain null bytes');\n});\n\n// Makes sure $set's cannot be performed using null bytes\n// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names\nTinytest.add(\"minimongo - cannot $set with null bytes\", function (test) {\n  const collection = new LocalCollection();\n\n  // Quick test to make sure non-null byte $set's are working\n  const id = collection.insert({ a: 'b', 'c': 'd' });\n  collection.update({ _id: id }, { $set: { e: 'f' } });\n\n  // Verify $set's with null bytes throw an exception\n  test.throws(() => {\n    collection.update({ _id: id }, { $set: { '\\0a': 'b' } });\n  }, 'Key \\0a must not contain null bytes');\n});\n\n// Makes sure $rename's cannot be performed using null bytes\n// https://docs.mongodb.com/manual/reference/limits/#Restrictions-on-Field-Names\nTinytest.add(\"minimongo - cannot $rename with null bytes\", function (test) {\n  const collection = new LocalCollection();\n\n  // Quick test to make sure non-null byte $rename's are working\n  let id = collection.insert({ a: 'b', c: 'd' });\n  collection.update({ _id: id }, { $rename: { a: 'a1', c: 'c1' } });\n\n  // Verify $rename's with null bytes throw an exception\n  collection.remove({});\n  id = collection.insert({ a: 'b', c: 'd' });\n  test.throws(() => {\n    collection.update({ _id: id }, { $rename: { a: '\\0a', c: 'c\\0' } });\n  }, \"The 'to' field for $rename cannot contain an embedded null byte\");\n});\n"]},"hash":"ec97a0627b44bddbe172f2de9d8b51468fca7e09"}
